<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="ubuntu16.04 配置Tensorflow环境"><meta name="keywords" content="Linux,Graphics"><meta name="author" content="Xiao Hui"><meta name="copyright" content="Xiao Hui"><title>ubuntu16.04 配置Tensorflow环境 | XIAOHUI'S BLOG</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script src="//code.tidio.co/fut0uxnwfp6sbxufi6qqozmfzutuf3nc.js" async></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5354c19cfb8a022c0adb15862e841958";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="dns-prefetch" href="https://www.google-analytics.com"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-109219512-1', 'auto');
ga('send', 'pageview');</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="XIAOHUI'S BLOG" type="application/atom+xml">
</head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8"><span class="toc-number">1.</span> <span class="toc-text">1. 显卡驱动</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85CUDA"><span class="toc-number">2.</span> <span class="toc-text">2. 安装CUDA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%BA%93"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 安装依赖库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E4%B8%8B%E8%BD%BDCUDA"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 下载CUDA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%AE%89%E8%A3%85%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 安装执行文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.1.</span> <span class="toc-text">2.3.1. 安装基础文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E5%AE%89%E8%A3%85%E8%A1%A5%E4%B8%81%E5%8C%85"><span class="toc-number">2.3.2.</span> <span class="toc-text">2.3.2. 安装补丁包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 设置环境变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E5%AE%89%E8%A3%85cuDNN"><span class="toc-number">3.</span> <span class="toc-text">3. 安装cuDNN</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E4%B8%8B%E8%BD%BDcuDNN"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. 下载cuDNN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%AE%89%E8%A3%85cuDNN"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. 安装cuDNN</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%A3%80%E9%AA%8CcuDNN%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. 检验cuDNN是否安装成功</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%AE%89%E8%A3%85Anaconda"><span class="toc-number">4.</span> <span class="toc-text">4. 安装Anaconda</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AE%89%E8%A3%85TensorFlow"><span class="toc-number">5.</span> <span class="toc-text">5. 安装TensorFlow</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E5%88%9B%E5%BB%BAconda%E7%8E%AF%E5%A2%83"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. 创建conda环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E6%BF%80%E6%B4%BB-conda-%E7%8E%AF%E5%A2%83"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. 激活 conda 环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E4%B8%8B%E8%BD%BDTensorFlow"><span class="toc-number">5.3.</span> <span class="toc-text">5.3. 下载TensorFlow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-conda%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85tensorflow-gpu%E7%89%88"><span class="toc-number">5.4.</span> <span class="toc-text">5.4. conda环境安装tensorflow-gpu版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E5%8D%B8%E8%BD%BDTensorFlow"><span class="toc-number">5.5.</span> <span class="toc-text">5.5. 卸载TensorFlow</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-%E6%B5%8B%E8%AF%95TensorFlow"><span class="toc-number">5.6.</span> <span class="toc-text">5.6. 测试TensorFlow</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-monodepth%E9%85%8D%E7%BD%AE"><span class="toc-number">6.</span> <span class="toc-text">6. monodepth配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E6%89%80%E9%81%87%E9%97%AE%E9%A2%98"><span class="toc-number">6.1.</span> <span class="toc-text">6.1. 所遇问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-modulenotfounderror-no-module-named-%E2%80%98matplotlib-path%E2%80%99%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1. modulenotfounderror: no module named ‘matplotlib._path’问题的解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-Sub-process-usr-bin-dpkg-returned-an-error-code-1-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2. Sub-process &#x2F;usr&#x2F;bin&#x2F;dpkg returned an error code (1)解决方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-Tensorflow-%EF%BC%9AUnsuccessful-TensorSliceReader-constructor-Failed-to-find-any-matching-files"><span class="toc-number">6.1.3.</span> <span class="toc-text">6.1.3. Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-4-scipy-misc-module-has-no-attribute-imread"><span class="toc-number">6.1.4.</span> <span class="toc-text">6.1.4. scipy.misc module has no attribute imread</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">7.</span> <span class="toc-text">7. 参考链接</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://ae01.alicdn.com/kf/HTB16qwvKCzqK1RjSZFHq6z3CpXab.jpg"></div><div class="author-info__name text-center">Xiao Hui</div><div class="author-info__description text-center">万古长空，一朝风月</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/the-sword">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">21</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">21</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">6</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://molunerfinn.com">Molunerfinn</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://api.ixiaowai.cn/gqapi/gqapi.php)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">XIAOHUI'S BLOG</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">ubuntu16.04 配置Tensorflow环境</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-07-08</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%BC%80%E5%8F%91%E6%80%BB%E7%BB%93/">开发总结</a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.5k</span><span class="post-meta__separator">|</span><span>阅读时长: 10 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>最近用到一个卷积神经网络<a target="_blank" rel="noopener" href="https://github.com/mrharicot/monodepth">monodepth</a>来预测图片深度，需要用到Tensorflow和cuda环境，记录一下整个过程，便于查找。</p>
<p><strong>注：</strong>文章一些图片来自互联网，见最后的参考链接。</p>
<h1 id="1-显卡驱动"><a href="#1-显卡驱动" class="headerlink" title="1. 显卡驱动"></a>1. 显卡驱动</h1><p>实验室这边硬件和驱动都是配置好的，故我就没加修改。需要的话可以自行搜索或者参考<a target="_blank" rel="noopener" href="http://www.cnblogs.com/xuliangxing/p/7569946.html">深度学习（TensorFlow）环境搭建：（二）Ubuntu16.04+1080Ti显卡驱动</a></p>
<h1 id="2-安装CUDA"><a href="#2-安装CUDA" class="headerlink" title="2. 安装CUDA"></a>2. 安装CUDA</h1><p>目的是充分利用英伟达GPU的并行计算。</p>
<h2 id="2-1-安装依赖库"><a href="#2-1-安装依赖库" class="headerlink" title="2.1. 安装依赖库"></a>2.1. 安装依赖库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-devlibgl1-mesa-glx libglu1　　#安装依赖库</span><br></pre></td></tr></table></figure>
<p>其中有一个没有安装成功，好像后面也没什么影响</p>
<h2 id="2-2-下载CUDA"><a href="#2-2-下载CUDA" class="headerlink" title="2.2. 下载CUDA"></a>2.2. 下载CUDA</h2><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/cuda-toolkit-archive">官网链接</a></p>
<p>我这里选择的是<code>CUDA Toolkit 8.0 GA2</code>，下载到<code>/home/user/Downloads</code>目录下</p>
<p><img src="http://wx4.sinaimg.cn/large/6e529308gy1ft2c1slfz6j20g80q0407.jpg" alt="下载CUDA"></p>
<h2 id="2-3-安装执行文件"><a href="#2-3-安装执行文件" class="headerlink" title="2.3. 安装执行文件"></a>2.3. 安装执行文件</h2><h3 id="2-3-1-安装基础文件"><a href="#2-3-1-安装基础文件" class="headerlink" title="2.3.1. 安装基础文件"></a>2.3.1. 安装基础文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_8.0.61_375.26_linux.run  #执行安装文件</span><br></pre></td></tr></table></figure>

<p><strong>注意：安装过程中会提示你进行一些确认操作，首先是接受服务条款，输入accept确认，然后会提示是否安装cuda tookit、cuda-example等，均输入Y进行确定。但请注意，当询问是否安装附带的驱动时，一定要选N！</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------</span><br><span class="line">Do you accept the previously read EULA?</span><br><span class="line">accept/decline/quit: accept</span><br><span class="line"></span><br><span class="line">Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 375.26?</span><br><span class="line">(y)es/(n)o/(q)uit: n</span><br><span class="line"></span><br><span class="line">Install the CUDA 8.0 Toolkit?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter Toolkit Location</span><br><span class="line"> [ default is /usr/local/cuda-8.0 ]: </span><br><span class="line"></span><br><span class="line">Do you want to install a symbolic link at /usr/local/cuda?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Install the CUDA 8.0 Samples?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter CUDA Samples Location</span><br><span class="line"> [ default is /home/zxh ]: </span><br><span class="line"></span><br><span class="line">Installing the CUDA Toolkit in /usr/local/cuda-8.0 ...</span><br><span class="line">Missing recommended library: libGLU.so</span><br><span class="line">Missing recommended library: libX11.so</span><br><span class="line">Missing recommended library: libXi.so</span><br><span class="line">Missing recommended library: libXmu.so</span><br><span class="line"></span><br><span class="line">Installing the CUDA Samples in /home/zxh ...</span><br><span class="line">Copying samples to /home/zxh/NVIDIA_CUDA-8.0_Samples now...</span><br><span class="line">Finished copying samples.</span><br><span class="line"></span><br><span class="line">===========</span><br><span class="line">= Summary =</span><br><span class="line">===========</span><br><span class="line"></span><br><span class="line">Driver:   Not Selected</span><br><span class="line">Toolkit:  Installed in /usr/local/cuda-8.0</span><br><span class="line">Samples:  Installed in /home/zxh, but missing recommended libraries</span><br><span class="line"></span><br><span class="line">Please make sure that</span><br><span class="line"> -   PATH includes /usr/local/cuda-8.0/bin</span><br><span class="line"> -   LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as root</span><br><span class="line"></span><br><span class="line">To uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-8.0/bin</span><br><span class="line"></span><br><span class="line">Please see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-8.0/doc/pdf for detailed information on setting up CUDA.</span><br><span class="line"></span><br><span class="line">***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required for CUDA 8.0 functionality to work.</span><br><span class="line">To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file:</span><br><span class="line">    sudo &lt;CudaInstaller&gt;.run -silent -driver</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-安装补丁包"><a href="#2-3-2-安装补丁包" class="headerlink" title="2.3.2. 安装补丁包"></a>2.3.2. 安装补丁包</h3><p><code>sudo sh cuda_8.0.61.2_linux.run</code></p>
<h2 id="2-4-设置环境变量"><a href="#2-4-设置环境变量" class="headerlink" title="2.4. 设置环境变量"></a>2.4. 设置环境变量</h2><ol>
<li>输入命令，编辑环境变量配置文件   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.bashrc </span><br></pre></td></tr></table></figure></li>
<li>在文本末端追加以下代码（按键“i”进行编辑操作），根据个人所需进行相关目录修改   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/cuda-8.0/bin:$PATH  </span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH</span><br><span class="line">export CUDA_HOME=/usr/local/cuda</span><br></pre></td></tr></table></figure></li>
<li>保存退出（按“!wq”），执行下面命令，使环境变量立刻生效   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#环境变量立即生效 </span><br><span class="line">sudo source ~/.bashrc  </span><br><span class="line">sudo ldconfig </span><br></pre></td></tr></table></figure></li>
<li>检查cuda是否配置正确 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc --version</span><br></pre></td></tr></table></figure>
 如图所示： <img src="http://wx1.sinaimg.cn/large/6e529308gy1ft2ckfx30aj20k504b74y.jpg" alt="检查cuda是否配置正确"></li>
</ol>
<h1 id="3-安装cuDNN"><a href="#3-安装cuDNN" class="headerlink" title="3. 安装cuDNN"></a>3. 安装cuDNN</h1><p>cuDNN是GPU加速计算深层神经网络的库。</p>
<h2 id="3-1-下载cuDNN"><a href="#3-1-下载cuDNN" class="headerlink" title="3.1. 下载cuDNN"></a>3.1. 下载cuDNN</h2><p><a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-archive">老版存档</a><br><a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-archive">最新版本官方链接</a>，都需要注册方可下载。</p>
<p><img src="http://ws1.sinaimg.cn/large/6e529308gy1ft2ct5yjs6j20o70g6aav.jpg" alt="下载cuDNN"></p>
<h2 id="3-2-安装cuDNN"><a href="#3-2-安装cuDNN" class="headerlink" title="3.2. 安装cuDNN"></a>3.2. 安装cuDNN</h2><p>安装cudnn比较简单，简单地说，就是复制几个文件：库文件和头文件。将cudnn的头文件复制到cuda安装路径的include路径下，将cudnn的库文件复制到cuda安装路径的lib64路径下。具体操作如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#解压文件</span><br><span class="line">tar -zxvf cudnn-8.0-linux-x64-v7.tgz</span><br><span class="line"></span><br><span class="line">#切换到刚刚解压出来的文件夹路径</span><br><span class="line">cd cuda </span><br><span class="line">#复制include里的头文件（记得转到include文件里执行下面命令）</span><br><span class="line">sudo cp /include/cudnn.h  /usr/local/cuda/include/</span><br><span class="line"></span><br><span class="line">#复制lib64下的lib文件到cuda安装路径下的lib64（记得转到lib64文件里执行下面命令）</span><br><span class="line">sudo cp lib*  /usr/local/cuda/lib64/</span><br><span class="line"></span><br><span class="line">#设置权限</span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h </span><br><span class="line">sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</span><br><span class="line"></span><br><span class="line">#======更新软连接======</span><br><span class="line">cd /usr/local/cuda/lib64/ </span><br><span class="line">sudo rm -rf libcudnn.so libcudnn.so.7   #删除原有动态文件，版本号注意变化，可在cudnn的lib64文件夹中查看   </span><br><span class="line">sudo ln -s libcudnn.so.7.0.5 libcudnn.so.7  #生成软衔接（注意这里要和自己下载的cudnn版本对应，可以在/usr/local/cuda/lib64下查看自己libcudnn的版本）</span><br><span class="line">sudo ln -s libcudnn.so.7 libcudnn.so #生成软链接</span><br><span class="line">sudo ldconfig -v #立刻生效</span><br></pre></td></tr></table></figure>

<p>最后我们看看验证安装cudnn后cuda是否依旧可用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc --version  # or nvcc -V </span><br></pre></td></tr></table></figure>
<h2 id="3-3-检验cuDNN是否安装成功"><a href="#3-3-检验cuDNN是否安装成功" class="headerlink" title="3.3. 检验cuDNN是否安装成功"></a>3.3. 检验cuDNN是否安装成功</h2><p>到目前为止，cuDNN已经安装完了，但是，是否成功安装，我们可以通过cuDNN sample测试一下(<a target="_blank" rel="noopener" href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a> 页面中找到对应的cudnn版本，里面有 cuDNN v5 Code Samples，点击该链接下载即可，版本可能不一样，下载最新的就行)。<br>下载完，转到解压出的目录下的mnistCUDNN，如图所示（图片来源见水印）：</p>
<p><img src="https://wx4.sinaimg.cn/large/6e529308gy1ft2cwn6hx4j20oq0g2whl.jpg" alt="解压的cuDNN目录"></p>
<p>通过下面命令，进行校验：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#运行cudnn-sample-v5</span><br><span class="line">tar –zxvf cudnn-sample-v5.tgz　　#解压压缩包</span><br><span class="line">cd mnistCUDNN　　#转到解压的mnistCUDNN目录下</span><br><span class="line">make　　#make 命令下</span><br><span class="line">./mnistCUDNN　　　#在mnistCUDNN目录下执行./mnistCUDNN</span><br><span class="line">#改程序运行成功，如果结果看到Test passed!说明cudnn安装成功。</span><br></pre></td></tr></table></figure>
<p>如果结果看到Test passed!说明cudnn安装成功:</p>
<p><img src="https://ws2.sinaimg.cn/large/6e529308gy1ft2cy2d4ppj20kc0c6772.jpg" alt="检验cuDNN是否安装成功"></p>
<h1 id="4-安装Anaconda"><a href="#4-安装Anaconda" class="headerlink" title="4. 安装Anaconda"></a>4. 安装Anaconda</h1><p>最开始是用pip安装python的一些库，但是一直出错，最后选择使用Anaconda进行配置。<br>Anaconda是python的一个科学计算发行版，内置了数百个python经常会使用的库，也包括许多做机器学习或数据挖掘的库，这些库很多是TensorFlow的依赖库。安装好Anaconda可以提供一个好的环境直接安装TensorFlow。</p>
<p>去<a target="_blank" rel="noopener" href="https://www.anaconda.com/download/">Anaconda官网</a>下载需要版本的Anaconda</p>
<p><img src="http://wx4.sinaimg.cn/large/6e529308gy1ft2d2ugwhpj20r60f2jsl.jpg" alt="选择对应版本"></p>
<p>下载完后执行如下命令<code>sudo bash Anaconda3-4.4.0-Linux-x86_64.sh</code></p>
<p><img src="https://wx4.sinaimg.cn/large/6e529308gy1ft2d50r51dj20k30c6wgr.jpg" alt="安装Anaconda"></p>
<p>安装anaconda，回车，阅读许可文件，选择<code>q</code>或者<code>Ctrl + C</code>退出许可，选择接受即可。<br>最后会询问是否把anaconda的bin添加到用户的环境变量中，选择yes。在终端输入python发现依然是系统自带的python版本，这是因为环境变量的更新还没有生效，命令行输入如下命令是安装的anaconda生效。如果conda –version没有找到任何信息，说明没有加入到环境变量没有，需要手动加入，如图所示：</p>
<p><img src="https://wx2.sinaimg.cn/large/6e529308gy1ft2d7tpj3vj20k90c640g.jpg" alt="配置Anaconda环境变量"></p>
<p>刷新环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile 或者 source ~/.bashrc #(全局的环境变量)</span><br></pre></td></tr></table></figure>
<h1 id="5-安装TensorFlow"><a href="#5-安装TensorFlow" class="headerlink" title="5. 安装TensorFlow"></a>5. 安装TensorFlow</h1><p>参考TensorFlow的<a target="_blank" rel="noopener" href="https://www.tensorflow.org/install/">官方安装教程</a>，官网提供的了 Pip, Docker, Virtualenv, Anaconda 或 源码编译的方法安装 TensorFlow，我们这里主要介绍以<code>Anaconda</code>安装。其他安装方式，大家可以到官方安装教程查看。</p>
<h2 id="5-1-创建conda环境"><a href="#5-1-创建conda环境" class="headerlink" title="5.1. 创建conda环境"></a>5.1. 创建conda环境</h2><p>创建一个名为tensorflow的conda环境Python 3.6，根据TensorFlow版本号，一定要设置Python版本号。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#Python 2.7</span><br><span class="line">conda create -n tensorflow python=2.7    #tensorflow是对应的环境名</span><br><span class="line"></span><br><span class="line">#Python 3.4</span><br><span class="line">conda create -n tensorflow python=3.4</span><br><span class="line"></span><br><span class="line">#Python 3.5</span><br><span class="line">conda create -n tensorflow python=3.5</span><br><span class="line"></span><br><span class="line">#Python 3.6</span><br><span class="line">conda create -n tensorflow python=3.6 　　#我下的TensorFlow对应的Python是3.6版本，所以选择这行</span><br></pre></td></tr></table></figure>

<h2 id="5-2-激活-conda-环境"><a href="#5-2-激活-conda-环境" class="headerlink" title="5.2. 激活 conda 环境"></a>5.2. 激活 conda 环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source activate tensorflow</span><br></pre></td></tr></table></figure>

<p>附conda环境的其他操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda env list    #列出所有环境</span><br><span class="line">source deactivate    #退出环境</span><br><span class="line">conda env remove -n tensorflow    #删除环境</span><br></pre></td></tr></table></figure>

<h2 id="5-3-下载TensorFlow"><a href="#5-3-下载TensorFlow" class="headerlink" title="5.3. 下载TensorFlow"></a>5.3. 下载TensorFlow</h2><p>可以使用<code>sudo pip3 install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl</code>在线安装，但是因为网络的原因，一直无法成功，所以选择下载到本地安装。</p>
<p>最新的已经是1.8版本，考虑到兼容性，我这里选择的是1.3版本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Python 2.7</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp27-none-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp27-none-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.4</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp34-cp34m-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp34-cp34m-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.5</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp35-cp35m-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GP:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp35-cp35m-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.6</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp36-cp36m-linux_x86_64.whl    #cpu版本</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl    #gpu版本，1.3.0是对应的tensorflow版本，cp36-cp36m是对应的python版本，这些参数根据需要自行更改后下载。</span><br></pre></td></tr></table></figure>

<h2 id="5-4-conda环境安装tensorflow-gpu版"><a href="#5-4-conda环境安装tensorflow-gpu版" class="headerlink" title="5.4. conda环境安装tensorflow-gpu版"></a>5.4. conda环境安装tensorflow-gpu版</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /Downloads    #切换到whl文件所在文件夹</span><br><span class="line">pip install --ignore-installed --upgrade tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl   #切记，不要用sudo pip，也不要用pip3，然后--ignore-installed --upgrade等参数也不能省略，否则会出错。</span><br></pre></td></tr></table></figure>
<p>如图所示，TensorFlow安装成功了（来源见水印）：</p>
<p><img src="https://ws4.sinaimg.cn/large/6e529308gy1ft2dsykvrmj20hx0kvtk9.jpg" alt="安装tensorflow-gpu"></p>
<p><strong>cpu版本安装同上</strong></p>
<p><strong>注：</strong>当你不用 TensorFlow 的时候，关闭环境<code>source deactivate tensorflow</code>，再次使用时按照5.2激活即可。</p>
<h2 id="5-5-卸载TensorFlow"><a href="#5-5-卸载TensorFlow" class="headerlink" title="5.5. 卸载TensorFlow"></a>5.5. 卸载TensorFlow</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip uninstall tensorflow 　　#Python2.7</span><br><span class="line">sudo pip3 uninstall tensorflow 　　#Python3.x</span><br></pre></td></tr></table></figure>
<h2 id="5-6-测试TensorFlow"><a href="#5-6-测试TensorFlow" class="headerlink" title="5.6. 测试TensorFlow"></a>5.6. 测试TensorFlow</h2><p>在<code>python</code>环境下输入一下命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">hello = tf.constant(&#x27;Hello, TensorFlow!&#x27;)</span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(hello)</span><br></pre></td></tr></table></figure>
<p>输出为<code>&#39;Hello, TensorFlow!&#39;</code>即代表安装成功。</p>
<h1 id="6-monodepth配置"><a href="#6-monodepth配置" class="headerlink" title="6. monodepth配置"></a>6. monodepth配置</h1><p>直接使用预训练的model预测深度图，参考官方教程即可。<br>结果所示：</p>
<p><img src="http://wx1.sinaimg.cn/large/6e529308gy1ft2eyecr8cj217v0b74j2.jpg" alt="monodepth结果"></p>
<h2 id="6-1-所遇问题"><a href="#6-1-所遇问题" class="headerlink" title="6.1. 所遇问题"></a>6.1. 所遇问题</h2><h3 id="6-1-1-modulenotfounderror-no-module-named-‘matplotlib-path’问题的解决"><a href="#6-1-1-modulenotfounderror-no-module-named-‘matplotlib-path’问题的解决" class="headerlink" title="6.1.1. modulenotfounderror: no module named ‘matplotlib._path’问题的解决"></a>6.1.1. modulenotfounderror: no module named ‘matplotlib._path’问题的解决</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install matplotlib</span><br></pre></td></tr></table></figure>
<h3 id="6-1-2-Sub-process-usr-bin-dpkg-returned-an-error-code-1-解决方法"><a href="#6-1-2-Sub-process-usr-bin-dpkg-returned-an-error-code-1-解决方法" class="headerlink" title="6.1.2. Sub-process /usr/bin/dpkg returned an error code (1)解决方法"></a>6.1.2. Sub-process /usr/bin/dpkg returned an error code (1)解决方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/dpkg        </span><br><span class="line">sudo mv info info.bak   #做备份 </span><br><span class="line">sudo mkdir info</span><br><span class="line">sudo apt-get install cmake --reinstall  #重新安装cmake包</span><br><span class="line">sudo rm -rf info</span><br><span class="line">sudo mv info.bak info       #还原info</span><br></pre></td></tr></table></figure>
<h3 id="6-1-3-Tensorflow-：Unsuccessful-TensorSliceReader-constructor-Failed-to-find-any-matching-files"><a href="#6-1-3-Tensorflow-：Unsuccessful-TensorSliceReader-constructor-Failed-to-find-any-matching-files" class="headerlink" title="6.1.3. Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files"></a>6.1.3. Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files</h3><p>文件路径问题，我将相对路径修改为绝对路径之后解决。</p>
<h3 id="6-1-4-scipy-misc-module-has-no-attribute-imread"><a href="#6-1-4-scipy-misc-module-has-no-attribute-imread" class="headerlink" title="6.1.4. scipy.misc module has no attribute imread"></a>6.1.4. scipy.misc module has no attribute imread</h3><p>需要安装Pillow<code>conda install Pillow</code></p>
<h1 id="7-参考链接"><a href="#7-参考链接" class="headerlink" title="7. 参考链接"></a>7. 参考链接</h1><ol>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xuliangxing/p/7575586.html">深度学习（TensorFlow）环境搭建：（三）Ubuntu16.04+CUDA8.0+cuDNN7+Anaconda4.4+Python3.6+TensorFlow1.3</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/36633807">Anaconda创建环境、删除环境、激活环境、退出环境</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaluo0051/article/details/78239417">modulenotfounderror: no module named ‘matplotlib._path’问题的解决</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/light_language/article/details/72461161">Sub-process /usr/bin/dpkg returned an error code (1)解决方法</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/jmh1996/article/details/77799842">Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/15345790/scipy-misc-module-has-no-attribute-imread">scipy.misc module has no attribute imread</a></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Xiao Hui</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://the-sword.github.io/posts/ee1401f5/">https://the-sword.github.io/posts/ee1401f5/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://the-sword.github.io">XIAOHUI'S BLOG</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Graphics/">Graphics</a></div><div class="social-share pull-right" data-disabled="google,facebook"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/posts/99bb2a9e/"><i class="fa fa-chevron-left">  </i><span>逍遥游 - 庄子</span></a></div><div class="next-post pull-right"><a href="/posts/c0c90fc2/"><span>git 删除错误提交的commit</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '3e8c1efea0f5b1d9cbc6',
  clientSecret: 'dd7d0373189cf1d1d9e6b6bf8fc66e42ef8913ae',
  repo: 'gittalk-comment',
  owner: 'the-sword',
  admin: 'the-sword',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN'
})
gitalk.render('gitalk-container')</script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2016 - 2021 By Xiao Hui</div><div class="framework-info"><span>驱动 - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/search/local-search.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="true"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":60,"height":120},"mobile":{"show":true},"log":false,"tagMode":false});</script></body></html>
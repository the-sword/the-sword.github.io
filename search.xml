<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>GAMES101: 现代计算机图形学入门-笔记</title>
      <link href="/posts/a086311e/"/>
      <url>/posts/a086311e/</url>
      
        <content type="html"><![CDATA[<p>笔记链接：<a href="https://mubu.com/doc/4JI70_e66BV">GAMES101: 现代计算机图形学入门-幕布链接</a></p><p>2020 年春季学期（在线直播），课程录像会在 <a href="https://www.bilibili.com/video/av90798049">Bilibili 网站</a> 更新。</p><p><img src="https://sites.cs.ucsb.edu/~lingqi/images/games101.png"></p><p>光栅化成像 [实时软阴影 (NVIDIA)]</p><p>几何表示 [Adobe Photoshop 中的钢笔工具]</p><p>光线传播理论 [光子映射 (Jensen)]</p><p>动画与模拟 [流体模拟 (Muller)]</p><p>本课程将全面而系统地介绍现代计算机图形学的四大组成部分：（1）光栅化成像，（2）几何表示，（3）光的传播理论，以及（4）动画与模拟。每个方面都会从基础原理出发讲解到实际应用，并介绍前沿的理论研究。通过本课程，你可以学习到计算机图形学背后的数学和物理知识，并锻炼实际的编程能力。</p><p>顾名思义，作为入门，本课程会尽可能的覆盖图形学的方方面面，把每一部分的基本概念都尽可能说清楚，让大家对计算机图形学有一个完整的、自上而下的全局把握。全局的理解很重要，学完本课程后，你会了解到图形学不等于 OpenGL，不等于光线追踪，而是一套生成整个虚拟世界的方法。从本课程的标题，大家还可以看到“现代”二字，也就是说，这门课所要给大家介绍的都是现代化的知识，也都是现代图形学工业界需要的图形学基础。</p><p>本课程与其它图形学教程还有一个重要的区别，那就是本课程不会讲授 OpenGL，甚至不会提及这个概念。本课程所讲授的内容是图形学背后的原理，而不是如何使用一个特定的图形学 API。在学习完这门课的时候，你一定有能力自己使用 OpenGL 写实时渲染的程序。另外，本课程并不涉及计算机视觉、图像视频处理、深度学习，也不会介绍游戏引擎与三维建模软件的使用。</p><p>具体课程内容请参见课程大纲。</p><h1 id="1-第一讲-什么是图形学"><a href="#1-第一讲-什么是图形学" class="headerlink" title="1. 第一讲-什么是图形学"></a>1. 第一讲-什么是图形学</h1><h2 id="1-1-是什么"><a href="#1-1-是什么" class="headerlink" title="1.1. 是什么"></a>1.1. 是什么</h2><h2 id="1-2-应用"><a href="#1-2-应用" class="headerlink" title="1.2. 应用"></a>1.2. 应用</h2><pre><code>- video game-画面好不好 在图形学里面就看亮不亮 全局光照- movie-特效（最常见的图形学应用）- Animations-渲染、模拟- design-模拟碰撞、曲面造型、渲染 ，工业设计和家装设计等- visualization- VR- digital illustration- simulation- GUI</code></pre><h2 id="1-3-为什么"><a href="#1-3-为什么" class="headerlink" title="1.3. 为什么"></a>1.3. 为什么</h2><p><img src="https://img.mubu.com/document_image/1a8b8727-0bae-41dd-a355-50fb7287fa37-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/1cfe6186-5bb4-409e-ba73-b4434ecd0a9e-1269577.jpg"></p><h2 id="1-4-Course-topic"><a href="#1-4-Course-topic" class="headerlink" title="1.4. Course topic"></a>1.4. Course topic</h2><h3 id="1-4-1-Rasterization"><a href="#1-4-1-Rasterization" class="headerlink" title="1.4.1. Rasterization"></a>1.4.1. Rasterization</h3><p><img src="https://img.mubu.com/document_image/5ce591a5-cc7e-40e6-bc1b-bf49a1da2018-1269577.jpg"></p><h3 id="1-4-2-Curves-and-meshes"><a href="#1-4-2-Curves-and-meshes" class="headerlink" title="1.4.2. Curves and meshes"></a>1.4.2. Curves and meshes</h3><p><img src="https://img.mubu.com/document_image/febee5a0-e338-47f3-bd0e-f350f72fcc29-1269577.jpg"></p><h3 id="1-4-3-Ray-tracing"><a href="#1-4-3-Ray-tracing" class="headerlink" title="1.4.3. Ray tracing"></a>1.4.3. Ray tracing</h3><p><img src="https://img.mubu.com/document_image/4ac902d5-d33a-448c-b294-86ceb4a40a64-1269577.jpg"></p><h3 id="1-4-4-Animation-Simulation"><a href="#1-4-4-Animation-Simulation" class="headerlink" title="1.4.4. Animation/Simulation"></a>1.4.4. Animation/Simulation</h3><p><img src="https://img.mubu.com/document_image/f0c95c9b-9bea-48b4-86df-98132eec0658-1269577.jpg"></p><h2 id="1-5-图形学与视觉的区别"><a href="#1-5-图形学与视觉的区别" class="headerlink" title="1.5. 图形学与视觉的区别"></a>1.5. 图形学与视觉的区别</h2><p><img src="https://img.mubu.com/document_image/e2f114d0-e399-4b16-9518-96595e158c96-1269577.jpg"></p><h1 id="2-第二讲-向量与线性代数"><a href="#2-第二讲-向量与线性代数" class="headerlink" title="2. 第二讲-向量与线性代数"></a>2. 第二讲-向量与线性代数</h1><h2 id="2-1-图形学的依赖"><a href="#2-1-图形学的依赖" class="headerlink" title="2.1. 图形学的依赖"></a>2.1. 图形学的依赖</h2><pre><code>- 基础数学、基础物理、信号处理、数值分析、美学</code></pre><h2 id="2-2-向量"><a href="#2-2-向量" class="headerlink" title="2.2. 向量"></a>2.2. 向量</h2><h3 id="2-2-1-向量的归一化"><a href="#2-2-1-向量的归一化" class="headerlink" title="2.2.1. 向量的归一化"></a>2.2.1. 向量的归一化</h3><h3 id="2-2-2-和"><a href="#2-2-2-和" class="headerlink" title="2.2.2. 和"></a>2.2.2. 和</h3><h3 id="2-2-3-cartesian-coordinates"><a href="#2-2-3-cartesian-coordinates" class="headerlink" title="2.2.3. cartesian coordinates"></a>2.2.3. cartesian coordinates</h3><p>便于表示及计算长度，图形学中默认向量为列向量或用转置写成行向量<br><img src="https://img.mubu.com/document_image/355997ea-d91c-4efb-81a2-3323456770cc-1269577.jpg"></p><h3 id="2-2-4-乘"><a href="#2-2-4-乘" class="headerlink" title="2.2.4. 乘"></a>2.2.4. 乘</h3><h4 id="2-2-4-1-点乘"><a href="#2-2-4-1-点乘" class="headerlink" title="2.2.4.1. 点乘"></a>2.2.4.1. 点乘</h4><pre><code>    - 结果为标量，在图形学中可以用来计算向量之间的夹角</code></pre><p> <img src="https://img.mubu.com/document_image/6267814f-a1e0-42b1-9ba8-601f7af723af-1269577.jpg"></p><pre><code>   - 满足交换律、分配律、结合律    - 笛卡尔坐标系下的点乘</code></pre><p><img src="https://img.mubu.com/document_image/d42658e3-40c2-4703-ad35-7b70e070ef1c-1269577.jpg"></p><pre><code>    - 在图形学中的应用      - 在图形学中可以用来计算向量之间的夹角      - 一个向量在另一个向量上的投影</code></pre><h4 id="2-2-4-2-Cross-product"><a href="#2-2-4-2-Cross-product" class="headerlink" title="2.2.4.2. Cross product"></a>2.2.4.2. Cross product</h4><pre><code>    - 升维    - 在构建坐标系中很有用 ，a x b得到的向量 垂直于a、b    - 应用      - 判定左和右      - 判断内和外</code></pre><p><img src="https://img.mubu.com/document_image/52d65ccf-045b-4765-a483-1b2865e670c3-1269577.jpg"></p><pre><code>  - 正交坐标系</code></pre><h2 id="2-3-矩阵"><a href="#2-3-矩阵" class="headerlink" title="2.3. 矩阵"></a>2.3. 矩阵</h2><pre><code>- 结合律 分配律- 向量为特殊的m*1矩阵</code></pre><h1 id="3-第三讲-transform"><a href="#3-第三讲-transform" class="headerlink" title="3. 第三讲-transform"></a>3. 第三讲-transform</h1><h2 id="3-1-why"><a href="#3-1-why" class="headerlink" title="3.1. why"></a>3.1. why</h2><pre><code>- modeling- viewing</code></pre><h2 id="3-2-2d变换"><a href="#3-2-2d变换" class="headerlink" title="3.2. 2d变换"></a>3.2. 2d变换</h2><h3 id="3-2-1-scale缩放（均匀与非均匀缩放）"><a href="#3-2-1-scale缩放（均匀与非均匀缩放）" class="headerlink" title="3.2.1. scale缩放（均匀与非均匀缩放）"></a>3.2.1. scale缩放（均匀与非均匀缩放）</h3><h3 id="3-2-2-reflection-镜像操作"><a href="#3-2-2-reflection-镜像操作" class="headerlink" title="3.2.2. reflection 镜像操作"></a>3.2.2. reflection 镜像操作</h3><h3 id="3-2-3-shear-matrix-切片矩阵"><a href="#3-2-3-shear-matrix-切片矩阵" class="headerlink" title="3.2.3. shear matrix 切片矩阵"></a>3.2.3. shear matrix 切片矩阵</h3><p><img src="https://img.mubu.com/document_image/7a0a7bbc-831c-400c-88c0-0f233360e0d0-1269577.jpg"></p><h3 id="3-2-4-rotation-matrix"><a href="#3-2-4-rotation-matrix" class="headerlink" title="3.2.4. rotation matrix"></a>3.2.4. rotation matrix</h3><h3 id="3-2-5-linear-transform-matrices"><a href="#3-2-5-linear-transform-matrices" class="headerlink" title="3.2.5. linear transform = matrices"></a>3.2.5. linear transform = matrices</h3><p><img src="https://img.mubu.com/document_image/3dd49da0-554d-4f10-becf-ec2de8f27d0a-1269577.jpg"></p><h2 id="3-3-homogeneous-coordinates"><a href="#3-3-homogeneous-coordinates" class="headerlink" title="3.3. homogeneous coordinates"></a>3.3. homogeneous coordinates</h2><h3 id="3-3-1-why"><a href="#3-3-1-why" class="headerlink" title="3.3.1. why"></a>3.3.1. why</h3><h4 id="对于translation变换-发现无法用矩阵的形式表示，必须加上平移的操作，因为平移不是线性变换-但是我们又不想将其当作是一种特殊的变换，因此寻求一种新的统一的方式"><a href="#对于translation变换-发现无法用矩阵的形式表示，必须加上平移的操作，因为平移不是线性变换-但是我们又不想将其当作是一种特殊的变换，因此寻求一种新的统一的方式" class="headerlink" title="对于translation变换 发现无法用矩阵的形式表示，必须加上平移的操作，因为平移不是线性变换. 但是我们又不想将其当作是一种特殊的变换，因此寻求一种新的统一的方式"></a>对于translation变换 发现无法用矩阵的形式表示，必须加上平移的操作，因为平移不是线性变换. 但是我们又不想将其当作是一种特殊的变换，因此寻求一种新的统一的方式</h4><p><img src="https://img.mubu.com/document_image/10e78d85-7ed9-45e2-8bfa-4701b05f0fe3-1269577.jpg"></p><h3 id="3-3-2-solution："><a href="#3-3-2-solution：" class="headerlink" title="3.3.2. solution："></a>3.3.2. solution：</h3><p>homogeneous coordinates</p><p><img src="https://img.mubu.com/document_image/2f5108da-45f8-477d-b5af-b31724a6821f-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/820293ad-563b-4cb1-a914-64844f523dee-1269577.jpg"></p><p>2d point 和 2d vector区别对待 是考虑到向量的平移不变性point + point 为这两个点的中点</p><h3 id="3-3-3-affine-transformation"><a href="#3-3-3-affine-transformation" class="headerlink" title="3.3.3. affine transformation"></a>3.3.3. affine transformation</h3><p><img src="https://img.mubu.com/document_image/ceeede9a-570a-438d-bcac-e4c85ce8ddad-1269577.jpg"></p><p>任何放射变换都可以用齐次坐标表示只有在二维仿射变换下最后一行才为001，其他有不同的情况</p><h2 id="3-4-inverse-transform"><a href="#3-4-inverse-transform" class="headerlink" title="3.4. inverse transform"></a>3.4. inverse transform</h2><h2 id="3-5-composite-transform变换的组合"><a href="#3-5-composite-transform变换的组合" class="headerlink" title="3.5. composite transform变换的组合"></a>3.5. composite transform变换的组合</h2><p>变换的顺序是很重要的，例如先平移后旋转、先旋转后平移是不一样</p><p><img src="https://img.mubu.com/document_image/5752ae82-583c-40a5-8730-bacdbe9c3242-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/bddfb937-8f3a-4866-a97d-61bf3afbaeb9-1269577.jpg"></p><h2 id="3-6-decomposing-complex-transform"><a href="#3-6-decomposing-complex-transform" class="headerlink" title="3.6. decomposing complex transform"></a>3.6. decomposing complex transform</h2><p><img src="https://img.mubu.com/document_image/6510d372-10a2-4854-9947-23f55c1b5c85-1269577.jpg"></p><h2 id="3-7-3D-transformations（包括部分第四讲内容）"><a href="#3-7-3D-transformations（包括部分第四讲内容）" class="headerlink" title="3.7. 3D transformations（包括部分第四讲内容）"></a>3.7. 3D transformations（包括部分第四讲内容）</h2><h3 id="3-7-1-三维的变换也是先应用线性变换后应用平移变换"><a href="#3-7-1-三维的变换也是先应用线性变换后应用平移变换" class="headerlink" title="3.7.1. 三维的变换也是先应用线性变换后应用平移变换"></a>3.7.1. 三维的变换也是先应用线性变换后应用平移变换</h3><p><img src="https://img.mubu.com/document_image/4e70545f-9751-4d98-aa95-634c30d89dbb-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/25563ae6-174d-4cda-89ef-85aade52b6cc-1269577.jpg"></p><h3 id="3-7-2-三维的缩放和平移-旋转"><a href="#3-7-2-三维的缩放和平移-旋转" class="headerlink" title="3.7.2. 三维的缩放和平移 旋转"></a>3.7.2. 三维的缩放和平移 旋转</h3><h4 id="3-7-2-1-缩放和平移"><a href="#3-7-2-1-缩放和平移" class="headerlink" title="3.7.2.1. 缩放和平移"></a>3.7.2.1. 缩放和平移</h4><p><img src="https://img.mubu.com/document_image/91404e78-c139-4e55-a456-d90504e3c8de-1269577.jpg"></p><h4 id="3-7-2-2-3D旋转"><a href="#3-7-2-2-3D旋转" class="headerlink" title="3.7.2.2. 3D旋转"></a>3.7.2.2. 3D旋转</h4><p>注意观察绕y轴的旋转矩阵 、循环对称的性质。这是因为二位平面定义时，逆时针实际是在三维从z正向看，因此3维绕y旋转，逆时针实际是z向x转，但是旋转矩阵的行列对应关系是x向z转，取逆（转置）就得到了</p><p><img src="https://img.mubu.com/document_image/d45240f4-590f-47fc-b21d-0d0ea4810d5c-1269577.jpg"></p><h5 id="3-7-2-2-1-欧拉角"><a href="#3-7-2-2-1-欧拉角" class="headerlink" title="3.7.2.2.1. 欧拉角"></a>3.7.2.2.1. 欧拉角</h5><p>用欧拉角的形式来将任意旋转矩阵分解为绕xyz轴的旋转组合</p><p><img src="https://img.mubu.com/document_image/ec08d822-8368-4b23-9319-68b337ab584e-1269577.jpg"></p><h5 id="3-7-2-2-2-Rodrigues’-rotation-formula"><a href="#3-7-2-2-2-Rodrigues’-rotation-formula" class="headerlink" title="3.7.2.2.2. Rodrigues’ rotation formula"></a>3.7.2.2.2. Rodrigues’ rotation formula</h5><ol><li><p>绕任意轴，先将轴的起点平移到原点 旋转，在平移回去 2.N，在计算向量叉乘的时候，用矩阵的表示方式<br><img src="https://img.mubu.com/document_image/f87263b9-f838-45d5-a829-f102749074c1-1269577.jpg"></p></li><li><p>证明</p></li><li><p>四元数目的是为了方便旋转的差值计算</p></li></ol><h2 id="3-8-补充内容"><a href="#3-8-补充内容" class="headerlink" title="3.8. 补充内容"></a>3.8. 补充内容</h2><p><img src="https://img.mubu.com/document_image/e19b5ac9-fa4f-43e2-909c-5d26c14a45a9-1269577.jpg"></p><p>旋转矩阵的逆等于旋转矩阵的转置，我们逆等于它的转置的矩阵称之为正交矩阵</p><h1 id="4-第四讲-transformation-Cont"><a href="#4-第四讲-transformation-Cont" class="headerlink" title="4. 第四讲-transformation Cont."></a>4. 第四讲-transformation Cont.</h1><h2 id="4-1-viewing-transformation"><a href="#4-1-viewing-transformation" class="headerlink" title="4.1. viewing transformation"></a>4.1. viewing transformation</h2><h3 id="4-1-1-view-camera-transformation"><a href="#4-1-1-view-camera-transformation" class="headerlink" title="4.1.1. view / camera transformation"></a>4.1.1. view / camera transformation</h3><h4 id="4-1-1-1-MVP"><a href="#4-1-1-1-MVP" class="headerlink" title="4.1.1.1. MVP"></a>4.1.1.1. MVP</h4><p><img src="https://img.mubu.com/document_image/80e88580-5e1a-4537-b76b-a68940b27d5f-1269577.jpg"></p><h4 id="4-1-1-2-相机的定义，如何做view-transformation"><a href="#4-1-1-2-相机的定义，如何做view-transformation" class="headerlink" title="4.1.1.2. 相机的定义，如何做view transformation"></a>4.1.1.2. 相机的定义，如何做view transformation</h4><p><img src="https://img.mubu.com/document_image/38c54e73-cdb0-4587-a4c6-2eec09915534-1269577.jpg"></p><h4 id="4-1-1-3-key-observation"><a href="#4-1-1-3-key-observation" class="headerlink" title="4.1.1.3. key observation"></a>4.1.1.3. key observation</h4><p>当相机与物体之间不存在相对运动时候，照片是一样的，因此可以定义一个坐标系。简化操作，这里是右手坐标系</p><p><img src="https://img.mubu.com/document_image/9466dfdb-ad97-48c7-89cb-7735d740186f-1269577.jpg"></p><h4 id="4-1-1-4-将任意位置摆放的相机转为标准的摆放"><a href="#4-1-1-4-将任意位置摆放的相机转为标准的摆放" class="headerlink" title="4.1.1.4. 将任意位置摆放的相机转为标准的摆放"></a>4.1.1.4. 将任意位置摆放的相机转为标准的摆放</h4><p><img src="https://img.mubu.com/document_image/98f6e313-5e25-4313-a13e-48465bbfa133-1269577.jpg"></p><h4 id="4-1-1-5-数学表达"><a href="#4-1-1-5-数学表达" class="headerlink" title="4.1.1.5. 数学表达"></a>4.1.1.5. 数学表达</h4><p><img src="https://img.mubu.com/document_image/e52bbd32-0202-4f5f-865e-95126a1ee728-1269577.jpg"></p><pre><code>    - 这里是先平移再旋转    - 假如将任意轴旋转到某个标准轴，如001，会很难，那么将001旋转到任意轴，会简单很多，因此这里用了逆的概念    - 旋转矩阵是正交矩阵，因此它的逆等于它的转置</code></pre><h4 id="4-1-1-6-summary"><a href="#4-1-1-6-summary" class="headerlink" title="4.1.1.6. summary"></a>4.1.1.6. summary</h4><p>这里物体随着相机一块运动</p><p><img src="https://img.mubu.com/document_image/1e71eb73-8753-4173-9861-76855a0fab2b-1269577.jpg"></p><h3 id="4-1-2-projection-transformation"><a href="#4-1-2-projection-transformation" class="headerlink" title="4.1.2. projection transformation"></a>4.1.2. projection transformation</h3><h4 id="4-1-2-1-二者差别"><a href="#4-1-2-1-二者差别" class="headerlink" title="4.1.2.1. 二者差别"></a>4.1.2.1. 二者差别</h4><p><img src="https://img.mubu.com/document_image/2396b55d-f5f2-4d79-8b7f-8cb1b1179605-1269577.jpg"></p><h4 id="4-1-2-2-orthographic-projection"><a href="#4-1-2-2-orthographic-projection" class="headerlink" title="4.1.2.2. orthographic projection"></a>4.1.2.2. orthographic projection</h4><h5 id="4-1-2-2-1-简单的理解"><a href="#4-1-2-2-1-简单的理解" class="headerlink" title="4.1.2.2.1. 简单的理解"></a>4.1.2.2.1. 简单的理解</h5><p><img src="https://img.mubu.com/document_image/9594fc38-b413-48b4-8714-0b0e310a362c-1269577.jpg"></p><h5 id="4-1-2-2-2-方向的通用定义"><a href="#4-1-2-2-2-方向的通用定义" class="headerlink" title="4.1.2.2.2. 方向的通用定义"></a>4.1.2.2.2. 方向的通用定义</h5><p>这里f(far)&lt;n(near)，因为我们是看向-z方向，使得near和far并不直观，这也就是在OpenGL的API中使用左手坐标系的原因，看起来更直观。</p><p><img src="https://img.mubu.com/document_image/dac29c36-4cd7-41be-b934-883abbf6fd71-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/9661458c-4728-4f93-87f3-60aa4e6ec7a7-1269577.jpg"></p><h5 id="4-1-2-2-3-transformation-matrix。这里2是因为缩放到（-1，1）之间，长度为2"><a href="#4-1-2-2-3-transformation-matrix。这里2是因为缩放到（-1，1）之间，长度为2" class="headerlink" title="4.1.2.2.3. transformation matrix。这里2是因为缩放到（-1，1）之间，长度为2"></a>4.1.2.2.3. transformation matrix。这里2是因为缩放到（-1，1）之间，长度为2</h5><p><img src="https://img.mubu.com/document_image/0d788042-683b-4337-bee0-38c7a12a7663-1269577.jpg"></p><h4 id="4-1-2-3-perspective-projection"><a href="#4-1-2-3-perspective-projection" class="headerlink" title="4.1.2.3. perspective projection"></a>4.1.2.3. perspective projection</h4><p>近大远小，图形学中应用最广泛的投影，平行线会相较于一点</p><h5 id="4-1-2-3-1-回忆知识点！！！"><a href="#4-1-2-3-1-回忆知识点！！！" class="headerlink" title="4.1.2.3.1. 回忆知识点！！！"></a>4.1.2.3.1. 回忆知识点！！！</h5><p><img src="https://img.mubu.com/document_image/87a35fd3-ee6b-4103-b19e-7148c15a3557-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/5b4a420c-0fd5-48c8-b811-813a192b479d-1269577.jpg"></p><h5 id="4-1-2-3-2-怎么做透视投影，拆分思路？规定近平面四个点不变，原平面z值不变"><a href="#4-1-2-3-2-怎么做透视投影，拆分思路？规定近平面四个点不变，原平面z值不变" class="headerlink" title="4.1.2.3.2. 怎么做透视投影，拆分思路？规定近平面四个点不变，原平面z值不变"></a>4.1.2.3.2. 怎么做透视投影，拆分思路？规定近平面四个点不变，原平面z值不变</h5><p><img src="https://img.mubu.com/document_image/77e38933-c62c-4780-b380-9b29904b679f-1269577.jpg"></p><pre><code>      - 将投影squish为正视。注意这里用到了上面说的两个不变条件</code></pre><p><img src="https://img.mubu.com/document_image/e7bdaddf-6de8-4204-951e-2c46584d7251-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/cb0b023d-e2c5-4a72-935b-7d7736b2024e-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/9e834fef-fb26-4e03-9e3a-371553e8780f-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/4c5e2463-677b-4325-a588-61ae49f1e1ad-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/11f81969-397a-45ac-b723-341f84b1f412-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/c3a5b1aa-0943-4d10-b25e-2c540b875bfe-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/a5e05ae1-a91e-4f23-9ebc-189bc79413ac-1269577.jpg"></p><pre><code>      - Do orthographic projection (Mortho) to finish</code></pre><p><img src="https://img.mubu.com/document_image/6eaf924c-6df8-4962-ac65-f49fd65894a1-1269577.jpg"></p><pre><code>    - 对于near和far平面 他们的z成什么样一种变化，变小 大还是不变，根据计算的投影矩阵得到是变小</code></pre><h1 id="5-第五讲-光栅化rasterization-1（triangles）"><a href="#5-第五讲-光栅化rasterization-1（triangles）" class="headerlink" title="5. 第五讲-光栅化rasterization 1（triangles）"></a>5. 第五讲-光栅化rasterization 1（triangles）</h1><h2 id="5-1-透视投影"><a href="#5-1-透视投影" class="headerlink" title="5.1. 透视投影"></a>5.1. 透视投影</h2><h3 id="5-1-1-近平面：长宽比-垂直可视角度"><a href="#5-1-1-近平面：长宽比-垂直可视角度" class="headerlink" title="5.1.1. 近平面：长宽比/垂直可视角度"></a>5.1.1. 近平面：长宽比/垂直可视角度</h3><p><img src="https://img.mubu.com/document_image/0a9a0049-359e-4ca0-9706-2e8b0a041979-1269577.jpg"></p><h3 id="5-1-2-fovY与l、r、b、t关系"><a href="#5-1-2-fovY与l、r、b、t关系" class="headerlink" title="5.1.2. fovY与l、r、b、t关系"></a>5.1.2. fovY与l、r、b、t关系</h3><p><img src="https://img.mubu.com/document_image/1192fd5a-2002-4e83-9195-de6ef2ac347e-1269577.jpg"></p><h3 id="5-1-3-MVP之后-需要将canonical-cube-to-screen-光栅化"><a href="#5-1-3-MVP之后-需要将canonical-cube-to-screen-光栅化" class="headerlink" title="5.1.3. MVP之后 需要将canonical cube to screen-光栅化"></a>5.1.3. MVP之后 需要将canonical cube to screen-光栅化</h3><h4 id="5-1-3-1-定义屏幕空间"><a href="#5-1-3-1-定义屏幕空间" class="headerlink" title="5.1.3.1. 定义屏幕空间"></a>5.1.3.1. 定义屏幕空间</h4><h4 id="5-1-3-2-变换到xy平面"><a href="#5-1-3-2-变换到xy平面" class="headerlink" title="5.1.3.2. 变换到xy平面"></a>5.1.3.2. 变换到xy平面</h4><p><img src="https://img.mubu.com/document_image/8b23a7e1-bb41-4d3c-b7f4-d10245959ed8-1269577.jpg"></p><h4 id="5-1-3-3-rasterizing-triangles-into-pixels"><a href="#5-1-3-3-rasterizing-triangles-into-pixels" class="headerlink" title="5.1.3.3. rasterizing triangles into pixels"></a>5.1.3.3. rasterizing triangles into pixels</h4><h5 id="5-1-3-3-1-显示设备"><a href="#5-1-3-3-1-显示设备" class="headerlink" title="5.1.3.3.1. 显示设备"></a>5.1.3.3.1. 显示设备</h5><p><img src="https://img.mubu.com/document_image/fdab3b9d-dc80-4bbf-b81d-52ba3ee7c804-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/6d476f21-9de4-40a9-816d-871cd3c1d952-1269577.jpg"></p><h5 id="5-1-3-3-2-Rasterization-Drawing-to-Raster-Displays"><a href="#5-1-3-3-2-Rasterization-Drawing-to-Raster-Displays" class="headerlink" title="5.1.3.3.2. Rasterization: Drawing to Raster Displays"></a>5.1.3.3.2. Rasterization: Drawing to Raster Displays</h5><ol><li>mesh<pre><code>- Polygon Meshes多边形网格- triangle meshes-why</code></pre></li></ol><p><img src="https://img.mubu.com/document_image/3709acb4-3594-440f-b752-74c2bd9582f3-1269577.jpg"></p><ol start="2"><li> triangle 与屏幕像素之间的关系</li></ol><p><img src="https://img.mubu.com/document_image/d5fe1729-4bc9-41ed-b6dc-d02bd4b3a35a-1269577.jpg"></p><pre><code>        - a simple approach：sampling          - Rasterization As 2D Sampling</code></pre><p>  <img src="https://img.mubu.com/document_image/1e663176-cb1d-4d68-aac6-e57662d674b1-1269577.jpg"></p><pre><code>          - Sample If Each Pixel Center Is Inside Triangle</code></pre><p>  <img src="https://img.mubu.com/document_image/606614f0-7de0-4958-aee7-40ddb475f052-1269577.jpg"></p><pre><code>          - 要注意的是，像素是i，j表示，但是像素的中心是在i+0.5,j+0.5的</code></pre><p>  <img src="https://img.mubu.com/document_image/7d834056-5fcd-49d6-8b7a-03af7a4af79e-1269577.jpg"></p><pre><code>          - 接下就是判断点是否在三角形内部：某一顺逆时针方向上的向量叉乘</code></pre><p>  <img src="https://img.mubu.com/document_image/8cc5c94c-efb5-4d9a-a195-49652d86110f-1269577.jpg"></p><pre><code>          - 这样全部的便利，似乎很慢，因此改进型            - 包围盒AABB</code></pre><p><img src="https://img.mubu.com/document_image/42b21f55-0d0f-45dc-8a87-0e50992fa56e-1269577.jpg"></p><pre><code>            - Incremental Triangle Traversal (Faster?)</code></pre><p><img src="https://img.mubu.com/document_image/cd25c50e-9049-4f26-9281-74ca815fff37-1269577.jpg"></p><h5 id="5-1-3-3-3-Rasterization-on-Real-Displays"><a href="#5-1-3-3-3-Rasterization-on-Real-Displays" class="headerlink" title="5.1.3.3.3. Rasterization on Real Displays"></a>5.1.3.3.3. Rasterization on Real Displays</h5><pre><code>      - Jaggies锯齿问题 走样</code></pre><p><img src="https://img.mubu.com/document_image/4b6931e1-9458-4756-9774-ecfa5f22964a-1269577.jpg"></p><h1 id="6-第六讲-光栅化2（反走样和z-缓冲Antialiasing-and-z-buffering）"><a href="#6-第六讲-光栅化2（反走样和z-缓冲Antialiasing-and-z-buffering）" class="headerlink" title="6. 第六讲-光栅化2（反走样和z-缓冲Antialiasing and z-buffering）"></a>6. 第六讲-光栅化2（反走样和z-缓冲Antialiasing and z-buffering）</h1><h2 id="6-1-Antialiasing"><a href="#6-1-Antialiasing" class="headerlink" title="6.1. Antialiasing"></a>6.1. Antialiasing</h2><h2 id="6-2-Sampling-theory"><a href="#6-2-Sampling-theory" class="headerlink" title="6.2. Sampling theory"></a>6.2. Sampling theory</h2><h3 id="6-2-1-回忆内容"><a href="#6-2-1-回忆内容" class="headerlink" title="6.2.1. 回忆内容"></a>6.2.1. 回忆内容</h3><p>像素中心是否在三角形内部，但是这样得到的结果存在锯齿，学名走样</p><h3 id="6-2-2-采样理论"><a href="#6-2-2-采样理论" class="headerlink" title="6.2.2. 采样理论"></a>6.2.2. 采样理论</h3><h4 id="6-2-2-1-采样在图形学中广泛存在，采样可以发生在不同的位置、时间"><a href="#6-2-2-1-采样在图形学中广泛存在，采样可以发生在不同的位置、时间" class="headerlink" title="6.2.2.1. 采样在图形学中广泛存在，采样可以发生在不同的位置、时间"></a>6.2.2.1. 采样在图形学中广泛存在，采样可以发生在不同的位置、时间</h4><p><img src="https://img.mubu.com/document_image/630afaa1-a2b0-433a-af7e-f08ab8916ce9-1269577.jpg"></p><h5 id="6-2-2-1-1-采样产生的问题也是广泛存在的"><a href="#6-2-2-1-1-采样产生的问题也是广泛存在的" class="headerlink" title="6.2.2.1.1. 采样产生的问题也是广泛存在的"></a>6.2.2.1.1. 采样产生的问题也是广泛存在的</h5><ol><li>锯齿</li></ol><p><img src="https://img.mubu.com/document_image/be7f45b9-c4d4-40d1-9a41-9642ce9a4c84-1269577.jpg"></p><ol start="2"><li>图片中的摩尔纹</li></ol><p><img src="https://img.mubu.com/document_image/73fc5a98-59b8-41ae-8a84-0930b1138689-1269577.jpg"></p><ol start="3"><li>Wagon Wheel Illusion (False Motion)</li></ol><p><img src="https://img.mubu.com/document_image/a503c57f-c1e3-40d7-af01-ef5d661010bb-1269577.jpg"></p><ol start="4"><li>总结</li></ol><p><img src="https://img.mubu.com/document_image/e2d78d4f-3093-4b5e-8e95-ceace80333be-1269577.jpg"></p><h4 id="6-2-2-2-Antialiasing-Idea-Blurring-Pre-Filtering-Before-Sampling，即先模糊再采样，反之不行"><a href="#6-2-2-2-Antialiasing-Idea-Blurring-Pre-Filtering-Before-Sampling，即先模糊再采样，反之不行" class="headerlink" title="6.2.2.2. Antialiasing Idea: Blurring (Pre-Filtering) Before Sampling，即先模糊再采样，反之不行"></a>6.2.2.2. Antialiasing Idea: Blurring (Pre-Filtering) Before Sampling，即先模糊再采样，反之不行</h4><h5 id="6-2-2-2-1-反采样原理"><a href="#6-2-2-2-1-反采样原理" class="headerlink" title="6.2.2.2.1. 反采样原理"></a>6.2.2.2.1. 反采样原理</h5><ol><li>Rasterization: Point Sampling in Space</li></ol><p><img src="https://img.mubu.com/document_image/cea84e1e-efe0-43d3-818d-39c29720b89e-1269577.jpg"></p><ol start="2"><li>Rasterization: Antialiased Sampling</li></ol><p><img src="https://img.mubu.com/document_image/17cd8abd-16e5-4162-8284-98e80a5ad501-1269577.jpg"></p><ol start="3"><li>二者对比</li></ol><p><img src="https://img.mubu.com/document_image/40f9ac87-9b06-4ecf-ad9e-a2b309d03339-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/a36273a9-9b99-482e-adc4-81c970055108-1269577.jpg"></p><h5 id="6-2-2-2-2-为什么欠采样会引入走样-为什么-pre-filtering-then-sampling-can-do-antialiasing"><a href="#6-2-2-2-2-为什么欠采样会引入走样-为什么-pre-filtering-then-sampling-can-do-antialiasing" class="headerlink" title="6.2.2.2.2. 为什么欠采样会引入走样 / 为什么 pre-filtering then sampling can do antialiasing"></a>6.2.2.2.2. 为什么欠采样会引入走样 / 为什么 pre-filtering then sampling can do antialiasing</h5><ol><li><p>相关知识：</p><pre><code>    - 频域Frequency Domain          - 频率f 周期T</code></pre></li></ol><p>  <img src="https://img.mubu.com/document_image/327eec5d-f4f7-40c8-8e09-80378821682a-1269577.jpg"></p><pre><code>          - Fourier Transform（任一周期性函数都是正弦/余弦函数得线性组合）</code></pre><p>  <img src="https://img.mubu.com/document_image/c695d60b-3a5d-4852-8400-08afd4a2c343-1269577.jpg"></p><pre><code>          - Fourier Transform Decomposes A Signal Into Frequencies傅里叶变换将信号分解成频率，注意时域与频域之间得变换</code></pre><p>  <img src="https://img.mubu.com/document_image/5feab733-3bfc-4618-ab40-4b56ad00d08b-1269577.jpg"></p><pre><code>          - Higher Frequencies Need Faster Sampling</code></pre><p>  <img src="https://img.mubu.com/document_image/5a7e5fd5-6e2b-4d1a-a2bb-749434c49fc9-1269577.jpg"></p><pre><code>          - Undersampling Creates Frequency Aliases（两种不同频率得函数 得到了同一个采样结果，这就是走样）</code></pre><p>  <img src="https://img.mubu.com/document_image/65dd7d20-c934-427e-a32f-984f434c98ec-1269577.jpg"></p><pre><code>        - Filtering（= Getting rid of certain frequency contents）          - Visualizing Image Frequency Content （注意观察）时域图片经过傅里叶变换得到频域图</code></pre><p>  <img src="https://img.mubu.com/document_image/26c09729-87f4-4833-9700-dcbc5ba1eec7-1269577.jpg"></p><pre><code>            - 观察一：频谱图包含低频（中心定义为最低频区域）、高频信息（周围定义为高频），也就是从中心到周围越来越高，包含的信息用亮度来表示，这个图中就是说图片中低频信息很多            - 观察二：水平/竖直高亮条：在分析信号得时候，认为信号是周期性重复出现得，而对于照片来讲，我们将其水平和竖直周期性延拓，那么边界得位置会发生剧烈得变化，产生高频信息          - Filter Out Low Frequencies Only (Edges)，只保留得边界信息</code></pre><p>  <img src="https://img.mubu.com/document_image/6f205f5e-bd96-4705-8b47-5970c455d2d5-1269577.jpg"></p><pre><code>          - Filter Out High Frequencies (Blur) 低通之后丢失边界信息 变得模糊</code></pre><p>  <img src="https://img.mubu.com/document_image/682d5b34-1f62-4d2d-9ec1-8222775a16ef-1269577.jpg"></p><pre><code>          - 带通滤波            - Filter Out Low and High Frequencies</code></pre><p><img src="https://img.mubu.com/document_image/668501f5-abc5-4f0b-8168-6c46ea5d8db6-1269577.jpg"></p><pre><code>            - Filter Out Low and High Frequencies</code></pre><p><img src="https://img.mubu.com/document_image/580c4942-5bb3-4c75-b220-31dea20c85ad-1269577.jpg"></p><pre><code>        - Filtering = Convolution(= Averaging)          - Convolution 滑动窗口</code></pre><p>  <img src="https://img.mubu.com/document_image/1f3853fe-cd88-4127-95c7-384e27c18925-1269577.jpg"></p><pre><code>          - Convolution Theorem时域卷积=频域乘积，时域乘积=频域卷积。两种时域卷积得方式</code></pre><p>  <img src="https://img.mubu.com/document_image/e1a57d39-fee7-41c8-92b9-970d82dd322b-1269577.jpg"></p><p>  <img src="https://img.mubu.com/document_image/e32f5e99-8262-4f06-bb6e-99d9ae68fd68-1269577.jpg"></p><pre><code>          - Box Filter</code></pre><p>  <img src="https://img.mubu.com/document_image/a34d6721-d4fc-4da1-a683-b8051973fc23-1269577.jpg"></p><pre><code>          - Box Function = “Low Pass” Filter</code></pre><p>  <img src="https://img.mubu.com/document_image/e556fec4-50d3-4093-a1c1-4e322416f708-1269577.jpg"></p><pre><code>          - Wider Filter Kernel = Lower Frequencies 更大得卷积核 更模糊</code></pre><p>  <img src="https://img.mubu.com/document_image/479e5727-134b-4f72-8277-56b09e26d0cf-1269577.jpg"></p><pre><code>        - Sampling = Repeating Frequency Contents          - Sampling = Repeating Frequency Contents</code></pre><p>  <img src="https://img.mubu.com/document_image/2e55c6eb-440b-459b-a0f3-802f3e359930-1269577.jpg"></p><pre><code>            - 用频率得角度去看采样，同时时域采样等于频域得周期性延拓          - Aliasing = Mixed Frequency Contents</code></pre><p>  <img src="https://img.mubu.com/document_image/df90cef2-3744-4c8e-a268-1c85a28b6ff2-1269577.jpg"></p><pre><code>            - 对于冲激函数，频域间隔等于时域间隔得倒数，因此越稀疏，采样间隔越宽，再频域则越窄，导致走样</code></pre><h5 id="6-2-2-2-3-Antialiasing-in-practice"><a href="#6-2-2-2-3-Antialiasing-in-practice" class="headerlink" title="6.2.2.2.3. Antialiasing in practice"></a>6.2.2.2.3. Antialiasing in practice</h5><ol><li>How Can We Reduce Aliasing Error?</li></ol><p><img src="https://img.mubu.com/document_image/2e36a849-ab90-42b9-8341-314d308808be-1269577.jpg"></p><ol start="2"><li>Antialiasing = Limiting, then repeating</li></ol><p><img src="https://img.mubu.com/document_image/35980651-75d2-456a-939f-7499abaf8c06-1269577.jpg"></p><ol start="3"><li>Regular Sampling</li></ol><p><img src="https://img.mubu.com/document_image/f6d41012-b24d-4df8-b497-93df0ed9ae96-1269577.jpg"></p><ol start="4"><li>Antialiased Sampling</li></ol><p><img src="https://img.mubu.com/document_image/9139c13f-46c3-4aea-8a4f-0ec500709549-1269577.jpg"></p><ol start="5"><li>A Practical Pre-Filter</li></ol><p><img src="https://img.mubu.com/document_image/a88e5687-942f-4278-9e79-1b163e8580fd-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/02f19ffd-5cff-4c47-8295-ebe8d806cf27-1269577.jpg"></p><h5 id="6-2-2-2-4-Antialiasing-By-Supersampling-MSAA"><a href="#6-2-2-2-4-Antialiasing-By-Supersampling-MSAA" class="headerlink" title="6.2.2.2.4. Antialiasing By Supersampling(MSAA)"></a>6.2.2.2.4. Antialiasing By Supersampling(MSAA)</h5><ol><li>Point Sampling: One Sample Per Pixel</li></ol><p><img src="https://img.mubu.com/document_image/a6cee472-eea9-487b-a13b-63c3fcaa6929-1269577.jpg"></p><ol start="2"><li>Supersampling</li></ol><p><img src="https://img.mubu.com/document_image/54545c11-a33d-45bf-a985-e4c625e00c0d-1269577.jpg"></p><pre><code>        - step1：Take NxN samples in each pixel</code></pre><p><img src="https://img.mubu.com/document_image/cd292507-ee0c-4933-938c-d15c05855676-1269577.jpg"></p><pre><code>        - Step 2：Average the NxN samples “inside” each pixel.</code></pre><p><img src="https://img.mubu.com/document_image/eb2c0437-867b-47ca-b59f-973a981214f0-1269577.jpg"></p><pre><code>        - Result</code></pre><p><img src="https://img.mubu.com/document_image/71425276-0958-4b13-ad12-6b120c5962fc-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/5492e046-5900-492e-b869-441a4484bccf-1269577.jpg"></p><pre><code>        - attention：这只是对反走样得近似，第一步是对信号得模糊，supersample只是得到近似三角形得覆盖，并没有增加分辨率</code></pre><h4 id="6-2-2-3-总结："><a href="#6-2-2-3-总结：" class="headerlink" title="6.2.2.3. 总结："></a>6.2.2.3. 总结：</h4><p><img src="https://img.mubu.com/document_image/41437745-f1ae-4069-9d28-73a761e5bdb6-1269577.jpg"></p><h2 id="6-3-visibility-occlusion（第七讲视频）–-Z-Buffering"><a href="#6-3-visibility-occlusion（第七讲视频）–-Z-Buffering" class="headerlink" title="6.3. visibility / occlusion（第七讲视频）– Z-Buffering"></a>6.3. visibility / occlusion（第七讲视频）– Z-Buffering</h2><h3 id="6-3-1-Painter’s-Algorithm画家算法（特指油画）"><a href="#6-3-1-Painter’s-Algorithm画家算法（特指油画）" class="headerlink" title="6.3.1. Painter’s Algorithm画家算法（特指油画）"></a>6.3.1. Painter’s Algorithm画家算法（特指油画）</h3><p><img src="https://img.mubu.com/document_image/4db64559-cfc5-4312-ab31-3a6cafedcc9c-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/79d7fb43-0ae4-4082-832f-f56c57713e0a-1269577.jpg"></p><h3 id="6-3-2-Z-buffer-注意这里的frame-buffer-和depth-buffer的作用。并且有一个假设z是正值；是对像素的排序，而不是对三角形的远近排序"><a href="#6-3-2-Z-buffer-注意这里的frame-buffer-和depth-buffer的作用。并且有一个假设z是正值；是对像素的排序，而不是对三角形的远近排序" class="headerlink" title="6.3.2. Z-buffer 注意这里的frame buffer 和depth buffer的作用。并且有一个假设z是正值；是对像素的排序，而不是对三角形的远近排序"></a>6.3.2. Z-buffer 注意这里的frame buffer 和depth buffer的作用。并且有一个假设z是正值；是对像素的排序，而不是对三角形的远近排序</h3><p><img src="https://img.mubu.com/document_image/d4a319e9-2c5f-4c45-808a-e3846759ff8d-1269577.jpg"></p><h3 id="6-3-3-z-buffer的例子"><a href="#6-3-3-z-buffer的例子" class="headerlink" title="6.3.3. z-buffer的例子"></a>6.3.3. z-buffer的例子</h3><p><img src="https://img.mubu.com/document_image/4bd25235-7fd4-4aae-a370-42e897ac38ad-1269577.jpg"></p><h3 id="6-3-4-z-buffer算法；每轮绘制都有深度计算的更新"><a href="#6-3-4-z-buffer算法；每轮绘制都有深度计算的更新" class="headerlink" title="6.3.4. z-buffer算法；每轮绘制都有深度计算的更新"></a>6.3.4. z-buffer算法；每轮绘制都有深度计算的更新</h3><p><img src="https://img.mubu.com/document_image/6a062b6c-03d5-4528-ac55-ac0ffe15fa55-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/8260429e-64fa-4175-8409-644f81d6cdf0-1269577.jpg"></p><h3 id="6-3-5-z-buffer复杂度"><a href="#6-3-5-z-buffer复杂度" class="headerlink" title="6.3.5. z-buffer复杂度"></a>6.3.5. z-buffer复杂度</h3><h4 id="6-3-5-1-Complexity"><a href="#6-3-5-1-Complexity" class="headerlink" title="6.3.5.1. Complexity"></a>6.3.5.1. Complexity</h4><ol><li>O(n) for n triangles (assuming constant coverage)</li><li>How is it possible to sort n triangles in linear time?: 因为每次只比较记录一次最小值，不用排序</li></ol><h4 id="6-3-5-2-Drawing-triangles-in-different-orders-：与顺序无关"><a href="#6-3-5-2-Drawing-triangles-in-different-orders-：与顺序无关" class="headerlink" title="6.3.5.2. Drawing triangles in different orders? ：与顺序无关"></a>6.3.5.2. Drawing triangles in different orders? ：与顺序无关</h4><h4 id="6-3-5-3-Most-important-visibility-algorithm"><a href="#6-3-5-3-Most-important-visibility-algorithm" class="headerlink" title="6.3.5.3. Most important visibility algorithm"></a>6.3.5.3. Most important visibility algorithm</h4><p>Implemented in hardware for all GPUs</p><h4 id="6-3-5-4-在MSAA中-需要对每一个supersample得到的采样点都做Z-buffer"><a href="#6-3-5-4-在MSAA中-需要对每一个supersample得到的采样点都做Z-buffer" class="headerlink" title="6.3.5.4. 在MSAA中 需要对每一个supersample得到的采样点都做Z-buffer"></a>6.3.5.4. 在MSAA中 需要对每一个supersample得到的采样点都做Z-buffer</h4><h1 id="7-第七讲-Shading-1-Illumination-Shading-and-Graphics-Pipeline"><a href="#7-第七讲-Shading-1-Illumination-Shading-and-Graphics-Pipeline" class="headerlink" title="7. 第七讲-Shading 1 (Illumination, Shading and Graphics Pipeline)"></a>7. 第七讲-Shading 1 (Illumination, Shading and Graphics Pipeline)</h1><h2 id="7-1-前面只是总结，引子"><a href="#7-1-前面只是总结，引子" class="headerlink" title="7.1. 前面只是总结，引子"></a>7.1. 前面只是总结，引子</h2><p><img src="https://img.mubu.com/document_image/8167f879-08cc-4d2b-8bca-4bd39de14132-1269577.jpg"></p><h2 id="7-2-Shading：definition"><a href="#7-2-Shading：definition" class="headerlink" title="7.2. Shading：definition"></a>7.2. Shading：definition</h2><h3 id="7-2-1-The-darkening（明暗）-or-coloring-of-an-illustration-or-diagram-with-parallel-lines-or-a-block-of-color"><a href="#7-2-1-The-darkening（明暗）-or-coloring-of-an-illustration-or-diagram-with-parallel-lines-or-a-block-of-color" class="headerlink" title="7.2.1. The darkening（明暗） or coloring of an illustration or diagram with parallel lines or a block of color."></a>7.2.1. The darkening（明暗） or coloring of an illustration or diagram with parallel lines or a block of color.</h3><h3 id="7-2-2-The-process-of-applying-a-material-to-an-object"><a href="#7-2-2-The-process-of-applying-a-material-to-an-object" class="headerlink" title="7.2.2. The process of applying a material to an object."></a>7.2.2. The process of applying a material to an object.</h3><h2 id="7-3-A-Simple-Shading-Model-Blinn-Phong-Reflectance-Model"><a href="#7-3-A-Simple-Shading-Model-Blinn-Phong-Reflectance-Model" class="headerlink" title="7.3. A Simple Shading Model (Blinn-Phong Reflectance Model)"></a>7.3. A Simple Shading Model (Blinn-Phong Reflectance Model)</h2><h3 id="7-3-1-Perceptual-Observations高光，漫反射，环境光"><a href="#7-3-1-Perceptual-Observations高光，漫反射，环境光" class="headerlink" title="7.3.1. Perceptual Observations高光，漫反射，环境光"></a>7.3.1. Perceptual Observations高光，漫反射，环境光</h3><p><img src="https://img.mubu.com/document_image/a4e9f0a9-0209-4f92-a9ec-a5fafc13816e-1269577.jpg"></p><h3 id="7-3-2-Shading-is-Local很关键的一个点，局部局部"><a href="#7-3-2-Shading-is-Local很关键的一个点，局部局部" class="headerlink" title="7.3.2. Shading is Local很关键的一个点，局部局部"></a>7.3.2. Shading is Local很关键的一个点，局部局部</h3><p><img src="https://img.mubu.com/document_image/3bd43e40-8951-4e27-8e0b-0d85e46c5e3d-1269577.jpg"></p><p>为什么l向量不从光源出发？不引入光源结构的前提下，只从着色点出发，简化模型，但是这也存在局限性，如右图</p><h3 id="7-3-3-Diffuse-Reflection"><a href="#7-3-3-Diffuse-Reflection" class="headerlink" title="7.3.3. Diffuse Reflection"></a>7.3.3. Diffuse Reflection</h3><h4 id="7-3-3-1-Light-is-scattered-uniformly-in-all-directions均匀性"><a href="#7-3-3-1-Light-is-scattered-uniformly-in-all-directions均匀性" class="headerlink" title="7.3.3.1. Light is scattered uniformly in all directions均匀性"></a>7.3.3.1. Light is scattered uniformly in all directions均匀性</h4><p><img src="https://img.mubu.com/document_image/4e760a13-4459-48c9-abaf-6b9e823bdb64-1269577.jpg"></p><h4 id="7-3-3-2-But-how-much-light-energy-is-received-考虑的是单位面积接收到的能量，其实四季的变化的原因就在于获取不同季节内获得的太阳能量的多少。"><a href="#7-3-3-2-But-how-much-light-energy-is-received-考虑的是单位面积接收到的能量，其实四季的变化的原因就在于获取不同季节内获得的太阳能量的多少。" class="headerlink" title="7.3.3.2. But how much light (energy) is received? 考虑的是单位面积接收到的能量，其实四季的变化的原因就在于获取不同季节内获得的太阳能量的多少。"></a>7.3.3.2. But how much light (energy) is received? 考虑的是单位面积接收到的能量，其实四季的变化的原因就在于获取不同季节内获得的太阳能量的多少。</h4><p><img src="https://img.mubu.com/document_image/863ff036-356d-4c22-887b-2aa0384097e4-1269577.jpg"></p><h4 id="7-3-3-3-Light-Falloff，同时也要考虑到光的衰减。点光源某一时刻集中于一个球壳上，考虑到能量守恒，必然导致越大的球壳上-某一点越衰减。"><a href="#7-3-3-3-Light-Falloff，同时也要考虑到光的衰减。点光源某一时刻集中于一个球壳上，考虑到能量守恒，必然导致越大的球壳上-某一点越衰减。" class="headerlink" title="7.3.3.3. Light Falloff，同时也要考虑到光的衰减。点光源某一时刻集中于一个球壳上，考虑到能量守恒，必然导致越大的球壳上 某一点越衰减。"></a>7.3.3.3. Light Falloff，同时也要考虑到光的衰减。点光源某一时刻集中于一个球壳上，考虑到能量守恒，必然导致越大的球壳上 某一点越衰减。</h4><p><img src="https://img.mubu.com/document_image/61eab0f4-9863-418d-96e6-a2b588edcfc1-1269577.jpg"></p><h4 id="7-3-3-4-Lambertian-Diffuse-Shading：kd漫反射能量吸收系数，与视角向量无关"><a href="#7-3-3-4-Lambertian-Diffuse-Shading：kd漫反射能量吸收系数，与视角向量无关" class="headerlink" title="7.3.3.4. Lambertian (Diffuse) Shading：kd漫反射能量吸收系数，与视角向量无关"></a>7.3.3.4. Lambertian (Diffuse) Shading：kd漫反射能量吸收系数，与视角向量无关</h4><p><img src="https://img.mubu.com/document_image/6b72f883-a298-48c5-bcfb-061774023d8f-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/82702f20-1ea7-41e0-a1d9-5cd5afa64f24-1269577.jpg"></p><h4 id="7-3-3-5-问题：不考虑观测点到着色点的距离吗？"><a href="#7-3-3-5-问题：不考虑观测点到着色点的距离吗？" class="headerlink" title="7.3.3.5. 问题：不考虑观测点到着色点的距离吗？"></a>7.3.3.5. 问题：不考虑观测点到着色点的距离吗？</h4><p>这个地方需要用到辐射亮度学的知识，先这样!!!</p><h1 id="8-第八讲-Shading-2-Shading-Pipeline-and-Texture-Mapping"><a href="#8-第八讲-Shading-2-Shading-Pipeline-and-Texture-Mapping" class="headerlink" title="8. 第八讲-Shading 2 (Shading, Pipeline and Texture Mapping)"></a>8. 第八讲-Shading 2 (Shading, Pipeline and Texture Mapping)</h1><h2 id="8-1-Blinn-Phong-reflectance-model"><a href="#8-1-Blinn-Phong-reflectance-model" class="headerlink" title="8.1. Blinn-Phong reflectance model"></a>8.1. Blinn-Phong reflectance model</h2><h3 id="8-1-1-Specular"><a href="#8-1-1-Specular" class="headerlink" title="8.1.1. Specular"></a>8.1.1. Specular</h3><h4 id="8-1-1-1-Intensity-depends-on-view-direction"><a href="#8-1-1-1-Intensity-depends-on-view-direction" class="headerlink" title="8.1.1.1. Intensity depends on view direction"></a>8.1.1.1. Intensity depends on view direction</h4><p><img src="https://img.mubu.com/document_image/f6c9d68b-d0ee-43a5-91f3-b7f2bd5f6eae-1269577.jpg"></p><h4 id="8-1-1-2-V和R之间的关系不便求解，因此提出用半程向量来衡量，同时类比漫反射的式子"><a href="#8-1-1-2-V和R之间的关系不便求解，因此提出用半程向量来衡量，同时类比漫反射的式子" class="headerlink" title="8.1.1.2. V和R之间的关系不便求解，因此提出用半程向量来衡量，同时类比漫反射的式子"></a>8.1.1.2. V和R之间的关系不便求解，因此提出用半程向量来衡量，同时类比漫反射的式子</h4><p><img src="https://img.mubu.com/document_image/2d86aa2e-3618-4358-85f4-fd341a2f8930-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/7be2bc33-f859-4946-9dc4-a9961e704d41-1269577.jpg"></p><h4 id="8-1-1-3-效果图"><a href="#8-1-1-3-效果图" class="headerlink" title="8.1.1.3. 效果图"></a>8.1.1.3. 效果图</h4><p><img src="https://img.mubu.com/document_image/23174045-1d26-4bb1-9930-77eeeab926da-1269577.jpg"></p><h3 id="8-1-2-ambient-terms"><a href="#8-1-2-ambient-terms" class="headerlink" title="8.1.2. ambient terms"></a>8.1.2. ambient terms</h3><h4 id="8-1-2-1-Shading-that-does-not-depend-on-anything，任一着色点接收环境光的相同的"><a href="#8-1-2-1-Shading-that-does-not-depend-on-anything，任一着色点接收环境光的相同的" class="headerlink" title="8.1.2.1. Shading that does not depend on anything，任一着色点接收环境光的相同的"></a>8.1.2.1. Shading that does not depend on anything，任一着色点接收环境光的相同的</h4><p><img src="https://img.mubu.com/document_image/d110c175-a0c7-421c-ab4e-77256e5163e6-1269577.jpg"></p><h3 id="8-1-3-问题：磨砂材质是否完全没有高光？不一定，需要看磨砂的程度"><a href="#8-1-3-问题：磨砂材质是否完全没有高光？不一定，需要看磨砂的程度" class="headerlink" title="8.1.3. 问题：磨砂材质是否完全没有高光？不一定，需要看磨砂的程度"></a>8.1.3. 问题：磨砂材质是否完全没有高光？不一定，需要看磨砂的程度</h3><h2 id="8-2-Shading-frequencies"><a href="#8-2-Shading-frequencies" class="headerlink" title="8.2. Shading frequencies"></a>8.2. Shading frequencies</h2><h3 id="8-2-1-What-caused-the-shading-difference"><a href="#8-2-1-What-caused-the-shading-difference" class="headerlink" title="8.2.1. What caused the shading difference?"></a>8.2.1. What caused the shading difference?</h3><p><img src="https://img.mubu.com/document_image/4cbdaad8-dd44-4f11-a1cd-d40fb36c3a1e-1269577.jpg"></p><h4 id="8-2-1-1-左：Shade-each-triangle-flat-shading"><a href="#8-2-1-1-左：Shade-each-triangle-flat-shading" class="headerlink" title="8.2.1.1. 左：Shade each triangle (flat shading)"></a>8.2.1.1. 左：Shade each triangle (flat shading)</h4><p>对一个三角形或者四边形面片，用面法向着一个色</p><p><img src="https://img.mubu.com/document_image/32fb2b23-c32d-40e7-84e4-b5f8356ac6ae-1269577.jpg"></p><h4 id="8-2-1-2-中：Shade-each-vertex-Gouraud-shading"><a href="#8-2-1-2-中：Shade-each-vertex-Gouraud-shading" class="headerlink" title="8.2.1.2. 中：Shade each vertex (Gouraud shading)"></a>8.2.1.2. 中：Shade each vertex (Gouraud shading)</h4><p>对面片的顶点法向着色，在三角形内部着色</p><p><img src="https://img.mubu.com/document_image/6a34fc48-c82b-4512-959b-40439804269a-1269577.jpg"></p><h4 id="8-2-1-3-右：Shade-each-pixel-Phong-shading"><a href="#8-2-1-3-右：Shade-each-pixel-Phong-shading" class="headerlink" title="8.2.1.3. 右：Shade each pixel (Phong shading)"></a>8.2.1.3. 右：Shade each pixel (Phong shading)</h4><p>每个像素着色，这里注意着色频率和着色模型的区别</p><p><img src="https://img.mubu.com/document_image/eba5de57-b731-4e67-bdfc-26cc804d382a-1269577.jpg"></p><h3 id="8-2-2-Shading-Frequency-Face-Vertex-or-Pixel：很难说那个更好，在面足够多时，也可以达到很好的着色效果"><a href="#8-2-2-Shading-Frequency-Face-Vertex-or-Pixel：很难说那个更好，在面足够多时，也可以达到很好的着色效果" class="headerlink" title="8.2.2. Shading Frequency: Face, Vertex or Pixel：很难说那个更好，在面足够多时，也可以达到很好的着色效果"></a>8.2.2. Shading Frequency: Face, Vertex or Pixel：很难说那个更好，在面足够多时，也可以达到很好的着色效果</h3><p><img src="https://img.mubu.com/document_image/5c636d60-3586-4dfa-9be9-ee2992fc72dc-1269577.jpg"></p><h3 id="8-2-3-Defining-Per-Vertex-Normal-Vectors（跟之前项目采样之后的操作很相似）"><a href="#8-2-3-Defining-Per-Vertex-Normal-Vectors（跟之前项目采样之后的操作很相似）" class="headerlink" title="8.2.3. Defining Per-Vertex Normal Vectors（跟之前项目采样之后的操作很相似）"></a>8.2.3. Defining Per-Vertex Normal Vectors（跟之前项目采样之后的操作很相似）</h3><p><img src="https://img.mubu.com/document_image/070c7410-34b1-4b0b-bdbb-4d7927f4a181-1269577.jpg"></p><h3 id="8-2-4-Defining-Per-Pixel-Normal-Vectors"><a href="#8-2-4-Defining-Per-Pixel-Normal-Vectors" class="headerlink" title="8.2.4. Defining Per-Pixel Normal Vectors"></a>8.2.4. Defining Per-Pixel Normal Vectors</h3><p><img src="https://img.mubu.com/document_image/e476004f-f312-434c-8077-2f0738cd6a37-1269577.jpg"></p><h2 id="8-3-Graphics-pipeline"><a href="#8-3-Graphics-pipeline" class="headerlink" title="8.3. Graphics pipeline"></a>8.3. Graphics pipeline</h2><h3 id="8-3-1-Graphics-Pipeline"><a href="#8-3-1-Graphics-Pipeline" class="headerlink" title="8.3.1. Graphics Pipeline"></a>8.3.1. Graphics Pipeline</h3><p><img src="https://img.mubu.com/document_image/e01ba619-494a-4201-9f86-46651f76c435-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/922a1762-722a-4abd-b5af-4dd44ff81742-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/12902246-e6aa-4dfa-903e-c816d4d6463e-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/92f5122a-8fe6-475c-afe5-9d246d0f64a7-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/76a6e38a-ccfe-4515-846d-6a7f49e03357-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/0fcd62e6-4662-4309-aa89-5834052d24d8-1269577.jpg"></p><h3 id="8-3-2-shading和texture-maping这块最关键的是顶点着色（vertex-shader，vertex-processing阶段）还是像素着色（fragment-shader，fragement-processing阶段）"><a href="#8-3-2-shading和texture-maping这块最关键的是顶点着色（vertex-shader，vertex-processing阶段）还是像素着色（fragment-shader，fragement-processing阶段）" class="headerlink" title="8.3.2. shading和texture maping这块最关键的是顶点着色（vertex shader，vertex processing阶段）还是像素着色（fragment shader，fragement processing阶段）"></a>8.3.2. shading和texture maping这块最关键的是顶点着色（vertex shader，vertex processing阶段）还是像素着色（fragment shader，fragement processing阶段）</h3><h3 id="8-3-3-Shader-Programs"><a href="#8-3-3-Shader-Programs" class="headerlink" title="8.3.3. Shader Programs"></a>8.3.3. Shader Programs</h3><p><img src="https://img.mubu.com/document_image/d8e31741-5546-40b9-9f70-301e69b723b2-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/13b4780f-c85c-4698-ae91-c514fb696fb6-1269577.jpg"></p><ol><li>Program vertex and fragment processing stages</li><li>Describe operation on a single vertex (or fragment)</li></ol><h2 id="8-4-Texture-Mapping纹理映射"><a href="#8-4-Texture-Mapping纹理映射" class="headerlink" title="8.4. Texture Mapping纹理映射"></a>8.4. Texture Mapping纹理映射</h2><h3 id="8-4-1-Different-Colors-at-Different-Places-观察球和地板，共用一套相同的反射模型，但是可以呈现不同的图案颜色，在物体不同位置定义不同属性，这就引出纹理映射"><a href="#8-4-1-Different-Colors-at-Different-Places-观察球和地板，共用一套相同的反射模型，但是可以呈现不同的图案颜色，在物体不同位置定义不同属性，这就引出纹理映射" class="headerlink" title="8.4.1. Different Colors at Different Places?观察球和地板，共用一套相同的反射模型，但是可以呈现不同的图案颜色，在物体不同位置定义不同属性，这就引出纹理映射"></a>8.4.1. Different Colors at Different Places?观察球和地板，共用一套相同的反射模型，但是可以呈现不同的图案颜色，在物体不同位置定义不同属性，这就引出纹理映射</h3><p><img src="https://img.mubu.com/document_image/468940c4-63a3-4383-944b-15a83f04ea6b-1269577.jpg"></p><h3 id="8-4-2-surfaces-are-2D任意一个三维物体表面其实是二维的。定义在哪？定义在物体表面，简历表面和一张图的对应关系"><a href="#8-4-2-surfaces-are-2D任意一个三维物体表面其实是二维的。定义在哪？定义在物体表面，简历表面和一张图的对应关系" class="headerlink" title="8.4.2. surfaces are 2D任意一个三维物体表面其实是二维的。定义在哪？定义在物体表面，简历表面和一张图的对应关系"></a>8.4.2. surfaces are 2D任意一个三维物体表面其实是二维的。定义在哪？定义在物体表面，简历表面和一张图的对应关系</h3><p><img src="https://img.mubu.com/document_image/3509af90-1dd0-464b-99f9-9963b531f62f-1269577.jpg"></p><h4 id="8-4-2-1-Texture-Applied-to-Surface"><a href="#8-4-2-1-Texture-Applied-to-Surface" class="headerlink" title="8.4.2.1. Texture Applied to Surface"></a>8.4.2.1. Texture Applied to Surface</h4><p><img src="https://img.mubu.com/document_image/73699934-d31a-40bd-95f2-ff74dc07798b-1269577.jpg"></p><h4 id="8-4-2-2-Visualization-of-Texture-Coordinates"><a href="#8-4-2-2-Visualization-of-Texture-Coordinates" class="headerlink" title="8.4.2.2. Visualization of Texture Coordinates"></a>8.4.2.2. Visualization of Texture Coordinates</h4><p><img src="https://img.mubu.com/document_image/b7ae13a0-b576-4f81-a3ca-4bc0c7a1e2e9-1269577.jpg"></p><h4 id="8-4-2-3-Texture-Applied-to-Surface"><a href="#8-4-2-3-Texture-Applied-to-Surface" class="headerlink" title="8.4.2.3. Texture Applied to Surface"></a>8.4.2.3. Texture Applied to Surface</h4><p><img src="https://img.mubu.com/document_image/2c405a60-8685-4fcf-bc31-808d7b8acae3-1269577.jpg"></p><h4 id="8-4-2-4-Textures-applied-to-surfaces"><a href="#8-4-2-4-Textures-applied-to-surfaces" class="headerlink" title="8.4.2.4. Textures applied to surfaces"></a>8.4.2.4. Textures applied to surfaces</h4><p><img src="https://img.mubu.com/document_image/e4c0bf19-25f9-448c-8fe5-7b2b7d041b61-1269577.jpg"></p><h4 id="8-4-2-5-Visualization-of-texture-coordinates"><a href="#8-4-2-5-Visualization-of-texture-coordinates" class="headerlink" title="8.4.2.5. Visualization of texture coordinates"></a>8.4.2.5. Visualization of texture coordinates</h4><p><img src="https://img.mubu.com/document_image/da19ff92-fb9d-486e-a4b7-e3b67c8f7a8a-1269577.jpg"></p><h4 id="8-4-2-6-Textures-can-be-used-multiple-times"><a href="#8-4-2-6-Textures-can-be-used-multiple-times" class="headerlink" title="8.4.2.6. Textures can be used multiple times!"></a>8.4.2.6. Textures can be used multiple times!</h4><p><img src="https://img.mubu.com/document_image/1486b733-4fc0-464a-a8f9-ff8893f3d97b-1269577.jpg"></p><h1 id="9-第九讲-Shading-3-Texture-Mapping-cont"><a href="#9-第九讲-Shading-3-Texture-Mapping-cont" class="headerlink" title="9. 第九讲-Shading 3 (Texture Mapping cont.)"></a>9. 第九讲-Shading 3 (Texture Mapping cont.)</h1><h2 id="9-1-Barycentric-coordinates-Interpolation-Across-Triangles"><a href="#9-1-Barycentric-coordinates-Interpolation-Across-Triangles" class="headerlink" title="9.1. Barycentric coordinates (Interpolation Across Triangles:)"></a>9.1. Barycentric coordinates (Interpolation Across Triangles:)</h2><h3 id="9-1-1-Interpolation-Across-Triangles"><a href="#9-1-1-Interpolation-Across-Triangles" class="headerlink" title="9.1.1. Interpolation Across Triangles"></a>9.1.1. Interpolation Across Triangles</h3><h4 id="9-1-1-1-Why-do-we-want-to-interpolate"><a href="#9-1-1-1-Why-do-we-want-to-interpolate" class="headerlink" title="9.1.1.1. Why do we want to interpolate?"></a>9.1.1.1. Why do we want to interpolate?</h4><pre><code>    - Specify values at vertices    - Obtain smoothly varying values across triangles</code></pre><h4 id="9-1-1-2-What-do-we-want-to-interpolate"><a href="#9-1-1-2-What-do-we-want-to-interpolate" class="headerlink" title="9.1.1.2. What do we want to interpolate?"></a>9.1.1.2. What do we want to interpolate?</h4><pre><code>    - Texture coordinates, colors, normal vectors, …</code></pre><h4 id="9-1-1-3-How-do-we-interpolate"><a href="#9-1-1-3-How-do-we-interpolate" class="headerlink" title="9.1.1.3. How do we interpolate?"></a>9.1.1.3. How do we interpolate?</h4><pre><code>    - Barycentric coordinates</code></pre><h3 id="9-1-2-Barycentric-Coordinates-这里的三个系数是重心坐标"><a href="#9-1-2-Barycentric-Coordinates-这里的三个系数是重心坐标" class="headerlink" title="9.1.2. Barycentric Coordinates,这里的三个系数是重心坐标"></a>9.1.2. Barycentric Coordinates,这里的三个系数是重心坐标</h3><p><img src="https://img.mubu.com/document_image/eb467dab-a12b-4b8d-9036-066660068307-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/d72c1339-4d61-460d-8c3e-31ab6a7bdf88-1269577.jpg"></p><h3 id="9-1-3-Geometric-viewpoint-—-proportional-areas用面积占比的方式计算重心坐标"><a href="#9-1-3-Geometric-viewpoint-—-proportional-areas用面积占比的方式计算重心坐标" class="headerlink" title="9.1.3. Geometric viewpoint — proportional areas用面积占比的方式计算重心坐标"></a>9.1.3. Geometric viewpoint — proportional areas用面积占比的方式计算重心坐标</h3><p><img src="https://img.mubu.com/document_image/1d600f1b-0830-48f4-9275-ce43d1d847ad-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/4c154796-242a-4faa-a102-2f47b4de588c-1269577.jpg"></p><h3 id="9-1-4-Using-Barycentric-Coordinates"><a href="#9-1-4-Using-Barycentric-Coordinates" class="headerlink" title="9.1.4. Using Barycentric Coordinates"></a>9.1.4. Using Barycentric Coordinates</h3><p><img src="https://img.mubu.com/document_image/ceffa8b8-3946-4d98-ae0b-97734c0813a9-1269577.jpg"></p><p>注意在投影变换下，三维空间下的重心坐标和投影之后的二维计算得到的重心坐标是不一样的，因此对于三维空间中的属性，需要先在三维中做插值，再投影到二维中去运用，这也就是重心坐标的局限性。</p><h2 id="9-2-Texture-queries"><a href="#9-2-Texture-queries" class="headerlink" title="9.2. Texture queries"></a>9.2. Texture queries</h2><h3 id="9-2-1-Simple-Texture-Mapping-Diffuse-Color"><a href="#9-2-1-Simple-Texture-Mapping-Diffuse-Color" class="headerlink" title="9.2.1. Simple Texture Mapping: Diffuse Color"></a>9.2.1. Simple Texture Mapping: Diffuse Color</h3><p><img src="https://img.mubu.com/document_image/42bdef85-0fda-4cfc-83d3-ea34a8af9f60-1269577.jpg"></p><h3 id="9-2-2-texture中的问题："><a href="#9-2-2-texture中的问题：" class="headerlink" title="9.2.2. texture中的问题："></a>9.2.2. texture中的问题：</h3><h4 id="9-2-2-1-Texture-Magnification-What-if-the-texture-is-too-small"><a href="#9-2-2-1-Texture-Magnification-What-if-the-texture-is-too-small" class="headerlink" title="9.2.2.1. Texture Magnification (What if the texture is too small?)"></a>9.2.2.1. Texture Magnification (What if the texture is too small?)</h4><h5 id="9-2-2-1-1-Texture-Magnification-Easy-Case纹理分辨率较低"><a href="#9-2-2-1-1-Texture-Magnification-Easy-Case纹理分辨率较低" class="headerlink" title="9.2.2.1.1. Texture Magnification - Easy Case纹理分辨率较低"></a>9.2.2.1.1. Texture Magnification - Easy Case纹理分辨率较低</h5><p><img src="https://img.mubu.com/document_image/0d5ebf9c-748f-4748-b7dc-920b54a4c54a-1269577.jpg"></p><pre><code>      - nearest：此时 会映射到纹理的非整数位置，此时利用round算法映射为整数，即多个像素映射到同一个整型texel，锯齿状      - 双线性插值Bilinear Interpolation：Bilinear interpolation usually gives pretty good results at reasonable costs</code></pre><p><img src="https://img.mubu.com/document_image/3920f0d6-fab9-4284-a9c5-f68d675e69bb-1269577.jpg"></p><pre><code>      - bicubic插值</code></pre><h4 id="9-2-2-2-Texture-Magnification-hard-case-What-if-the-texture-is-too-large"><a href="#9-2-2-2-Texture-Magnification-hard-case-What-if-the-texture-is-too-large" class="headerlink" title="9.2.2.2. Texture Magnification (hard case) (What if the texture is too large?)"></a>9.2.2.2. Texture Magnification (hard case) (What if the texture is too large?)</h4><h5 id="9-2-2-2-1-会产生更为严重的问题，越远处，一个像素覆盖的纹素越多，也就是会"><a href="#9-2-2-2-1-会产生更为严重的问题，越远处，一个像素覆盖的纹素越多，也就是会" class="headerlink" title="9.2.2.2.1. 会产生更为严重的问题，越远处，一个像素覆盖的纹素越多，也就是会"></a>9.2.2.2.1. 会产生更为严重的问题，越远处，一个像素覆盖的纹素越多，也就是会</h5><h5 id="9-2-2-2-2-Point-Sampling-Textures-—-Problem"><a href="#9-2-2-2-2-Point-Sampling-Textures-—-Problem" class="headerlink" title="9.2.2.2.2. Point Sampling Textures — Problem"></a>9.2.2.2.2. Point Sampling Textures — Problem</h5><p><img src="https://img.mubu.com/document_image/762b7be3-85cd-4dba-bbcf-516f2e7cc994-1269577.jpg"></p><h5 id="9-2-2-2-3-Screen-Pixel-“Footprint”-in-Texture"><a href="#9-2-2-2-3-Screen-Pixel-“Footprint”-in-Texture" class="headerlink" title="9.2.2.2.3. Screen Pixel “Footprint” in Texture"></a>9.2.2.2.3. Screen Pixel “Footprint” in Texture</h5><p><img src="https://img.mubu.com/document_image/8a68cf56-6551-425b-8628-bda86c68f6ec-1269577.jpg"></p><h5 id="9-2-2-2-4-Will-Supersampling-Do-Antialiasing-最原始的想法-做supersample，但是这样耗费资源较大"><a href="#9-2-2-2-4-Will-Supersampling-Do-Antialiasing-最原始的想法-做supersample，但是这样耗费资源较大" class="headerlink" title="9.2.2.2.4. Will Supersampling Do Antialiasing?-最原始的想法 做supersample，但是这样耗费资源较大"></a>9.2.2.2.4. Will Supersampling Do Antialiasing?-最原始的想法 做supersample，但是这样耗费资源较大</h5><p><img src="https://img.mubu.com/document_image/f9a9e615-65b2-4a00-9ceb-b4876f4cfafa-1269577.jpg"></p><h5 id="9-2-2-2-5-Antialiasing-—-Supersampling？"><a href="#9-2-2-2-5-Antialiasing-—-Supersampling？" class="headerlink" title="9.2.2.2.5. Antialiasing — Supersampling？"></a>9.2.2.2.5. Antialiasing — Supersampling？</h5><p><img src="https://img.mubu.com/document_image/7d484e68-2207-4445-a87d-b2b4451cf0f3-1269577.jpg"></p><h5 id="9-2-2-2-6-Point-Query-vs-Avg-Range-Query构想：是否可以从前面的点查询转为范围查询"><a href="#9-2-2-2-6-Point-Query-vs-Avg-Range-Query构想：是否可以从前面的点查询转为范围查询" class="headerlink" title="9.2.2.2.6. Point Query vs. (Avg.) Range Query构想：是否可以从前面的点查询转为范围查询"></a>9.2.2.2.6. Point Query vs. (Avg.) Range Query构想：是否可以从前面的点查询转为范围查询</h5><p><img src="https://img.mubu.com/document_image/176e6d0d-05f0-4325-8b6f-5be60ecc6cdc-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/02235b2a-6405-499c-a24e-0b094f3cc50b-1269577.jpg"></p><h4 id="9-2-2-3-Mipmap-Allowing-fast-approx-square-range-queries：估计值，因此是不准确的；只能做近似正方形的查询，在渲染之前把不同level的纹理都生成出来"><a href="#9-2-2-3-Mipmap-Allowing-fast-approx-square-range-queries：估计值，因此是不准确的；只能做近似正方形的查询，在渲染之前把不同level的纹理都生成出来" class="headerlink" title="9.2.2.3. Mipmap - Allowing (fast, approx., square) range queries：估计值，因此是不准确的；只能做近似正方形的查询，在渲染之前把不同level的纹理都生成出来"></a>9.2.2.3. Mipmap - Allowing (fast, approx., square) range queries：估计值，因此是不准确的；只能做近似正方形的查询，在渲染之前把不同level的纹理都生成出来</h4><h5 id="9-2-2-3-1-Mipmap-L-Williams-83"><a href="#9-2-2-3-1-Mipmap-L-Williams-83" class="headerlink" title="9.2.2.3.1. Mipmap (L. Williams 83)"></a>9.2.2.3.1. Mipmap (L. Williams 83)</h5><p><img src="https://img.mubu.com/document_image/cfd216fa-b860-400a-b999-26c09644cba8-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/6a646c66-7e56-4638-a98f-d28aadd70b28-1269577.jpg"></p><pre><code>      - What is the storage overhead of a mipmap?：根据上面的图可以看到，后一张纹理是前一张的四分之一，利用等比数列的公式可以计算得到 总存储量只多了三分之一</code></pre><h5 id="9-2-2-3-2-Computing-Mipmap-Level-D"><a href="#9-2-2-3-2-Computing-Mipmap-Level-D" class="headerlink" title="9.2.2.3.2. Computing Mipmap Level D"></a>9.2.2.3.2. Computing Mipmap Level D</h5><p><img src="https://img.mubu.com/document_image/2a59191c-0a4f-4fb7-85fb-b8be52920a1a-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/1bfdc62d-4e42-4480-8448-ed6d6b1cae31-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/bfe76a22-07eb-48a3-887b-0eb025b5429e-1269577.jpg"></p><h5 id="9-2-2-3-3-Visualization-of-Mipmap-Level"><a href="#9-2-2-3-3-Visualization-of-Mipmap-Level" class="headerlink" title="9.2.2.3.3. Visualization of Mipmap Level"></a>9.2.2.3.3. Visualization of Mipmap Level</h5><p><img src="https://img.mubu.com/document_image/20b61772-e162-40ad-b677-62818ac41d51-1269577.jpg"></p><h5 id="9-2-2-3-4-Trilinear-Interpolation"><a href="#9-2-2-3-4-Trilinear-Interpolation" class="headerlink" title="9.2.2.3.4. Trilinear Interpolation"></a>9.2.2.3.4. Trilinear Interpolation</h5><p><img src="https://img.mubu.com/document_image/b5714558-6d97-4aa5-8186-773c5cc67759-1269577.jpg"></p><h5 id="9-2-2-3-5-Visualization-of-Mipmap-Level"><a href="#9-2-2-3-5-Visualization-of-Mipmap-Level" class="headerlink" title="9.2.2.3.5. Visualization of Mipmap Level"></a>9.2.2.3.5. Visualization of Mipmap Level</h5><p><img src="https://img.mubu.com/document_image/22b27cb7-58b0-479f-bfb6-88e4c50b5b7e-1269577.jpg"></p><h5 id="9-2-2-3-6-Mipmap-Limitations可以看到在最后的mipmap中，会出现很大的模糊，mipmap只能做正方块范围查询，做平均值，三线性插值也会不准"><a href="#9-2-2-3-6-Mipmap-Limitations可以看到在最后的mipmap中，会出现很大的模糊，mipmap只能做正方块范围查询，做平均值，三线性插值也会不准" class="headerlink" title="9.2.2.3.6. Mipmap Limitations可以看到在最后的mipmap中，会出现很大的模糊，mipmap只能做正方块范围查询，做平均值，三线性插值也会不准"></a>9.2.2.3.6. Mipmap Limitations可以看到在最后的mipmap中，会出现很大的模糊，mipmap只能做正方块范围查询，做平均值，三线性插值也会不准</h5><p><img src="https://img.mubu.com/document_image/fd329038-2c15-4f0c-a485-136c9453d495-1269577.jpg"></p><h4 id="9-2-2-4-Anisotropic-Filtering各向异性过滤"><a href="#9-2-2-4-Anisotropic-Filtering各向异性过滤" class="headerlink" title="9.2.2.4. Anisotropic Filtering各向异性过滤"></a>9.2.2.4. Anisotropic Filtering各向异性过滤</h4><p><img src="https://img.mubu.com/document_image/93e21460-d982-4b98-94f3-8aa5dd91a670-1269577.jpg"></p><h5 id="9-2-2-4-1-Irregular-Pixel-Footprint-in-Texture"><a href="#9-2-2-4-1-Irregular-Pixel-Footprint-in-Texture" class="headerlink" title="9.2.2.4.1. Irregular Pixel Footprint in Texture"></a>9.2.2.4.1. Irregular Pixel Footprint in Texture</h5><p><img src="https://img.mubu.com/document_image/9983fe13-c8c0-4f07-8d2d-a3161eac69d1-1269577.jpg"></p><h5 id="9-2-2-4-2-Anisotropic-Filtering"><a href="#9-2-2-4-2-Anisotropic-Filtering" class="headerlink" title="9.2.2.4.2. Anisotropic Filtering"></a>9.2.2.4.2. Anisotropic Filtering</h5><p><img src="https://img.mubu.com/document_image/1303284f-f353-4d0d-97d0-69b5e0121b8a-1269577.jpg"></p><p>开销增加三倍，在不同方向上表现不同</p><h2 id="9-3-Applications-of-textures"><a href="#9-3-Applications-of-textures" class="headerlink" title="9.3. Applications of textures"></a>9.3. Applications of textures</h2><h3 id="9-3-1-Many-Many-Uses-for-Texturing"><a href="#9-3-1-Many-Many-Uses-for-Texturing" class="headerlink" title="9.3.1. Many, Many Uses for Texturing"></a>9.3.1. Many, Many Uses for Texturing</h3><p><img src="https://img.mubu.com/document_image/68a3e2a7-1d76-43ee-9ffa-1d0515087b00-1269577.jpg"></p><h3 id="9-3-2-Environment-Map用纹理描述环境图"><a href="#9-3-2-Environment-Map用纹理描述环境图" class="headerlink" title="9.3.2. Environment Map用纹理描述环境图"></a>9.3.2. Environment Map用纹理描述环境图</h3><p><img src="https://img.mubu.com/document_image/2a4164dd-2d8b-46e3-918e-d9fdc35359db-1269577.jpg"></p><h3 id="9-3-3-Environmental-Lighting"><a href="#9-3-3-Environmental-Lighting" class="headerlink" title="9.3.3. Environmental Lighting"></a>9.3.3. Environmental Lighting</h3><p><img src="https://img.mubu.com/document_image/3cc2ab12-525b-404b-be6f-eba5e108b4e5-1269577.jpg"></p><h3 id="9-3-4-Spherical-Environment-Map"><a href="#9-3-4-Spherical-Environment-Map" class="headerlink" title="9.3.4. Spherical Environment Map"></a>9.3.4. Spherical Environment Map</h3><p><img src="https://img.mubu.com/document_image/1954c701-fe48-44eb-ab4a-4e970ac495e0-1269577.jpg"></p><h4 id="9-3-4-1-Spherical-Map-—-Problem看最上面发现不是均匀的描述"><a href="#9-3-4-1-Spherical-Map-—-Problem看最上面发现不是均匀的描述" class="headerlink" title="9.3.4.1. Spherical Map — Problem看最上面发现不是均匀的描述"></a>9.3.4.1. Spherical Map — Problem看最上面发现不是均匀的描述</h4><p><img src="https://img.mubu.com/document_image/da4ce633-4f73-4950-8a92-72f996493480-1269577.jpg"></p><h4 id="9-3-4-2-Cube-Map从球壳上做球面投影到立方体上"><a href="#9-3-4-2-Cube-Map从球壳上做球面投影到立方体上" class="headerlink" title="9.3.4.2. Cube Map从球壳上做球面投影到立方体上"></a>9.3.4.2. Cube Map从球壳上做球面投影到立方体上</h4><p><img src="https://img.mubu.com/document_image/e594c1cc-bb94-4360-97ff-9d51d5420e85-1269577.jpg"></p><h3 id="9-3-5-textures-can-affect-shading凹凸贴图（法向贴图）"><a href="#9-3-5-textures-can-affect-shading凹凸贴图（法向贴图）" class="headerlink" title="9.3.5. textures can affect shading凹凸贴图（法向贴图）"></a>9.3.5. textures can affect shading凹凸贴图（法向贴图）</h3><h4 id="9-3-5-1-并不一定代表颜色"><a href="#9-3-5-1-并不一定代表颜色" class="headerlink" title="9.3.5.1. 并不一定代表颜色"></a>9.3.5.1. 并不一定代表颜色</h4><pre><code>    - ![](https://img.mubu.com/document_image/8afee1f8-fad3-4938-bec5-22d0fdee1248-1269577.jpg)</code></pre><h5 id="9-3-5-1-1-Bump-Mapping"><a href="#9-3-5-1-1-Bump-Mapping" class="headerlink" title="9.3.5.1.1. Bump Mapping"></a>9.3.5.1.1. Bump Mapping</h5><p><img src="https://img.mubu.com/document_image/50b3503e-1e28-40ef-8825-b6a52b02b1a2-1269577.jpg"></p><h5 id="9-3-5-1-2-How-to-perturb-the-normal-in-flatland"><a href="#9-3-5-1-2-How-to-perturb-the-normal-in-flatland" class="headerlink" title="9.3.5.1.2. How to perturb the normal (in flatland)"></a>9.3.5.1.2. How to perturb the normal (in flatland)</h5><p><img src="https://img.mubu.com/document_image/293faa8e-a562-4feb-bbe7-cffe05df625f-1269577.jpg"></p><h5 id="9-3-5-1-3-How-to-perturb-the-normal-in-3D"><a href="#9-3-5-1-3-How-to-perturb-the-normal-in-3D" class="headerlink" title="9.3.5.1.3. How to perturb the normal (in 3D)"></a>9.3.5.1.3. How to perturb the normal (in 3D)</h5><p><img src="https://img.mubu.com/document_image/f60e910a-0230-4f9c-905c-5d2ea82e5c95-1269577.jpg"></p><h4 id="9-3-5-2-Displacement-mapping-—-a-more-advanced-approach"><a href="#9-3-5-2-Displacement-mapping-—-a-more-advanced-approach" class="headerlink" title="9.3.5.2. Displacement mapping — a more advanced approach"></a>9.3.5.2. Displacement mapping — a more advanced approach</h4><p><img src="https://img.mubu.com/document_image/3c335d45-9d29-466f-b23a-f271c4d086ae-1269577.jpg"></p><h4 id="9-3-5-3-3D-Procedural-Noise-Solid-Modeling"><a href="#9-3-5-3-3D-Procedural-Noise-Solid-Modeling" class="headerlink" title="9.3.5.3. 3D Procedural Noise + Solid Modeling"></a>9.3.5.3. 3D Procedural Noise + Solid Modeling</h4><p><img src="https://img.mubu.com/document_image/6e427887-bc33-4929-a183-480a5f1d9e42-1269577.jpg"></p><h4 id="9-3-5-4-Provide-Precomputed-Shading"><a href="#9-3-5-4-Provide-Precomputed-Shading" class="headerlink" title="9.3.5.4. Provide Precomputed Shading"></a>9.3.5.4. Provide Precomputed Shading</h4><p><img src="https://img.mubu.com/document_image/4087ddd8-7365-468c-ad79-1b398fdcd358-1269577.jpg"></p><h4 id="9-3-5-5-3D-Textures-and-Volume-Rendering"><a href="#9-3-5-5-3D-Textures-and-Volume-Rendering" class="headerlink" title="9.3.5.5. 3D Textures and Volume Rendering"></a>9.3.5.5. 3D Textures and Volume Rendering</h4><p><img src="https://img.mubu.com/document_image/a731fe1c-3a1c-40b9-9463-5460b265c219-1269577.jpg"></p><h1 id="10-第十讲-Geometry-1-Introduction"><a href="#10-第十讲-Geometry-1-Introduction" class="headerlink" title="10. 第十讲-Geometry 1 - Introduction"></a>10. 第十讲-Geometry 1 - Introduction</h1><h2 id="10-1-Examples-of-geometry"><a href="#10-1-Examples-of-geometry" class="headerlink" title="10.1. Examples of geometry"></a>10.1. Examples of geometry</h2><p><img src="https://img.mubu.com/document_image/324ccaab-4d6c-4648-bb39-ab7eac34c60a-1269577.jpg"></p><h2 id="10-2-Various-representations-of-geometry"><a href="#10-2-Various-representations-of-geometry" class="headerlink" title="10.2. Various representations of geometry"></a>10.2. Various representations of geometry</h2><h3 id="10-2-1-表达"><a href="#10-2-1-表达" class="headerlink" title="10.2.1. 表达"></a>10.2.1. 表达</h3><p><img src="https://img.mubu.com/document_image/cbeda33f-89d3-4a0a-93a8-d6eb7dc8c028-1269577.jpg"></p><h3 id="10-2-2-“Implicit”-Representations-of-Geometry"><a href="#10-2-2-“Implicit”-Representations-of-Geometry" class="headerlink" title="10.2.2. “Implicit” Representations of Geometry"></a>10.2.2. “Implicit” Representations of Geometry</h3><h4 id="10-2-2-1-不告诉具体的位置-只告诉满足的某种关系，很难去找到所有的点的具体-位置，但是可以很方便的判断点是否在在surface内外"><a href="#10-2-2-1-不告诉具体的位置-只告诉满足的某种关系，很难去找到所有的点的具体-位置，但是可以很方便的判断点是否在在surface内外" class="headerlink" title="10.2.2.1. 不告诉具体的位置 只告诉满足的某种关系，很难去找到所有的点的具体 位置，但是可以很方便的判断点是否在在surface内外"></a>10.2.2.1. 不告诉具体的位置 只告诉满足的某种关系，很难去找到所有的点的具体 位置，但是可以很方便的判断点是否在在surface内外</h4><p><img src="https://img.mubu.com/document_image/ed5f9dea-0cae-401e-b6bb-0e32b35292fa-1269577.jpg"></p><h4 id="10-2-2-2-Implicit-Surface-–-Sampling-Can-Be-Hard"><a href="#10-2-2-2-Implicit-Surface-–-Sampling-Can-Be-Hard" class="headerlink" title="10.2.2.2. Implicit Surface – Sampling Can Be Hard"></a>10.2.2.2. Implicit Surface – Sampling Can Be Hard</h4><p><img src="https://img.mubu.com/document_image/ee2b34f5-72c9-4d38-91bf-b7fafecab1f9-1269577.jpg"></p><h4 id="10-2-2-3-Implicit-Surface-–-Inside-Outside-Tests-Easy"><a href="#10-2-2-3-Implicit-Surface-–-Inside-Outside-Tests-Easy" class="headerlink" title="10.2.2.3. Implicit Surface – Inside/Outside Tests Easy"></a>10.2.2.3. Implicit Surface – Inside/Outside Tests Easy</h4><p><img src="https://img.mubu.com/document_image/ba238e4a-1505-4e54-be1f-2968e011ec5d-1269577.jpg"></p><h3 id="10-2-3-“Explicit”-Representations-of-Geometry"><a href="#10-2-3-“Explicit”-Representations-of-Geometry" class="headerlink" title="10.2.3. “Explicit” Representations of Geometry"></a>10.2.3. “Explicit” Representations of Geometry</h3><p><img src="https://img.mubu.com/document_image/231304a7-6987-485c-a595-15cf2e664dde-1269577.jpg"></p><h4 id="10-2-3-1-Explicit-Surface-–-Sampling-Is-Easy"><a href="#10-2-3-1-Explicit-Surface-–-Sampling-Is-Easy" class="headerlink" title="10.2.3.1. Explicit Surface – Sampling Is Easy"></a>10.2.3.1. Explicit Surface – Sampling Is Easy</h4><p><img src="https://img.mubu.com/document_image/57a9423d-29d9-44e3-8a82-6ef68f7c9d7c-1269577.jpg"></p><h4 id="10-2-3-2-Explicit-Surface-–-Inside-Outside-Test-Hard"><a href="#10-2-3-2-Explicit-Surface-–-Inside-Outside-Test-Hard" class="headerlink" title="10.2.3.2. Explicit Surface – Inside/Outside Test Hard"></a>10.2.3.2. Explicit Surface – Inside/Outside Test Hard</h4><p><img src="https://img.mubu.com/document_image/7745947e-0d03-4d6b-bb6a-03ee5db56b7b-1269577.jpg"></p><h3 id="10-2-4-No-“Best”-Representation-–-Geometry-is-Hard-根据需要选择合适的表达方式"><a href="#10-2-4-No-“Best”-Representation-–-Geometry-is-Hard-根据需要选择合适的表达方式" class="headerlink" title="10.2.4. No “Best” Representation – Geometry is Hard!根据需要选择合适的表达方式"></a>10.2.4. No “Best” Representation – Geometry is Hard!根据需要选择合适的表达方式</h3><p><img src="https://img.mubu.com/document_image/375a3bbf-f604-4f12-b5d7-c9fbf0076044-1269577.jpg"></p><h3 id="10-2-5-More-Implicit-Representations-in-Computer-Graphics"><a href="#10-2-5-More-Implicit-Representations-in-Computer-Graphics" class="headerlink" title="10.2.5. More Implicit Representations in Computer Graphics"></a>10.2.5. More Implicit Representations in Computer Graphics</h3><p><img src="https://img.mubu.com/document_image/9a91ef19-a2e2-4766-affc-02c4f47607b7-1269577.jpg"></p><h4 id="10-2-5-1-Algebraic-Surfaces-Implicit"><a href="#10-2-5-1-Algebraic-Surfaces-Implicit" class="headerlink" title="10.2.5.1. Algebraic Surfaces (Implicit)"></a>10.2.5.1. Algebraic Surfaces (Implicit)</h4><p><img src="https://img.mubu.com/document_image/573ce1f7-5fd7-4ffc-9c52-2d9127bdcf9c-1269577.jpg"></p><h4 id="10-2-5-2-Constructive-Solid-Geometry-Implicit-CSG"><a href="#10-2-5-2-Constructive-Solid-Geometry-Implicit-CSG" class="headerlink" title="10.2.5.2. Constructive Solid Geometry (Implicit) - CSG"></a>10.2.5.2. Constructive Solid Geometry (Implicit) - CSG</h4><p><img src="https://img.mubu.com/document_image/640d7d68-495c-4924-9468-f5d14134d93b-1269577.jpg"></p><h4 id="10-2-5-3-Distance-Functions-Implicit"><a href="#10-2-5-3-Distance-Functions-Implicit" class="headerlink" title="10.2.5.3. Distance Functions (Implicit)"></a>10.2.5.3. Distance Functions (Implicit)</h4><p><img src="https://img.mubu.com/document_image/f81bf2a5-ff8f-4c8a-9d18-8d8cc080b5c3-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/6a4e8619-0721-44ba-8dc6-bf0217e1c4fb-1269577.jpg"></p><p>如果直接对图形blend，会发现如第一行的第三个结果 黑灰中，若想得到黑白一半的情况，则需要用有向距离函数</p><h4 id="10-2-5-4-Blending-Distance-Functions-Implicit"><a href="#10-2-5-4-Blending-Distance-Functions-Implicit" class="headerlink" title="10.2.5.4. Blending Distance Functions (Implicit)"></a>10.2.5.4. Blending Distance Functions (Implicit)</h4><p><img src="https://img.mubu.com/document_image/df3b7fe5-d39d-40e8-8cbb-74674bb8699c-1269577.jpg"></p><h4 id="10-2-5-5-Level-Set-Methods-Also-implicit-水平集，注意与distance-function的差别"><a href="#10-2-5-5-Level-Set-Methods-Also-implicit-水平集，注意与distance-function的差别" class="headerlink" title="10.2.5.5. Level Set Methods (Also implicit)水平集，注意与distance function的差别"></a>10.2.5.5. Level Set Methods (Also implicit)水平集，注意与distance function的差别</h4><p><img src="https://img.mubu.com/document_image/facfda0c-daa7-4c85-94a1-6bbf87b19006-1269577.jpg"></p><h5 id="10-2-5-5-1-Level-Sets-from-Medical-Data-CT-MRI-etc"><a href="#10-2-5-5-1-Level-Sets-from-Medical-Data-CT-MRI-etc" class="headerlink" title="10.2.5.5.1. Level Sets from Medical Data (CT, MRI, etc.)"></a>10.2.5.5.1. Level Sets from Medical Data (CT, MRI, etc.)</h5><p><img src="https://img.mubu.com/document_image/7f6617d0-4ef8-41b3-b8c2-1c9efc9ed331-1269577.jpg"></p><h5 id="10-2-5-5-2-Level-Sets-in-Physical-Simulation"><a href="#10-2-5-5-2-Level-Sets-in-Physical-Simulation" class="headerlink" title="10.2.5.5.2. Level Sets in Physical Simulation"></a>10.2.5.5.2. Level Sets in Physical Simulation</h5><p><img src="https://img.mubu.com/document_image/d91275e6-d959-414e-a311-80eb20b44193-1269577.jpg"></p><h4 id="10-2-5-6-Fractals-Implicit"><a href="#10-2-5-6-Fractals-Implicit" class="headerlink" title="10.2.5.6. Fractals (Implicit)"></a>10.2.5.6. Fractals (Implicit)</h4><p><img src="https://img.mubu.com/document_image/9df657ea-d4c7-404e-99ed-175380a7dd3e-1269577.jpg"></p><h4 id="10-2-5-7-Implicit-Representations-Pros-amp-Cons"><a href="#10-2-5-7-Implicit-Representations-Pros-amp-Cons" class="headerlink" title="10.2.5.7. Implicit Representations - Pros &amp; Cons"></a>10.2.5.7. Implicit Representations - Pros &amp; Cons</h4><p><img src="https://img.mubu.com/document_image/8b5af32e-ac03-47af-bf3e-ae6b908eaa8c-1269577.jpg"></p><h1 id="11-Lecture-11-Geometry-2-Curves-and-Surfaces"><a href="#11-Lecture-11-Geometry-2-Curves-and-Surfaces" class="headerlink" title="11. Lecture 11 Geometry 2 (Curves and Surfaces)"></a>11. Lecture 11 Geometry 2 (Curves and Surfaces)</h1><h2 id="11-1-Explicit-Representations"><a href="#11-1-Explicit-Representations" class="headerlink" title="11.1. Explicit Representations"></a>11.1. Explicit Representations</h2><h3 id="11-1-1-Many-Explicit-Representations-in-Graphics"><a href="#11-1-1-Many-Explicit-Representations-in-Graphics" class="headerlink" title="11.1.1. Many Explicit Representations in Graphics"></a>11.1.1. Many Explicit Representations in Graphics</h3><p><img src="https://img.mubu.com/document_image/6c20a479-91a3-4053-8de5-982a9a468747-1269577.jpg"></p><h3 id="11-1-2-Point-Cloud-Explicit"><a href="#11-1-2-Point-Cloud-Explicit" class="headerlink" title="11.1.2. Point Cloud (Explicit)"></a>11.1.2. Point Cloud (Explicit)</h3><p><img src="https://img.mubu.com/document_image/def77000-3e2d-4f8f-ae29-1255eda5b07a-1269577.jpg"></p><h3 id="11-1-3-Polygon-Mesh-Explicit"><a href="#11-1-3-Polygon-Mesh-Explicit" class="headerlink" title="11.1.3. Polygon Mesh (Explicit)"></a>11.1.3. Polygon Mesh (Explicit)</h3><p><img src="https://img.mubu.com/document_image/b0c9f7eb-f0d0-46c6-ab91-92344dff8678-1269577.jpg"></p><h3 id="11-1-4-The-Wavefront-Object-File-obj-Format"><a href="#11-1-4-The-Wavefront-Object-File-obj-Format" class="headerlink" title="11.1.4. The Wavefront Object File (.obj) Format"></a>11.1.4. The Wavefront Object File (.obj) Format</h3><p><img src="https://img.mubu.com/document_image/b22d19f3-5760-4f3f-a432-44286ffa07f7-1269577.jpg"></p><h2 id="11-2-Curves"><a href="#11-2-Curves" class="headerlink" title="11.2. Curves"></a>11.2. Curves</h2><p><img src="https://img.mubu.com/document_image/5a65b71d-35b2-43f6-9115-ba4d62d0c19a-1269577.jpg"></p><h3 id="11-2-1-Bezier-curves-贝塞尔曲线"><a href="#11-2-1-Bezier-curves-贝塞尔曲线" class="headerlink" title="11.2.1. -Bezier curves 贝塞尔曲线"></a>11.2.1. -Bezier curves 贝塞尔曲线</h3><h4 id="11-2-1-1-Defining-Cubic-Bezier-Curve-With-Tangents：1-起点和终点；2-起始方向必须过p0p1-终止方向必须过p2p3看，其他的控制点则不强制性通过"><a href="#11-2-1-1-Defining-Cubic-Bezier-Curve-With-Tangents：1-起点和终点；2-起始方向必须过p0p1-终止方向必须过p2p3看，其他的控制点则不强制性通过" class="headerlink" title="11.2.1.1. Defining Cubic Bézier Curve With Tangents：1.起点和终点；2.起始方向必须过p0p1,终止方向必须过p2p3看，其他的控制点则不强制性通过"></a>11.2.1.1. Defining Cubic Bézier Curve With Tangents：1.起点和终点；2.起始方向必须过p0p1,终止方向必须过p2p3看，其他的控制点则不强制性通过</h4><p><img src="https://img.mubu.com/document_image/e8dc0416-5ac5-411a-8ae0-10a65cf88ea1-1269577.jpg"></p><h4 id="11-2-1-2-Evaluating-Bezier-Curves-De-Casteljau’s-algorithm-：动态展示http-acko-net"><a href="#11-2-1-2-Evaluating-Bezier-Curves-De-Casteljau’s-algorithm-：动态展示http-acko-net" class="headerlink" title="11.2.1.2. Evaluating Bézier Curves -De Casteljau’s algorithm ：动态展示http://acko.net/"></a>11.2.1.2. Evaluating Bézier Curves -De Casteljau’s algorithm ：动态展示<a href="http://acko.net/">http://acko.net/</a></h4><h5 id="11-2-1-2-1-Bezier-Curves-–-de-Casteljau-Algorithm：把所有t时间的点都画出来-连起来就是贝塞尔曲线"><a href="#11-2-1-2-1-Bezier-Curves-–-de-Casteljau-Algorithm：把所有t时间的点都画出来-连起来就是贝塞尔曲线" class="headerlink" title="11.2.1.2.1. Bézier Curves – de Casteljau Algorithm：把所有t时间的点都画出来 连起来就是贝塞尔曲线"></a>11.2.1.2.1. Bézier Curves – de Casteljau Algorithm：把所有t时间的点都画出来 连起来就是贝塞尔曲线</h5><p><img src="https://img.mubu.com/document_image/63f17e50-f517-4038-9d57-ac1bd9e4ae84-1269577.jpg"></p><h4 id="11-2-1-3-Evaluating-Bezier-Curves-Algebraic-Formula"><a href="#11-2-1-3-Evaluating-Bezier-Curves-Algebraic-Formula" class="headerlink" title="11.2.1.3. Evaluating Bézier Curves - Algebraic Formula"></a>11.2.1.3. Evaluating Bézier Curves - Algebraic Formula</h4><h5 id="11-2-1-3-1-de-Casteljau-algorithm-gives-a-pyramid-of-coefficients"><a href="#11-2-1-3-1-de-Casteljau-algorithm-gives-a-pyramid-of-coefficients" class="headerlink" title="11.2.1.3.1. de Casteljau algorithm gives a pyramid of coefficients"></a>11.2.1.3.1. de Casteljau algorithm gives a pyramid of coefficients</h5><p><img src="https://img.mubu.com/document_image/f2061a51-bd75-4c89-a928-50b3796c6b29-1269577.jpg"></p><h5 id="11-2-1-3-2-Example-quadratic-Bezier-curve-from-three-points"><a href="#11-2-1-3-2-Example-quadratic-Bezier-curve-from-three-points" class="headerlink" title="11.2.1.3.2. Example: quadratic Bézier curve from three points"></a>11.2.1.3.2. Example: quadratic Bézier curve from three points</h5><p><img src="https://img.mubu.com/document_image/9419cf87-5b7a-47f9-b927-a98eba55f245-1269577.jpg"></p><h5 id="11-2-1-3-3-Bezier-Curve-–-General-Algebraic-Formula"><a href="#11-2-1-3-3-Bezier-Curve-–-General-Algebraic-Formula" class="headerlink" title="11.2.1.3.3. Bézier Curve – General Algebraic Formula"></a>11.2.1.3.3. Bézier Curve – General Algebraic Formula</h5><p><img src="https://img.mubu.com/document_image/765c4b61-0f6a-4b77-ac5c-c7965ad61541-1269577.jpg"></p><h5 id="11-2-1-3-4-Bezier-Curve-–-Algebraic-Formula-Example"><a href="#11-2-1-3-4-Bezier-Curve-–-Algebraic-Formula-Example" class="headerlink" title="11.2.1.3.4. Bézier Curve – Algebraic Formula: Example"></a>11.2.1.3.4. Bézier Curve – Algebraic Formula: Example</h5><p><img src="https://img.mubu.com/document_image/d2be665a-80af-45ad-81c5-62c8f252a2ed-1269577.jpg"></p><h5 id="11-2-1-3-5-Cubic-Bezier-Basis-Functions"><a href="#11-2-1-3-5-Cubic-Bezier-Basis-Functions" class="headerlink" title="11.2.1.3.5. Cubic Bézier Basis Functions"></a>11.2.1.3.5. Cubic Bézier Basis Functions</h5><p><img src="https://img.mubu.com/document_image/a4f90e69-9ac7-4e50-a1dc-3579e3b7925c-1269577.jpg"></p><h5 id="11-2-1-3-6-Properties-of-Bezier-Curves"><a href="#11-2-1-3-6-Properties-of-Bezier-Curves" class="headerlink" title="11.2.1.3.6. Properties of Bézier Curves"></a>11.2.1.3.6. Properties of Bézier Curves</h5><p><img src="https://img.mubu.com/document_image/70cc59b3-6f0f-4746-b5f9-bccde5aebf36-1269577.jpg"></p><pre><code>      - BTW: What’s a Convex Hull</code></pre><p><img src="https://img.mubu.com/document_image/fb32af0f-1bed-4115-b942-9b7983279cd9-1269577.jpg"></p><h4 id="11-2-1-4-Piecewise-Bezier-Curves"><a href="#11-2-1-4-Piecewise-Bezier-Curves" class="headerlink" title="11.2.1.4. Piecewise Bézier Curves"></a>11.2.1.4. Piecewise Bézier Curves</h4><h5 id="11-2-1-4-1-Higher-Order-Bezier-Curves"><a href="#11-2-1-4-1-Higher-Order-Bezier-Curves" class="headerlink" title="11.2.1.4.1. Higher-Order Bézier Curves?"></a>11.2.1.4.1. Higher-Order Bézier Curves?</h5><p><img src="https://img.mubu.com/document_image/e931f4f3-96df-4c5b-90f4-953afb5bfcfb-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/81c920e1-1b18-446d-9736-12e1a35e2b25-1269577.jpg"></p><h5 id="11-2-1-4-2-Demo-–-Piecewise-Cubic-Bezier-Curve：两段曲线之间用终止和起始向量一致来控制，长度一样-方向相反"><a href="#11-2-1-4-2-Demo-–-Piecewise-Cubic-Bezier-Curve：两段曲线之间用终止和起始向量一致来控制，长度一样-方向相反" class="headerlink" title="11.2.1.4.2. Demo – Piecewise Cubic Bézier Curve：两段曲线之间用终止和起始向量一致来控制，长度一样 方向相反"></a>11.2.1.4.2. Demo – Piecewise Cubic Bézier Curve：两段曲线之间用终止和起始向量一致来控制，长度一样 方向相反</h5><p><img src="https://img.mubu.com/document_image/36e8385b-796c-4f99-8019-43d0dd646d99-1269577.jpg"></p><h5 id="11-2-1-4-3-Continuity"><a href="#11-2-1-4-3-Continuity" class="headerlink" title="11.2.1.4.3. Continuity"></a>11.2.1.4.3. Continuity</h5><p><img src="https://img.mubu.com/document_image/3b9eb008-5328-4abf-9e94-80a7e003fec1-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/cf4d7edf-994b-4250-a365-4e169b62bdb2-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/7421556b-3b5f-480f-a413-b9d25e979a0f-1269577.jpg"></p><h3 id="11-2-2-Other-types-of-splines"><a href="#11-2-2-Other-types-of-splines" class="headerlink" title="11.2.2. Other types of splines"></a>11.2.2. Other types of splines</h3><h4 id="11-2-2-1-Spline样条"><a href="#11-2-2-1-Spline样条" class="headerlink" title="11.2.2.1. Spline样条"></a>11.2.2.1. Spline样条</h4><p><img src="https://img.mubu.com/document_image/9d918067-da54-4377-accc-f9e93387645b-1269577.jpg"></p><h4 id="11-2-2-2-B-splines-etc"><a href="#11-2-2-2-B-splines-etc" class="headerlink" title="11.2.2.2. B-splines, etc."></a>11.2.2.2. B-splines, etc.</h4><p><img src="https://img.mubu.com/document_image/6ec83e94-0a3e-4ab6-add5-01fec80b55da-1269577.jpg"></p><h2 id="11-3-Surfaces"><a href="#11-3-Surfaces" class="headerlink" title="11.3. Surfaces"></a>11.3. Surfaces</h2><h3 id="11-3-1-Bezier-surfaces"><a href="#11-3-1-Bezier-surfaces" class="headerlink" title="11.3.1. -Bezier surfaces"></a>11.3.1. -Bezier surfaces</h3><h4 id="11-3-1-1-Extend-Bezier-curves-to-surfaces"><a href="#11-3-1-1-Extend-Bezier-curves-to-surfaces" class="headerlink" title="11.3.1.1. Extend Bézier curves to surfaces"></a>11.3.1.1. Extend Bézier curves to surfaces</h4><p><img src="https://img.mubu.com/document_image/66a40c6c-fc6f-49ce-998c-2b24624f064d-1269577.jpg"></p><h4 id="11-3-1-2-Bicubic-Bezier-Surface-Patch"><a href="#11-3-1-2-Bicubic-Bezier-Surface-Patch" class="headerlink" title="11.3.1.2. Bicubic Bézier Surface Patch"></a>11.3.1.2. Bicubic Bézier Surface Patch</h4><p><img src="https://img.mubu.com/document_image/926bd6ce-80ab-4079-832f-a0fdbd3231c4-1269577.jpg"></p><h4 id="11-3-1-3-Visualizing-Bicubic-Bezier-Surface-Patch-http-acko-net"><a href="#11-3-1-3-Visualizing-Bicubic-Bezier-Surface-Patch-http-acko-net" class="headerlink" title="11.3.1.3. Visualizing Bicubic Bézier Surface Patch http://acko.net"></a>11.3.1.3. Visualizing Bicubic Bézier Surface Patch <a href="http://acko.net/">http://acko.net</a></h4><p><img src="https://img.mubu.com/document_image/921c3366-39ba-4133-8acb-28b71ef8331e-1269577.jpg"></p><h4 id="11-3-1-4-Evaluating-Bezier-Surfaces"><a href="#11-3-1-4-Evaluating-Bezier-Surfaces" class="headerlink" title="11.3.1.4. Evaluating Bézier Surfaces"></a>11.3.1.4. Evaluating Bézier Surfaces</h4><h5 id="11-3-1-4-1-Evaluating-Surface-Position-For-Parameters-u-v"><a href="#11-3-1-4-1-Evaluating-Surface-Position-For-Parameters-u-v" class="headerlink" title="11.3.1.4.1. Evaluating Surface Position For Parameters (u,v)"></a>11.3.1.4.1. Evaluating Surface Position For Parameters (u,v)</h5><p><img src="https://img.mubu.com/document_image/f58d3a92-336e-4690-b2e1-7676eba0bf24-1269577.jpg"></p><h5 id="11-3-1-4-2-Method-Separable-1D-de-Casteljau-Algorithm"><a href="#11-3-1-4-2-Method-Separable-1D-de-Casteljau-Algorithm" class="headerlink" title="11.3.1.4.2. Method: Separable 1D de Casteljau Algorithm"></a>11.3.1.4.2. Method: Separable 1D de Casteljau Algorithm</h5><p><img src="https://img.mubu.com/document_image/5aac25d9-a5b0-4433-8b7a-96afb74bfedb-1269577.jpg"></p><h5 id="11-3-1-4-3-Method-Separable-1D-de-Casteljau-Algorithm"><a href="#11-3-1-4-3-Method-Separable-1D-de-Casteljau-Algorithm" class="headerlink" title="11.3.1.4.3. Method: Separable 1D de Casteljau Algorithm"></a>11.3.1.4.3. Method: Separable 1D de Casteljau Algorithm</h5><p><img src="https://img.mubu.com/document_image/25a80bf7-14f6-4aae-beff-56aca981af40-1269577.jpg"></p><h3 id="11-3-2-Triangles-amp-quads"><a href="#11-3-2-Triangles-amp-quads" class="headerlink" title="11.3.2. -Triangles &amp; quads"></a>11.3.2. -Triangles &amp; quads</h3><h4 id="11-3-2-1-Subdivision-simplification-regularization"><a href="#11-3-2-1-Subdivision-simplification-regularization" class="headerlink" title="11.3.2.1. -Subdivision, simplification, regularization"></a>11.3.2.1. -Subdivision, simplification, regularization</h4><p><img src="https://img.mubu.com/document_image/84dd4eac-1537-4e9a-a13c-ed5cd3cad1d2-1269577.jpg"></p><h1 id="12-Lecture-12-Geometry-3"><a href="#12-Lecture-12-Geometry-3" class="headerlink" title="12. Lecture 12:Geometry 3"></a>12. Lecture 12:Geometry 3</h1><h2 id="12-1-Turing-Award-Winners"><a href="#12-1-Turing-Award-Winners" class="headerlink" title="12.1. Turing Award Winners"></a>12.1. Turing Award Winners</h2><p><img src="https://img.mubu.com/document_image/f132927a-d29b-4f5b-b113-71795476ab3f-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/f1732e53-fd9e-4b86-a54c-ac4251ae80d5-1269577.jpg"></p><h2 id="12-2-Mesh-Operations-Geometry-Processing"><a href="#12-2-Mesh-Operations-Geometry-Processing" class="headerlink" title="12.2. Mesh Operations: Geometry Processing"></a>12.2. Mesh Operations: Geometry Processing</h2><p><img src="https://img.mubu.com/document_image/f48d91af-6e17-4336-b84c-351da895924d-1269577.jpg"></p><h3 id="12-2-1-Mesh-Subdivision-upsampling"><a href="#12-2-1-Mesh-Subdivision-upsampling" class="headerlink" title="12.2.1. Mesh Subdivision (upsampling)"></a>12.2.1. Mesh Subdivision (upsampling)</h3><p><img src="https://img.mubu.com/document_image/a3987c17-5e38-4f1f-9879-e7dd19e82d87-1269577.jpg"></p><h4 id="12-2-1-1-Loop-subdivision（Loop-：family-name，不是循环）"><a href="#12-2-1-1-Loop-subdivision（Loop-：family-name，不是循环）" class="headerlink" title="12.2.1.1. Loop subdivision（Loop ：family name，不是循环）"></a>12.2.1.1. Loop subdivision（Loop ：family name，不是循环）</h4><p><img src="https://img.mubu.com/document_image/a0668546-f3d0-4dcb-b475-32632ce339c0-1269577.jpg"></p><h5 id="12-2-1-1-1-first：Split-each-triangle-into-four"><a href="#12-2-1-1-1-first：Split-each-triangle-into-four" class="headerlink" title="12.2.1.1.1. first：Split each triangle into four"></a>12.2.1.1.1. first：Split each triangle into four</h5><p><img src="https://img.mubu.com/document_image/767913c1-3ad2-4984-b4b9-234629d8f471-1269577.jpg"></p><h5 id="12-2-1-1-2-second：Assign-new-vertex-positions-according-to-weights-，New-old-vertices-updated-differently"><a href="#12-2-1-1-2-second：Assign-new-vertex-positions-according-to-weights-，New-old-vertices-updated-differently" class="headerlink" title="12.2.1.1.2. second：Assign new vertex positions according to weights ，New / old vertices updated differently"></a>12.2.1.1.2. second：Assign new vertex positions according to weights ，New / old vertices updated differently</h5><p><img src="https://img.mubu.com/document_image/62892575-00ae-4ba8-8c0b-b4100dc1ceb0-1269577.jpg"></p><pre><code>      - Loop Subdivision — Update        - new vertices，以其中的一个新生成的白点为例</code></pre><p><img src="https://img.mubu.com/document_image/5724ccd0-b5a0-46b2-abd0-8a87b70af236-1269577.jpg"></p><pre><code>        - old vertices (e.g. degree 6 vertices here):degree即为某个点连了几条边，度越高，直观的理解就是多参考邻域的信息</code></pre><p><img src="https://img.mubu.com/document_image/eb79b6fb-5456-4e55-9645-a25409699048-1269577.jpg"></p><h5 id="12-2-1-1-3-Loop-Subdivision-Results"><a href="#12-2-1-1-3-Loop-Subdivision-Results" class="headerlink" title="12.2.1.1.3. Loop Subdivision Results"></a>12.2.1.1.3. Loop Subdivision Results</h5><p><img src="https://img.mubu.com/document_image/1bde9acc-3de1-48bf-81ff-cb19946719d2-1269577.jpg"></p><h4 id="12-2-1-2-Catmull-Clark-Subdivision-General-Mesh"><a href="#12-2-1-2-Catmull-Clark-Subdivision-General-Mesh" class="headerlink" title="12.2.1.2. Catmull-Clark Subdivision (General Mesh)"></a>12.2.1.2. Catmull-Clark Subdivision (General Mesh)</h4><h5 id="12-2-1-2-1-why？"><a href="#12-2-1-2-1-why？" class="headerlink" title="12.2.1.2.1. why？"></a>12.2.1.2.1. why？</h5><p>因为Loop subdivision只能用于三角形的面片，因此需要提出一个更一般的情况</p><h5 id="12-2-1-2-2-一些基本的定义"><a href="#12-2-1-2-2-一些基本的定义" class="headerlink" title="12.2.1.2.2. 一些基本的定义"></a>12.2.1.2.2. 一些基本的定义</h5><p>quad face四边形面 Non-quad face非四边形面；奇异点：只要是度不等于4的点；每一次分解先在每一个面添加一个点，再在边上添加一个点，最后连接新的点。在每一个subdivision之后，每一个非四边形面新增两个奇异点，非四边形面消失</p><p><img src="https://img.mubu.com/document_image/cf082d07-134b-448a-b67f-41535f0d7cf6-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/6925abdb-6e5f-4d55-b3a2-89e7c04d04f3-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/9bc5edcd-a5b9-49e3-bfeb-9de56075f410-1269577.jpg"></p><h5 id="12-2-1-2-3-顶点更新规则"><a href="#12-2-1-2-3-顶点更新规则" class="headerlink" title="12.2.1.2.3. 顶点更新规则"></a>12.2.1.2.3. 顶点更新规则</h5><p><img src="https://img.mubu.com/document_image/80d8108a-5133-4da9-8266-fd803c61a980-1269577.jpg"></p><h5 id="12-2-1-2-4-Convergence-Overall-Shape-and-Creases"><a href="#12-2-1-2-4-Convergence-Overall-Shape-and-Creases" class="headerlink" title="12.2.1.2.4. Convergence: Overall Shape and Creases"></a>12.2.1.2.4. Convergence: Overall Shape and Creases</h5><p><img src="https://img.mubu.com/document_image/38e4f25f-00a3-4cca-a03e-484e404b9886-1269577.jpg"></p><h3 id="12-2-2-Mesh-Simplification-downsampling-：reduce-number-of-mesh-elements-while-maintaining-the-overall-shape"><a href="#12-2-2-Mesh-Simplification-downsampling-：reduce-number-of-mesh-elements-while-maintaining-the-overall-shape" class="headerlink" title="12.2.2. Mesh Simplification (downsampling)：reduce number of mesh elements while maintaining the overall shape"></a>12.2.2. Mesh Simplification (downsampling)：reduce number of mesh elements while maintaining the overall shape</h3><p><img src="https://img.mubu.com/document_image/e8d61bfa-b808-426e-b434-699a9993a169-1269577.jpg"></p><h4 id="12-2-2-1-how？"><a href="#12-2-2-1-how？" class="headerlink" title="12.2.2.1. how？"></a>12.2.2.1. how？</h4><h5 id="12-2-2-1-1-collapsing-An-edge边坍缩"><a href="#12-2-2-1-1-collapsing-An-edge边坍缩" class="headerlink" title="12.2.2.1.1. collapsing An edge边坍缩"></a>12.2.2.1.1. collapsing An edge边坍缩</h5><pre><code>      - Suppose we simplify a mesh using edge collapsing</code></pre><p><img src="https://img.mubu.com/document_image/f53a8e91-d0bd-474a-8a28-441123cb736d-1269577.jpg"></p><pre><code>      - 引入一个概念：Quadric Error Metrics（二次误差度量）</code></pre><p><img src="https://img.mubu.com/document_image/83b063d0-2f29-4996-90c4-edc5bee50a77-1269577.jpg"></p><pre><code>        - • How much geometric error is introduced by simplification?        - • Not a good idea to perform local averaging of vertices (上图左)：这种情况下新简化的三角形（蓝色表示）无法表征原始面片（灰色表示）        - Quadric error: new vertex should minimize its sum of square distance (L2 distance) to previously related triangle planes!（上图右）      - Quadric Error of Edge Collapse</code></pre><p><img src="https://img.mubu.com/document_image/579ca4a5-4e05-450f-bf23-0461ea9b1d49-1269577.jpg"></p><pre><code>      - Simplification via Quadric Error</code></pre><p><img src="https://img.mubu.com/document_image/f5f4902d-74d0-45df-adc1-1668043ae146-1269577.jpg"></p><pre><code>      - result：对于平的地方 坍缩会多一点</code></pre><p><img src="https://img.mubu.com/document_image/be89c221-9a69-416f-bf5b-93bea15a135f-1269577.jpg"></p><h3 id="12-2-3-Mesh-Regularization-same-triangles-大小三角形更均匀一些"><a href="#12-2-3-Mesh-Regularization-same-triangles-大小三角形更均匀一些" class="headerlink" title="12.2.3. Mesh Regularization (same #triangles)大小三角形更均匀一些"></a>12.2.3. Mesh Regularization (same #triangles)大小三角形更均匀一些</h3><p><img src="https://img.mubu.com/document_image/08bb45d5-1fe8-42ab-820b-12167da9fcc6-1269577.jpg"></p><h2 id="12-3-Shadow-Mapping"><a href="#12-3-Shadow-Mapping" class="headerlink" title="12.3. Shadow Mapping"></a>12.3. Shadow Mapping</h2><h3 id="12-3-1-an-image-space-algorithm"><a href="#12-3-1-an-image-space-algorithm" class="headerlink" title="12.3.1. an image-space algorithm"></a>12.3.1. an image-space algorithm</h3><h4 id="12-3-1-1-no-knowledge-of-scene’s-geometry-during-shadow-computation在做shadow-mapping的时候不需要知道场景几何信息"><a href="#12-3-1-1-no-knowledge-of-scene’s-geometry-during-shadow-computation在做shadow-mapping的时候不需要知道场景几何信息" class="headerlink" title="12.3.1.1. no knowledge of scene’s geometry during shadow computation在做shadow mapping的时候不需要知道场景几何信息"></a>12.3.1.1. no knowledge of scene’s geometry during shadow computation在做shadow mapping的时候不需要知道场景几何信息</h4><h4 id="12-3-1-2-must-deal-with-aliasing-artifacts会产生走样现象"><a href="#12-3-1-2-must-deal-with-aliasing-artifacts会产生走样现象" class="headerlink" title="12.3.1.2. must deal with aliasing artifacts会产生走样现象"></a>12.3.1.2. must deal with aliasing artifacts会产生走样现象</h4><h3 id="12-3-2-key-idea：the-points-NOT-in-shadow-must-be-seen-both-by-the-light-and-by-the-camera"><a href="#12-3-2-key-idea：the-points-NOT-in-shadow-must-be-seen-both-by-the-light-and-by-the-camera" class="headerlink" title="12.3.2. key idea：the points NOT in shadow must be seen both by the light and by the camera"></a>12.3.2. key idea：the points NOT in shadow must be seen both by the light and by the camera</h3><h3 id="12-3-3-操作步骤："><a href="#12-3-3-操作步骤：" class="headerlink" title="12.3.3. 操作步骤："></a>12.3.3. 操作步骤：</h3><h4 id="12-3-3-1-pass-1：Render-from-Light"><a href="#12-3-3-1-pass-1：Render-from-Light" class="headerlink" title="12.3.3.1. pass 1：Render from Light"></a>12.3.3.1. pass 1：Render from Light</h4><pre><code>    - Depth image from light source 从光源看场景，得到所看到点的深度图</code></pre><p><img src="https://img.mubu.com/document_image/6925854a-f70c-4fd6-b0b8-16ce3463a2de-1269577.jpg"></p><h4 id="12-3-3-2-pass-2a-Render-from-Eye"><a href="#12-3-3-2-pass-2a-Render-from-Eye" class="headerlink" title="12.3.3.2. pass 2a:Render from Eye"></a>12.3.3.2. pass 2a:Render from Eye</h4><p><img src="https://img.mubu.com/document_image/17d6d186-e456-43ac-95a8-4892a560ae63-1269577.jpg"></p><h4 id="12-3-3-3-Pass-2B-Project-to-light"><a href="#12-3-3-3-Pass-2B-Project-to-light" class="headerlink" title="12.3.3.3. Pass 2B: Project to light"></a>12.3.3.3. Pass 2B: Project to light</h4><p><img src="https://img.mubu.com/document_image/848c208e-3118-43c6-a840-90ad467e58d0-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/c8eb0473-b125-4c32-842c-c083c888ddec-1269577.jpg"></p><h3 id="12-3-4-可视化"><a href="#12-3-4-可视化" class="headerlink" title="12.3.4. 可视化"></a>12.3.4. 可视化</h3><p><img src="https://img.mubu.com/document_image/b2e4852d-8d45-4211-a7a6-928944940055-1269577.jpg"></p><h3 id="12-3-5-很多知名的渲染技术用的就是shadow-mapping"><a href="#12-3-5-很多知名的渲染技术用的就是shadow-mapping" class="headerlink" title="12.3.5. 很多知名的渲染技术用的就是shadow mapping"></a>12.3.5. 很多知名的渲染技术用的就是shadow mapping</h3><h3 id="12-3-6-Basic-shadowing-technique-for-early-animations-Toy-Story-etc-and-in-EVERY-3D-video-game"><a href="#12-3-6-Basic-shadowing-technique-for-early-animations-Toy-Story-etc-and-in-EVERY-3D-video-game" class="headerlink" title="12.3.6. Basic shadowing technique for early animations (Toy Story, etc.) and in EVERY 3D video game"></a>12.3.6. Basic shadowing technique for early animations (Toy Story, etc.) and in EVERY 3D video game</h3><p><img src="https://img.mubu.com/document_image/efd90b06-ac97-4ef0-a075-4a51bdbbff79-1269577.jpg"></p><h3 id="12-3-7-Problems-with-shadow-maps"><a href="#12-3-7-Problems-with-shadow-maps" class="headerlink" title="12.3.7. Problems with shadow maps"></a>12.3.7. Problems with shadow maps</h3><h4 id="12-3-7-1-Hard-shadows-point-lights-only-，软阴影看起来就比较自然些。硬阴影，即为那些完全看不到光的，软阴影为那些部分可见的。后续有人也做了软阴影"><a href="#12-3-7-1-Hard-shadows-point-lights-only-，软阴影看起来就比较自然些。硬阴影，即为那些完全看不到光的，软阴影为那些部分可见的。后续有人也做了软阴影" class="headerlink" title="12.3.7.1. Hard shadows (point lights only) ，软阴影看起来就比较自然些。硬阴影，即为那些完全看不到光的，软阴影为那些部分可见的。后续有人也做了软阴影"></a>12.3.7.1. Hard shadows (point lights only) ，软阴影看起来就比较自然些。硬阴影，即为那些完全看不到光的，软阴影为那些部分可见的。后续有人也做了软阴影</h4><p><img src="https://img.mubu.com/document_image/aea6bd36-c116-4318-b8d2-c1580c3a545f-1269577.jpg"></p><p>Quality depends on shadow map resolution (general problem with image-based techniques)</p><p>Involves equality comparison of floating point depth values means issues of scale, bias, tolerance</p><h1 id="13-Lecture-13-Ray-Tracing-1-Whitted-Style-Ray-Tracing"><a href="#13-Lecture-13-Ray-Tracing-1-Whitted-Style-Ray-Tracing" class="headerlink" title="13. Lecture 13: Ray Tracing 1 (Whitted-Style Ray Tracing)"></a>13. Lecture 13: Ray Tracing 1 (Whitted-Style Ray Tracing)</h1><h2 id="13-1-Why-Ray-Tracing"><a href="#13-1-Why-Ray-Tracing" class="headerlink" title="13.1. Why Ray Tracing?"></a>13.1. Why Ray Tracing?</h2><h3 id="13-1-1-Rasterization-couldn’t-handle-global-effects-well"><a href="#13-1-1-Rasterization-couldn’t-handle-global-effects-well" class="headerlink" title="13.1.1. Rasterization couldn’t handle global effects well"></a>13.1.1. Rasterization couldn’t handle global effects well</h3><p><img src="https://img.mubu.com/document_image/b95cf918-cc2d-420f-ad40-3c589d3bbd35-1269577.jpg"></p><h3 id="13-1-2-Rasterization-is-fast-but-quality-is-relatively-low"><a href="#13-1-2-Rasterization-is-fast-but-quality-is-relatively-low" class="headerlink" title="13.1.2. Rasterization is fast, but quality is relatively low"></a>13.1.2. Rasterization is fast, but quality is relatively low</h3><p><img src="https://img.mubu.com/document_image/cb8ff908-9efb-4a40-abff-08dfa29e2877-1269577.jpg"></p><h3 id="13-1-3-Ray-tracing-is-accurate-but-is-very-slow"><a href="#13-1-3-Ray-tracing-is-accurate-but-is-very-slow" class="headerlink" title="13.1.3. Ray tracing is accurate, but is very slow"></a>13.1.3. Ray tracing is accurate, but is very slow</h3><p><img src="https://img.mubu.com/document_image/92d98945-cf0b-409a-8ab4-5c35b9b0206e-1269577.jpg"></p><h2 id="13-2-Basic-Ray-Tracing-Algorithm"><a href="#13-2-Basic-Ray-Tracing-Algorithm" class="headerlink" title="13.2. Basic Ray-Tracing Algorithm"></a>13.2. Basic Ray-Tracing Algorithm</h2><h3 id="13-2-1-Light-Rays（Three-ideas-about-light-rays）"><a href="#13-2-1-Light-Rays（Three-ideas-about-light-rays）" class="headerlink" title="13.2.1. Light Rays（Three ideas about light rays）"></a>13.2.1. Light Rays（Three ideas about light rays）</h3><ol><li>Light travels in straight lines (though this is wrong)</li><li>Light rays do not “collide” with each other if they cross (though this is still wrong)</li><li>Light rays travel from the light sources to the eye (but the physics is invariant under path reversal - reciprocity可逆性).</li></ol><h3 id="13-2-2-Ray-Casting，简单的光线投射模型，还是认为光源只反射一次"><a href="#13-2-2-Ray-Casting，简单的光线投射模型，还是认为光源只反射一次" class="headerlink" title="13.2.2. Ray Casting，简单的光线投射模型，还是认为光源只反射一次"></a>13.2.2. Ray Casting，简单的光线投射模型，还是认为光源只反射一次</h3><h4 id="13-2-2-1-Appel-1968-Ray-casting"><a href="#13-2-2-1-Appel-1968-Ray-casting" class="headerlink" title="13.2.2.1. Appel 1968 - Ray casting"></a>13.2.2.1. Appel 1968 - Ray casting</h4><p><img src="https://img.mubu.com/document_image/79e34106-7ff7-4376-9de6-74563cbb93b1-1269577.jpg"></p><pre><code>    - \1. Generate an image by casting one ray per pixel ，首先从视角或者相机对屏幕的每个像素发出一条光线    - \2. Check for shadows by sending a ray to the light 根据第一步得到的点在连接光源，看该点是否在阴影内，若不在又能被视角看到 则投射到屏幕上</code></pre><h4 id="13-2-2-2-Ray-Casting-Generating-Eye-Rays"><a href="#13-2-2-2-Ray-Casting-Generating-Eye-Rays" class="headerlink" title="13.2.2.2. Ray Casting - Generating Eye Rays"></a>13.2.2.2. Ray Casting - Generating Eye Rays</h4><p>这里注意从eye point投射的光线跟场景的交点，只关注最近的相交点</p><p><img src="https://img.mubu.com/document_image/7609acab-194c-43ee-aa74-b69b30074cd8-1269577.jpg"></p><h4 id="13-2-2-3-Ray-Casting-Shading-Pixels-Local-Only"><a href="#13-2-2-3-Ray-Casting-Shading-Pixels-Local-Only" class="headerlink" title="13.2.2.3. Ray Casting - Shading Pixels (Local Only)"></a>13.2.2.3. Ray Casting - Shading Pixels (Local Only)</h4><p>从相交点连接光源，判断是否光源可见，若不在阴影内，则计算局部shading得到像素颜色</p><p><img src="https://img.mubu.com/document_image/91f2df1e-79b1-4581-9302-354226de7e73-1269577.jpg"></p><h3 id="13-2-3-Recursive-Whitted-Style-Ray-Tracing递归，完美反射和折射，多次计算光线传播方向"><a href="#13-2-3-Recursive-Whitted-Style-Ray-Tracing递归，完美反射和折射，多次计算光线传播方向" class="headerlink" title="13.2.3. Recursive (Whitted-Style) Ray Tracing递归，完美反射和折射，多次计算光线传播方向"></a>13.2.3. Recursive (Whitted-Style) Ray Tracing递归，完美反射和折射，多次计算光线传播方向</h3><h4 id="13-2-3-1-introduction"><a href="#13-2-3-1-introduction" class="headerlink" title="13.2.3.1. introduction"></a>13.2.3.1. introduction</h4><p><img src="https://img.mubu.com/document_image/ef855568-533e-439c-84d5-5735f751b9e9-1269577.jpg"></p><h4 id="13-2-3-2-Recursive-Ray-Tracing-，注意这里的反射和折射，在昨晚shadow-rays判断之后-会把可见的着色（红圈处）都加到pixel上面"><a href="#13-2-3-2-Recursive-Ray-Tracing-，注意这里的反射和折射，在昨晚shadow-rays判断之后-会把可见的着色（红圈处）都加到pixel上面" class="headerlink" title="13.2.3.2. Recursive Ray Tracing ，注意这里的反射和折射，在昨晚shadow rays判断之后 会把可见的着色（红圈处）都加到pixel上面"></a>13.2.3.2. Recursive Ray Tracing ，注意这里的反射和折射，在昨晚shadow rays判断之后 会把可见的着色（红圈处）都加到pixel上面</h4><p><img src="https://img.mubu.com/document_image/377f8302-b0f2-4d6f-b945-85acdb5e836a-1269577.jpg"></p><h4 id="13-2-3-3-技术问题："><a href="#13-2-3-3-技术问题：" class="headerlink" title="13.2.3.3. 技术问题："></a>13.2.3.3. 技术问题：</h4><h5 id="13-2-3-3-1-Ray-Surface-Intersection"><a href="#13-2-3-3-1-Ray-Surface-Intersection" class="headerlink" title="13.2.3.3.1. Ray-Surface Intersection"></a>13.2.3.3.1. Ray-Surface Intersection</h5><ol><li>Ray Equation</li></ol><p><img src="https://img.mubu.com/document_image/2b79dc2b-afb3-44ed-acd7-388007095893-1269577.jpg"></p><ol start="2"><li>Ray Intersection With Sphere ，注意这里的t要是正值</li></ol><p><img src="https://img.mubu.com/document_image/4d2ff49c-1c1c-4392-a9f6-16c67d0eafb2-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/25e9d21d-2505-4915-b194-46d940ed519f-1269577.jpg"></p><ol start="3"><li>Ray Intersection With Implicit Surface</li></ol><p><img src="https://img.mubu.com/document_image/c3b5134a-ec92-495c-aeae-f326da621387-1269577.jpg"></p><ol start="4"><li>Ray Intersection With Triangle Mesh</li></ol><p><img src="https://img.mubu.com/document_image/ee0102c0-586e-4d09-a353-fd1aebed18aa-1269577.jpg"></p><pre><code>        - Why?          - • Rendering: visibility, shadows, lighting …          - • Geometry: inside/outside test ：这里一般情况，假如射线在内部，交点奇数，外部偶数        - How to compute? Let’s break this down:          - • Simple idea: just intersect ray with each triangle            - 解法一：Ray-plane and then inside</code></pre><p><img src="https://img.mubu.com/document_image/1c835afa-240f-4b5a-a3ea-70a4650cb78b-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/fb6d38db-1a83-4eb0-84c4-25384e9a7634-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/21741664-4370-480e-b023-01036a7f6e0f-1269577.jpg"></p><pre><code>              - Plane Equation</code></pre><p>  <img src="https://img.mubu.com/document_image/6cc8df13-bf1e-4d92-93e0-b04e5877db0e-1269577.jpg"></p><pre><code>              - Ray Intersection With Plane</code></pre><p>  <img src="https://img.mubu.com/document_image/56459594-1472-40aa-b2db-38c1d2c32195-1269577.jpg"></p><pre><code>              - 判断inside or not：向量叉乘            - 解法二：Möller Trumbore Algorithm ，注意这里t b1 b2的隐藏条件</code></pre><p><img src="https://img.mubu.com/document_image/bac327d6-e482-48da-8966-acbcbdf9f44b-1269577.jpg"></p><pre><code>          - • Simple, but slow (acceleration?)            - Accelerating Ray-Surface Intersection              - Ray Tracing – Performance Challenges</code></pre><p>  <img src="https://img.mubu.com/document_image/df90ff00-71fd-4afc-87a1-9830825d1947-1269577.jpg"></p><pre><code>            - Bounding Volumes              - Bounding Volumes</code></pre><p>  <img src="https://img.mubu.com/document_image/fc72d87c-9ceb-44ff-8a27-aa55cd898fdd-1269577.jpg"></p><pre><code>              - Ray-Intersection With Box</code></pre><p>  <img src="https://img.mubu.com/document_image/dbcff5b3-673b-4d1d-ad8e-2d37174c00a2-1269577.jpg"></p><pre><code>              - Ray Intersection with Axis-Aligned Box</code></pre><p>  <img src="https://img.mubu.com/document_image/e1f8935b-4626-4132-a018-a9584334c88d-1269577.jpg"></p><p>  <img src="https://img.mubu.com/document_image/368e47ec-23f2-4c69-bf8d-e11041eaa02c-1269577.jpg"></p><p>  <img src="https://img.mubu.com/document_image/704ca734-7afe-4416-b4b5-906b22cbcf18-1269577.jpg"></p><pre><code>              - Why Axis-Aligned?</code></pre><p>  <img src="https://img.mubu.com/document_image/0173513a-f882-47fe-9881-4d6463983604-1269577.jpg"></p><pre><code>          - • Note: can have 0, 1 intersections (ignoring multiple intersections)</code></pre><h1 id="14-Lecture-14-Ray-Tracing-2-Acceleration-amp-Radiometry"><a href="#14-Lecture-14-Ray-Tracing-2-Acceleration-amp-Radiometry" class="headerlink" title="14. Lecture 14: Ray Tracing 2(Acceleration &amp; Radiometry)"></a>14. Lecture 14: Ray Tracing 2(Acceleration &amp; Radiometry)</h1><h2 id="14-1-Using-AABBs-to-accelerate-ray-tracing"><a href="#14-1-Using-AABBs-to-accelerate-ray-tracing" class="headerlink" title="14.1. Using AABBs to accelerate ray tracing"></a>14.1. Using AABBs to accelerate ray tracing</h2><h3 id="14-1-1-Uniform-Spatial-Partitions-Grids"><a href="#14-1-1-Uniform-Spatial-Partitions-Grids" class="headerlink" title="14.1.1. Uniform Spatial Partitions (Grids)"></a>14.1.1. Uniform Spatial Partitions (Grids)</h3><h4 id="14-1-1-1-Preprocess-–-Build-Acceleration-Grid"><a href="#14-1-1-1-Preprocess-–-Build-Acceleration-Grid" class="headerlink" title="14.1.1.1. Preprocess – Build Acceleration Grid"></a>14.1.1.1. Preprocess – Build Acceleration Grid</h4><p><img src="https://img.mubu.com/document_image/f522ca0b-ebd6-4b5e-bed6-851f19b30a88-1269577.jpg"></p><pre><code>    - 这里对于直线的下一个格子寻找，对于该直线，下一个格子的位置要么是右，要么是上</code></pre><h4 id="14-1-1-2-problem"><a href="#14-1-1-2-problem" class="headerlink" title="14.1.1.2. problem"></a>14.1.1.2. problem</h4><h5 id="14-1-1-2-1-Grid-Resolution"><a href="#14-1-1-2-1-Grid-Resolution" class="headerlink" title="14.1.1.2.1. Grid Resolution?"></a>14.1.1.2.1. Grid Resolution?</h5><p><img src="https://img.mubu.com/document_image/ab0900d1-e3d3-4534-a768-1196754e541d-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/cb6976a2-d1f6-45c5-b3ad-02b5b2bf65ec-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/1ed418ea-00d4-4e08-8f0e-d2c859259a9e-1269577.jpg"></p><h5 id="14-1-1-2-2-uniform"><a href="#14-1-1-2-2-uniform" class="headerlink" title="14.1.1.2.2. uniform"></a>14.1.1.2.2. uniform</h5><p><img src="https://img.mubu.com/document_image/b6facfbf-9166-4a8a-b8e3-fea11205d9a8-1269577.jpg"></p><pre><code>      - 对于第二个场景，很多非均匀物体，对于其寻找求交会很慢</code></pre><h3 id="14-1-2-Spatial-partitions"><a href="#14-1-2-Spatial-partitions" class="headerlink" title="14.1.2. Spatial partitions"></a>14.1.2. Spatial partitions</h3><p>直观的想法，是不是在稀疏的地方不需要那么密的格子</p><h4 id="14-1-2-1-Spatial-Partitioning-Examples"><a href="#14-1-2-1-Spatial-Partitioning-Examples" class="headerlink" title="14.1.2.1. Spatial Partitioning Examples"></a>14.1.2.1. Spatial Partitioning Examples</h4><p><img src="https://img.mubu.com/document_image/75795599-645a-41eb-ad47-9f1c57674fbf-1269577.jpg"></p><pre><code>    - 八叉树，跟纬度有关系，在一维下是二叉树，二维如图四叉树，三维下是八叉树，以此类推，更高纬度更多，显然不太好用    - kd-tree，跟八叉树类似，但是每次只沿着轴向分两块，xy或者xyz交替划分，达到均匀，横平竖直    - bsp-tree：纬度问题以及不是横平竖直的分割</code></pre><h4 id="14-1-2-2-KD-Tree-Pre-Processing-（这一步骤在光线追踪之前），这里是简化表示，其实每次分割之后，左右都要继续分割，这里只显示每次只分割一半"><a href="#14-1-2-2-KD-Tree-Pre-Processing-（这一步骤在光线追踪之前），这里是简化表示，其实每次分割之后，左右都要继续分割，这里只显示每次只分割一半" class="headerlink" title="14.1.2.2. KD-Tree Pre-Processing （这一步骤在光线追踪之前），这里是简化表示，其实每次分割之后，左右都要继续分割，这里只显示每次只分割一半"></a>14.1.2.2. KD-Tree Pre-Processing （这一步骤在光线追踪之前），这里是简化表示，其实每次分割之后，左右都要继续分割，这里只显示每次只分割一半</h4><p><img src="https://img.mubu.com/document_image/5ee30818-f399-46e0-9ec3-914bb98a3c54-1269577.jpg"></p><h4 id="14-1-2-3-Data-Structure-for-KD-Trees-，注意分割方向xyz轴依次，分割不一定是均分，结点包含两个子结点，中间结点不存储物体，只存在叶节点中"><a href="#14-1-2-3-Data-Structure-for-KD-Trees-，注意分割方向xyz轴依次，分割不一定是均分，结点包含两个子结点，中间结点不存储物体，只存在叶节点中" class="headerlink" title="14.1.2.3. Data Structure for KD-Trees ，注意分割方向xyz轴依次，分割不一定是均分，结点包含两个子结点，中间结点不存储物体，只存在叶节点中"></a>14.1.2.3. Data Structure for KD-Trees ，注意分割方向xyz轴依次，分割不一定是均分，结点包含两个子结点，中间结点不存储物体，只存在叶节点中</h4><p><img src="https://img.mubu.com/document_image/54b868ef-5a12-41c1-8c71-588a0605d031-1269577.jpg"></p><h4 id="14-1-2-4-Traversing-a-KD-Tree"><a href="#14-1-2-4-Traversing-a-KD-Tree" class="headerlink" title="14.1.2.4. Traversing a KD-Tree"></a>14.1.2.4. Traversing a KD-Tree</h4><p><img src="https://img.mubu.com/document_image/61968fae-2c1b-487f-8e51-465fe8013613-1269577.jpg"></p><h4 id="14-1-2-5-kd-tree存在的问题"><a href="#14-1-2-5-kd-tree存在的问题" class="headerlink" title="14.1.2.5. kd-tree存在的问题"></a>14.1.2.5. kd-tree存在的问题</h4><pre><code>    - aabb与物体的求交判断    - 物体可能存在与多个aabb中</code></pre><h3 id="14-1-3-Object-Partitions-amp-Bounding-Volume-Hierarchy-BVH"><a href="#14-1-3-Object-Partitions-amp-Bounding-Volume-Hierarchy-BVH" class="headerlink" title="14.1.3. Object Partitions &amp; Bounding Volume Hierarchy (BVH)"></a>14.1.3. Object Partitions &amp; Bounding Volume Hierarchy (BVH)</h3><h4 id="14-1-3-1-Bounding-Volume-Hierarchy-BVH-，以物体分割为导向，而不是空间分割"><a href="#14-1-3-1-Bounding-Volume-Hierarchy-BVH-，以物体分割为导向，而不是空间分割" class="headerlink" title="14.1.3.1. Bounding Volume Hierarchy (BVH) ，以物体分割为导向，而不是空间分割"></a>14.1.3.1. Bounding Volume Hierarchy (BVH) ，以物体分割为导向，而不是空间分割</h4><p><img src="https://img.mubu.com/document_image/be57e146-f0a0-4413-821c-673663fc5f80-1269577.jpg"></p><h4 id="14-1-3-2-Summary-Building-BVHs"><a href="#14-1-3-2-Summary-Building-BVHs" class="headerlink" title="14.1.3.2. Summary: Building BVHs"></a>14.1.3.2. Summary: Building BVHs</h4><p><img src="https://img.mubu.com/document_image/1f4680ce-2da5-4e61-9a3b-adfa4d40d2cb-1269577.jpg"></p><h4 id="14-1-3-3-Building-BVHs-启发式的分割算法，其中第二个目的是让分割的两部分面片数量接近系统，搜索深度相近，快速选择算法"><a href="#14-1-3-3-Building-BVHs-启发式的分割算法，其中第二个目的是让分割的两部分面片数量接近系统，搜索深度相近，快速选择算法" class="headerlink" title="14.1.3.3. Building BVHs 启发式的分割算法，其中第二个目的是让分割的两部分面片数量接近系统，搜索深度相近，快速选择算法"></a>14.1.3.3. Building BVHs 启发式的分割算法，其中第二个目的是让分割的两部分面片数量接近系统，搜索深度相近，快速选择算法</h4><p><img src="https://img.mubu.com/document_image/91f8306b-5dff-46ae-8b09-0e12e8ab3b32-1269577.jpg"></p><h4 id="14-1-3-4-Data-Structure-for-BVHs"><a href="#14-1-3-4-Data-Structure-for-BVHs" class="headerlink" title="14.1.3.4. Data Structure for BVHs"></a>14.1.3.4. Data Structure for BVHs</h4><p><img src="https://img.mubu.com/document_image/78614f12-402b-4b50-bd02-30a737266846-1269577.jpg"></p><h4 id="14-1-3-5-BVH-Traversal"><a href="#14-1-3-5-BVH-Traversal" class="headerlink" title="14.1.3.5. BVH Traversal"></a>14.1.3.5. BVH Traversal</h4><p><img src="https://img.mubu.com/document_image/2e3318ea-44f1-4b50-a4ef-ba095205053e-1269577.jpg"></p><h4 id="14-1-3-6-Spatial-vs-Object-Partitions"><a href="#14-1-3-6-Spatial-vs-Object-Partitions" class="headerlink" title="14.1.3.6. Spatial vs Object Partitions"></a>14.1.3.6. Spatial vs Object Partitions</h4><p><img src="https://img.mubu.com/document_image/9850115b-86bb-4dd7-adc4-ff5294f3955e-1269577.jpg"></p><h2 id="14-2-Basic-radiometry-辐射度量学"><a href="#14-2-Basic-radiometry-辐射度量学" class="headerlink" title="14.2. Basic radiometry (辐射度量学)"></a>14.2. Basic radiometry (辐射度量学)</h2><h3 id="14-2-1-Radiometry-—-Motivation，主要解决blin-phong模型中的问题，毕竟连单位都没有-，可以精确地给实际的光下一些物理量的定义"><a href="#14-2-1-Radiometry-—-Motivation，主要解决blin-phong模型中的问题，毕竟连单位都没有-，可以精确地给实际的光下一些物理量的定义" class="headerlink" title="14.2.1. Radiometry — Motivation，主要解决blin-phong模型中的问题，毕竟连单位都没有 ，可以精确地给实际的光下一些物理量的定义"></a>14.2.1. Radiometry — Motivation，主要解决blin-phong模型中的问题，毕竟连单位都没有 ，可以精确地给实际的光下一些物理量的定义</h3><p><img src="https://img.mubu.com/document_image/b045ad7e-11d2-4e74-b9c9-92586fba4e47-1269577.jpg"></p><h3 id="14-2-2-Radiometry：新术语，辐射通量、辐射强度、辐射度、辐射，这里不考虑光的时间属性"><a href="#14-2-2-Radiometry：新术语，辐射通量、辐射强度、辐射度、辐射，这里不考虑光的时间属性" class="headerlink" title="14.2.2. Radiometry：新术语，辐射通量、辐射强度、辐射度、辐射，这里不考虑光的时间属性"></a>14.2.2. Radiometry：新术语，辐射通量、辐射强度、辐射度、辐射，这里不考虑光的时间属性</h3><p><img src="https://img.mubu.com/document_image/8eec30ee-7fc9-403c-9a7b-159bf6aacab7-1269577.jpg"></p><h3 id="14-2-3-Radiant-Energy-and-Flux-Power"><a href="#14-2-3-Radiant-Energy-and-Flux-Power" class="headerlink" title="14.2.3. Radiant Energy and Flux (Power)"></a>14.2.3. Radiant Energy and Flux (Power)</h3><h4 id="14-2-3-1-Radiant-Energy-and-Flux-Power-，注意辐射能量和单位时间内的能量Radiant-flux-power-区别，在光学中描述功率用lum描述，也就是描述光有多亮"><a href="#14-2-3-1-Radiant-Energy-and-Flux-Power-，注意辐射能量和单位时间内的能量Radiant-flux-power-区别，在光学中描述功率用lum描述，也就是描述光有多亮" class="headerlink" title="14.2.3.1. Radiant Energy and Flux (Power) ，注意辐射能量和单位时间内的能量Radiant flux (power)区别，在光学中描述功率用lum描述，也就是描述光有多亮"></a>14.2.3.1. Radiant Energy and Flux (Power) ，注意辐射能量和单位时间内的能量Radiant flux (power)区别，在光学中描述功率用lum描述，也就是描述光有多亮</h4><p><img src="https://img.mubu.com/document_image/cc670ce3-e171-4ed1-bc4d-d6d23427d13c-1269577.jpg"></p><h4 id="14-2-3-2-Flux-–-photons-flowing-through-a-sensor-in-unit-time"><a href="#14-2-3-2-Flux-–-photons-flowing-through-a-sensor-in-unit-time" class="headerlink" title="14.2.3.2. Flux – #photons flowing through a sensor in unit time"></a>14.2.3.2. Flux – #photons flowing through a sensor in unit time</h4><p><img src="https://img.mubu.com/document_image/8f5c61c3-b537-417d-aed2-eb4254477a28-1269577.jpg"></p><h4 id="14-2-3-3-Important-Light-Measurements-of-Interest-左：光发出的能量；中：表面接收到的光辐射度；右：光传输过程的辐射"><a href="#14-2-3-3-Important-Light-Measurements-of-Interest-左：光发出的能量；中：表面接收到的光辐射度；右：光传输过程的辐射" class="headerlink" title="14.2.3.3. Important Light Measurements of Interest ,左：光发出的能量；中：表面接收到的光辐射度；右：光传输过程的辐射"></a>14.2.3.3. Important Light Measurements of Interest ,左：光发出的能量；中：表面接收到的光辐射度；右：光传输过程的辐射</h4><p><img src="https://img.mubu.com/document_image/edb1260c-0ae7-4df1-8427-372b128f914c-1269577.jpg"></p><h3 id="14-2-4-Radiant-Intensity"><a href="#14-2-4-Radiant-Intensity" class="headerlink" title="14.2.4. Radiant Intensity"></a>14.2.4. Radiant Intensity</h3><h4 id="14-2-4-1-Radiant-Intensity-：立体角，candela是标准单位"><a href="#14-2-4-1-Radiant-Intensity-：立体角，candela是标准单位" class="headerlink" title="14.2.4.1. Radiant Intensity ：立体角，candela是标准单位"></a>14.2.4.1. Radiant Intensity ：立体角，candela是标准单位</h4><p><img src="https://img.mubu.com/document_image/2d9eb299-69d1-4831-984d-6618a8f69ff1-1269577.jpg"></p><h4 id="14-2-4-2-Angles-and-Solid-Angles-，类比思想"><a href="#14-2-4-2-Angles-and-Solid-Angles-，类比思想" class="headerlink" title="14.2.4.2. Angles and Solid Angles ，类比思想"></a>14.2.4.2. Angles and Solid Angles ，类比思想</h4><p><img src="https://img.mubu.com/document_image/ff5a079a-4778-4639-842a-f49fe8586d12-1269577.jpg"></p><h4 id="14-2-4-3-Differential-Solid-Angles-微分立体角"><a href="#14-2-4-3-Differential-Solid-Angles-微分立体角" class="headerlink" title="14.2.4.3. Differential Solid Angles 微分立体角"></a>14.2.4.3. Differential Solid Angles 微分立体角</h4><p><img src="https://img.mubu.com/document_image/13198b01-b010-47bd-98c3-80a8192e7e8a-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/85034118-41b9-4aac-a098-9fdfa89fefc5-1269577.jpg"></p><h5 id="14-2-4-3-1-w-as-a-direction-vector-在光度量中，用w表示一个方向，其实可以theta-和-phi表示"><a href="#14-2-4-3-1-w-as-a-direction-vector-在光度量中，用w表示一个方向，其实可以theta-和-phi表示" class="headerlink" title="14.2.4.3.1. w as a direction vector ,在光度量中，用w表示一个方向，其实可以theta 和 phi表示"></a>14.2.4.3.1. w as a direction vector ,在光度量中，用w表示一个方向，其实可以theta 和 phi表示</h5><p><img src="https://img.mubu.com/document_image/b075a627-9c80-4cca-bb24-d23e0e272d67-1269577.jpg"></p><h4 id="14-2-4-4-Isotropic-Point-Source-各向同性点源"><a href="#14-2-4-4-Isotropic-Point-Source-各向同性点源" class="headerlink" title="14.2.4.4. Isotropic Point Source 各向同性点源"></a>14.2.4.4. Isotropic Point Source 各向同性点源</h4><p><img src="https://img.mubu.com/document_image/96ba85dc-f378-4f5e-be08-3948ea261645-1269577.jpg"></p><h4 id="14-2-4-5-Modern-LED-Light"><a href="#14-2-4-5-Modern-LED-Light" class="headerlink" title="14.2.4.5. Modern LED Light"></a>14.2.4.5. Modern LED Light</h4><p><img src="https://img.mubu.com/document_image/33c71e9f-dcd3-4624-8ab1-e3ececf82be2-1269577.jpg"></p><h1 id="15-Lecture-15-Ray-Tracing-3-Light-Transport-amp-Global-Illumination"><a href="#15-Lecture-15-Ray-Tracing-3-Light-Transport-amp-Global-Illumination" class="headerlink" title="15. Lecture 15:Ray Tracing 3 (Light Transport &amp; Global Illumination)"></a>15. Lecture 15:Ray Tracing 3 (Light Transport &amp; Global Illumination)</h1><h2 id="15-1-Radiometry-cont"><a href="#15-1-Radiometry-cont" class="headerlink" title="15.1. Radiometry cont."></a>15.1. Radiometry cont.</h2><h3 id="15-1-1-Reviewing-Concepts"><a href="#15-1-1-Reviewing-Concepts" class="headerlink" title="15.1.1. Reviewing Concepts"></a>15.1.1. Reviewing Concepts</h3><p><img src="https://img.mubu.com/document_image/45a42ae3-757b-41df-85b6-2611c5adac92-1269577.jpg"></p><pre><code>    后面的概念中，图形学中，说能量的话一般都指的是unit time，不考虑总得能量。尤其是注意这几个概念的区分</code></pre><h3 id="15-1-2-Differential-Solid-Angles-微分立体角"><a href="#15-1-2-Differential-Solid-Angles-微分立体角" class="headerlink" title="15.1.2. Differential Solid Angles 微分立体角"></a>15.1.2. Differential Solid Angles 微分立体角</h3><p><img src="https://img.mubu.com/document_image/71847e3e-89ff-4410-a53f-d0a30c75b084-1269577.jpg"></p><h3 id="15-1-3-Irradiance"><a href="#15-1-3-Irradiance" class="headerlink" title="15.1.3. Irradiance"></a>15.1.3. Irradiance</h3><h4 id="15-1-3-1-Irradiance，注意该处的unit-area，必须是与光线垂直的方向，该处是省略了cos-theta"><a href="#15-1-3-1-Irradiance，注意该处的unit-area，必须是与光线垂直的方向，该处是省略了cos-theta" class="headerlink" title="15.1.3.1. Irradiance，注意该处的unit area，必须是与光线垂直的方向，该处是省略了cos theta"></a>15.1.3.1. Irradiance，注意该处的unit area，必须是与光线垂直的方向，该处是省略了cos theta</h4><p><img src="https://img.mubu.com/document_image/60bc5a9e-e5a0-48a7-8171-9a7318fa5f09-1269577.jpg"></p><h5 id="15-1-3-1-1-Lambert’s-Cosine-Law"><a href="#15-1-3-1-1-Lambert’s-Cosine-Law" class="headerlink" title="15.1.3.1.1. Lambert’s Cosine Law"></a>15.1.3.1.1. Lambert’s Cosine Law</h5><p>  <img src="https://img.mubu.com/document_image/3cec2592-db66-438e-ab1d-6ffeb93a7723-1269577.jpg"></p><h4 id="15-1-3-2-Why-Do-We-Have-Seasons"><a href="#15-1-3-2-Why-Do-We-Have-Seasons" class="headerlink" title="15.1.3.2. Why Do We Have Seasons?"></a>15.1.3.2. Why Do We Have Seasons?</h4><p><img src="https://img.mubu.com/document_image/ea4caa79-5ea0-4a68-a895-0a4efdbcc59d-1269577.jpg"></p><h4 id="15-1-3-3-Correction-Irradiance-Falloff，注意衰减的是谁，这里不是intensity，因为intensity在传播过程中是不变得。根据intensity的概念，单位立体角，随着r的增加，相应的对应的A也会增大，故intensity不变"><a href="#15-1-3-3-Correction-Irradiance-Falloff，注意衰减的是谁，这里不是intensity，因为intensity在传播过程中是不变得。根据intensity的概念，单位立体角，随着r的增加，相应的对应的A也会增大，故intensity不变" class="headerlink" title="15.1.3.3. Correction: Irradiance Falloff，注意衰减的是谁，这里不是intensity，因为intensity在传播过程中是不变得。根据intensity的概念，单位立体角，随着r的增加，相应的对应的A也会增大，故intensity不变"></a>15.1.3.3. Correction: Irradiance Falloff，注意衰减的是谁，这里不是intensity，因为intensity在传播过程中是不变得。根据intensity的概念，单位立体角，随着r的增加，相应的对应的A也会增大，故intensity不变</h4><p><img src="https://img.mubu.com/document_image/c6312157-b340-46fa-bb2c-0d7392acabc0-1269577.jpg"></p><h3 id="15-1-4-Radiance"><a href="#15-1-4-Radiance" class="headerlink" title="15.1.4. Radiance"></a>15.1.4. Radiance</h3><h4 id="15-1-4-1-Radiance，描述光传播中的性质"><a href="#15-1-4-1-Radiance，描述光传播中的性质" class="headerlink" title="15.1.4.1. Radiance，描述光传播中的性质"></a>15.1.4.1. Radiance，描述光传播中的性质</h4><p><img src="https://img.mubu.com/document_image/62385ff6-c87a-4ced-a64a-8069c87f2dc7-1269577.jpg"></p><h4 id="15-1-4-2-Radiance-definition"><a href="#15-1-4-2-Radiance-definition" class="headerlink" title="15.1.4.2. Radiance-definition"></a>15.1.4.2. Radiance-definition</h4><p><img src="https://img.mubu.com/document_image/5a853d88-a616-4104-99cc-6fc9cc17cee4-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/d5293c1c-367a-4a42-a49f-fd5e009efa63-1269577.jpg"></p><h4 id="15-1-4-3-Incident-Radiance-，联系radiance与irradiance，从w方向上过来的光线打到dA上获得的能量，dw-Cos-theta是法向上的投影；-Irradiance-per-solid-angle-，radiance具有方向性"><a href="#15-1-4-3-Incident-Radiance-，联系radiance与irradiance，从w方向上过来的光线打到dA上获得的能量，dw-Cos-theta是法向上的投影；-Irradiance-per-solid-angle-，radiance具有方向性" class="headerlink" title="15.1.4.3. Incident Radiance ，联系radiance与irradiance，从w方向上过来的光线打到dA上获得的能量，dw Cos theta是法向上的投影； Irradiance per solid angle ，radiance具有方向性"></a>15.1.4.3. Incident Radiance ，联系radiance与irradiance，从w方向上过来的光线打到dA上获得的能量，dw Cos theta是法向上的投影； Irradiance per solid angle ，radiance具有方向性</h4><p><img src="https://img.mubu.com/document_image/67b08643-ed16-44de-b7e6-8e6c76d761f9-1269577.jpg"></p><h4 id="15-1-4-4-Exiting-Radiance，联系intensity与radiance之间的关系，从面dA往一个方向w发出的intensity，-Intensity-per-projected-unit-area"><a href="#15-1-4-4-Exiting-Radiance，联系intensity与radiance之间的关系，从面dA往一个方向w发出的intensity，-Intensity-per-projected-unit-area" class="headerlink" title="15.1.4.4. Exiting Radiance，联系intensity与radiance之间的关系，从面dA往一个方向w发出的intensity， Intensity per projected unit area"></a>15.1.4.4. Exiting Radiance，联系intensity与radiance之间的关系，从面dA往一个方向w发出的intensity， Intensity per projected unit area</h4><p><img src="https://img.mubu.com/document_image/978102bd-0704-4c08-975d-74d74d0eeba5-1269577.jpg"></p><h4 id="15-1-4-5-Irradiance-vs-Radiance"><a href="#15-1-4-5-Irradiance-vs-Radiance" class="headerlink" title="15.1.4.5. Irradiance vs. Radiance"></a>15.1.4.5. Irradiance vs. Radiance</h4><p><img src="https://img.mubu.com/document_image/6d038dcc-249a-46aa-b199-69c57a2e5a93-1269577.jpg"></p><h2 id="15-2-Light-transport-（Bidirectional-Reflectance-Distribution-Function-BRDF-双向反射分布函数）"><a href="#15-2-Light-transport-（Bidirectional-Reflectance-Distribution-Function-BRDF-双向反射分布函数）" class="headerlink" title="15.2. Light transport （Bidirectional Reflectance Distribution Function (BRDF)双向反射分布函数）"></a>15.2. Light transport （Bidirectional Reflectance Distribution Function (BRDF)双向反射分布函数）</h2><h3 id="15-2-1-Reflection-at-a-Point：-radiance-》irradiance-》radiance"><a href="#15-2-1-Reflection-at-a-Point：-radiance-》irradiance-》radiance" class="headerlink" title="15.2.1. Reflection at a Point： radiance-》irradiance-》radiance"></a>15.2.1. Reflection at a Point： radiance-》irradiance-》radiance</h3><p><img src="https://img.mubu.com/document_image/c3680896-76a8-4308-ba58-286d71749aa0-1269577.jpg"></p><h3 id="15-2-2-BRDF，从任意一个w入射方向上得到的irradiance是如何分配到各个立体角上的"><a href="#15-2-2-BRDF，从任意一个w入射方向上得到的irradiance是如何分配到各个立体角上的" class="headerlink" title="15.2.2. BRDF，从任意一个w入射方向上得到的irradiance是如何分配到各个立体角上的"></a>15.2.2. BRDF，从任意一个w入射方向上得到的irradiance是如何分配到各个立体角上的</h3><p><img src="https://img.mubu.com/document_image/dc1cef55-e1f8-4f05-9674-ea36425f09ce-1269577.jpg"></p><h3 id="15-2-3-The-reflection-equation"><a href="#15-2-3-The-reflection-equation" class="headerlink" title="15.2.3. The reflection equation"></a>15.2.3. The reflection equation</h3><h4 id="15-2-3-1-The-Reflection-Equation-对某一个着色点，所有光照（不仅仅包含光源，还包括由点出射的radiance）对观测光线的贡献。任何点的出射radiance都有可能作为其他点的入射radiance。"><a href="#15-2-3-1-The-Reflection-Equation-对某一个着色点，所有光照（不仅仅包含光源，还包括由点出射的radiance）对观测光线的贡献。任何点的出射radiance都有可能作为其他点的入射radiance。" class="headerlink" title="15.2.3.1. The Reflection Equation 对某一个着色点，所有光照（不仅仅包含光源，还包括由点出射的radiance）对观测光线的贡献。任何点的出射radiance都有可能作为其他点的入射radiance。"></a>15.2.3.1. The Reflection Equation 对某一个着色点，所有光照（不仅仅包含光源，还包括由点出射的radiance）对观测光线的贡献。任何点的出射radiance都有可能作为其他点的入射radiance。</h4><p><img src="https://img.mubu.com/document_image/c25a70c8-195d-424a-85bc-d8344ea7b37a-1269577.jpg"></p><h4 id="15-2-3-2-Challenge-Recursive-Equation"><a href="#15-2-3-2-Challenge-Recursive-Equation" class="headerlink" title="15.2.3.2. Challenge: Recursive Equation"></a>15.2.3.2. Challenge: Recursive Equation</h4><p><img src="https://img.mubu.com/document_image/29256aa1-146c-4690-a068-7cbaab47aabf-1269577.jpg"></p><h3 id="15-2-4-The-rendering-equation"><a href="#15-2-4-The-rendering-equation" class="headerlink" title="15.2.4. The rendering equation"></a>15.2.4. The rendering equation</h3><h4 id="15-2-4-1-The-Rendering-Equation-，加了自发光项"><a href="#15-2-4-1-The-Rendering-Equation-，加了自发光项" class="headerlink" title="15.2.4.1. The Rendering Equation ，加了自发光项"></a>15.2.4.1. The Rendering Equation ，加了自发光项</h4><p><img src="https://img.mubu.com/document_image/96005ff8-846c-4939-a168-3f21a62eb3e1-1269577.jpg"></p><h3 id="15-2-5-Global-illumination：Understanding-the-rendering-equation"><a href="#15-2-5-Global-illumination：Understanding-the-rendering-equation" class="headerlink" title="15.2.5. Global illumination：Understanding the rendering equation"></a>15.2.5. Global illumination：Understanding the rendering equation</h3><h4 id="15-2-5-1-Reflection-Equation"><a href="#15-2-5-1-Reflection-Equation" class="headerlink" title="15.2.5.1. Reflection Equation"></a>15.2.5.1. Reflection Equation</h4><p><img src="https://img.mubu.com/document_image/680b6224-30f1-4a91-bebd-5bfab88fb44e-1269577.jpg"></p><h4 id="15-2-5-2-Reflection-Equation"><a href="#15-2-5-2-Reflection-Equation" class="headerlink" title="15.2.5.2. Reflection Equation"></a>15.2.5.2. Reflection Equation</h4><p><img src="https://img.mubu.com/document_image/b6cfd0a8-d6fe-46d2-9d0c-a8e36b99c0c7-1269577.jpg"></p><h4 id="15-2-5-3-Reflection-Equation"><a href="#15-2-5-3-Reflection-Equation" class="headerlink" title="15.2.5.3. Reflection Equation"></a>15.2.5.3. Reflection Equation</h4><p><img src="https://img.mubu.com/document_image/c97e381d-75e4-4511-9338-5c347543c81c-1269577.jpg"></p><h4 id="15-2-5-4-Rendering-Equation"><a href="#15-2-5-4-Rendering-Equation" class="headerlink" title="15.2.5.4. Rendering Equation"></a>15.2.5.4. Rendering Equation</h4><p><img src="https://img.mubu.com/document_image/8d4a2691-bd9c-444d-9e35-6d033229682e-1269577.jpg"></p><h4 id="15-2-5-5-Rendering-Equation-Kajiya-86"><a href="#15-2-5-5-Rendering-Equation-Kajiya-86" class="headerlink" title="15.2.5.5. Rendering Equation (Kajiya 86)"></a>15.2.5.5. Rendering Equation (Kajiya 86)</h4><p><img src="https://img.mubu.com/document_image/6d48544f-31c5-4b46-a0f4-da4e377dcc21-1269577.jpg"></p><h4 id="15-2-5-6-Rendering-Equation-as-Integral-Equation"><a href="#15-2-5-6-Rendering-Equation-as-Integral-Equation" class="headerlink" title="15.2.5.6. Rendering Equation as Integral Equation"></a>15.2.5.6. Rendering Equation as Integral Equation</h4><p><img src="https://img.mubu.com/document_image/25f64529-d45a-4523-a6ba-19438480f01c-1269577.jpg"></p><h4 id="15-2-5-7-Linear-Operator-Equation"><a href="#15-2-5-7-Linear-Operator-Equation" class="headerlink" title="15.2.5.7. Linear Operator Equation"></a>15.2.5.7. Linear Operator Equation</h4><p><img src="https://img.mubu.com/document_image/24fab14c-66c8-449d-a2d3-a271685aff51-1269577.jpg"></p><h4 id="15-2-5-8-Ray-Tracing-and-extensions"><a href="#15-2-5-8-Ray-Tracing-and-extensions" class="headerlink" title="15.2.5.8. Ray Tracing and extensions"></a>15.2.5.8. Ray Tracing and extensions</h4><p><img src="https://img.mubu.com/document_image/47403e1f-c46c-433d-9280-3876fd16f1f5-1269577.jpg"></p><h4 id="15-2-5-9-Ray-Tracing-多次弹射得到的渲染结果"><a href="#15-2-5-9-Ray-Tracing-多次弹射得到的渲染结果" class="headerlink" title="15.2.5.9. Ray Tracing 多次弹射得到的渲染结果"></a>15.2.5.9. Ray Tracing 多次弹射得到的渲染结果</h4><p><img src="https://img.mubu.com/document_image/16ddcda2-347f-42e7-8b62-9e2703685209-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/b2d8ba84-2b9c-450c-9dc3-0c6ab406b232-1269577.jpg"></p><h4 id="15-2-5-10-渲染结果"><a href="#15-2-5-10-渲染结果" class="headerlink" title="15.2.5.10. 渲染结果"></a>15.2.5.10. 渲染结果</h4><p>注意观察顶上的灯的变化，这里没太明白，课上是玻璃球需要两次bounce才会出来光线，如果是双层玻璃的，两次弹射进去，再有两次弹射才能出来。这个场景就算加多弹射，最终会收敛，考虑到能量守恒，对于相机一直按着快门的话，则会过曝，因为能量一直在增多</p><p><img src="https://img.mubu.com/document_image/6647d413-81df-44ba-89e2-74fbcd952934-1269577.jpg"></p><h2 id="15-3-Probability-review"><a href="#15-3-Probability-review" class="headerlink" title="15.3. Probability review"></a>15.3. Probability review</h2><h3 id="15-3-1-Random-Variables"><a href="#15-3-1-Random-Variables" class="headerlink" title="15.3.1. Random Variables"></a>15.3.1. Random Variables</h3><p><img src="https://img.mubu.com/document_image/f994881e-1367-42e2-ae73-fc83f638bae8-1269577.jpg"></p><h3 id="15-3-2-Probabilities"><a href="#15-3-2-Probabilities" class="headerlink" title="15.3.2. Probabilities"></a>15.3.2. Probabilities</h3><p><img src="https://img.mubu.com/document_image/17c10195-5a80-4899-a234-59f3e66d9229-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/4d5a6747-f593-4413-91f7-1b8e0e5bf8bc-1269577.jpg"></p><h3 id="15-3-3-Expected-Value-of-a-Random-Variable"><a href="#15-3-3-Expected-Value-of-a-Random-Variable" class="headerlink" title="15.3.3. Expected Value of a Random Variable"></a>15.3.3. Expected Value of a Random Variable</h3><p><img src="https://img.mubu.com/document_image/d0606451-2122-40ed-a912-97e8058a89cc-1269577.jpg"></p><h3 id="15-3-4-Continuous-Case-Probability-Distribution-Function-PDF"><a href="#15-3-4-Continuous-Case-Probability-Distribution-Function-PDF" class="headerlink" title="15.3.4. Continuous Case: Probability Distribution Function (PDF)"></a>15.3.4. Continuous Case: Probability Distribution Function (PDF)</h3><p><img src="https://img.mubu.com/document_image/fd66f2b5-06be-42be-8923-c41b10b95829-1269577.jpg"></p><h3 id="15-3-5-Function-of-a-Random-Variable"><a href="#15-3-5-Function-of-a-Random-Variable" class="headerlink" title="15.3.5. Function of a Random Variable"></a>15.3.5. Function of a Random Variable</h3><p><img src="https://img.mubu.com/document_image/d85259ad-81f1-4d58-97ee-b0ad08da1025-1269577.jpg"></p><h1 id="16-Lecture-16-Ray-Tracing-4-Monte-Carlo-Path-Tracing"><a href="#16-Lecture-16-Ray-Tracing-4-Monte-Carlo-Path-Tracing" class="headerlink" title="16. Lecture 16:Ray Tracing 4(Monte Carlo Path Tracing)"></a>16. Lecture 16:Ray Tracing 4(Monte Carlo Path Tracing)</h1><h2 id="16-1-A-Brief-Review"><a href="#16-1-A-Brief-Review" class="headerlink" title="16.1. A Brief Review"></a>16.1. A Brief Review</h2><h3 id="16-1-1-Review-The-Rendering-Equation-，fr是brdf函数"><a href="#16-1-1-Review-The-Rendering-Equation-，fr是brdf函数" class="headerlink" title="16.1.1. Review - The Rendering Equation ，fr是brdf函数"></a>16.1.1. Review - The Rendering Equation ，fr是brdf函数</h3><p><img src="https://img.mubu.com/document_image/f7998e7c-5eb8-4890-94c0-a3f60c0e3ed4-1269577.jpg"></p><h3 id="16-1-2-Review-Probabilities"><a href="#16-1-2-Review-Probabilities" class="headerlink" title="16.1.2. Review - Probabilities"></a>16.1.2. Review - Probabilities</h3><p><img src="https://img.mubu.com/document_image/58523cc5-017a-41c7-9bbe-61ab823f03d7-1269577.jpg"></p><h2 id="16-2-Monte-Carlo-Integration"><a href="#16-2-Monte-Carlo-Integration" class="headerlink" title="16.2. Monte Carlo Integration"></a>16.2. Monte Carlo Integration</h2><h3 id="16-2-1-Monte-Carlo-Integration-，蒙特卡罗积分主要是解决定积分问题，只想要最后求解的数。因为函数的复杂性，有时候不定积分很难求解"><a href="#16-2-1-Monte-Carlo-Integration-，蒙特卡罗积分主要是解决定积分问题，只想要最后求解的数。因为函数的复杂性，有时候不定积分很难求解" class="headerlink" title="16.2.1. Monte Carlo Integration ，蒙特卡罗积分主要是解决定积分问题，只想要最后求解的数。因为函数的复杂性，有时候不定积分很难求解"></a>16.2.1. Monte Carlo Integration ，蒙特卡罗积分主要是解决定积分问题，只想要最后求解的数。因为函数的复杂性，有时候不定积分很难求解</h3><p><img src="https://img.mubu.com/document_image/b6b0ce74-9b18-4957-aba2-ed51673e34db-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/63f33607-b94a-44ad-b745-57f92922cee4-1269577.jpg"></p><h3 id="16-2-2-Monte-Carlo-Integration-，在积分域中采样，得到其对应的值，然后用这个矩形面积近似当前函数的积分结果。为了降低噪声，可以采集n个矩形，再平均。"><a href="#16-2-2-Monte-Carlo-Integration-，在积分域中采样，得到其对应的值，然后用这个矩形面积近似当前函数的积分结果。为了降低噪声，可以采集n个矩形，再平均。" class="headerlink" title="16.2.2. Monte Carlo Integration ，在积分域中采样，得到其对应的值，然后用这个矩形面积近似当前函数的积分结果。为了降低噪声，可以采集n个矩形，再平均。"></a>16.2.2. Monte Carlo Integration ，在积分域中采样，得到其对应的值，然后用这个矩形面积近似当前函数的积分结果。为了降低噪声，可以采集n个矩形，再平均。</h3><p><img src="https://img.mubu.com/document_image/cb61e58a-4071-4662-86f0-2c7440e26cc1-1269577.jpg"></p><h3 id="16-2-3-Monte-Carlo-Integration"><a href="#16-2-3-Monte-Carlo-Integration" class="headerlink" title="16.2.3. Monte Carlo Integration"></a>16.2.3. Monte Carlo Integration</h3><p><img src="https://img.mubu.com/document_image/180b2e1f-da79-4450-bac7-2ce36974d69d-1269577.jpg"></p><h3 id="16-2-4-Example-Uniform-Monte-Carlo-Estimator"><a href="#16-2-4-Example-Uniform-Monte-Carlo-Estimator" class="headerlink" title="16.2.4. Example: Uniform Monte Carlo Estimator"></a>16.2.4. Example: Uniform Monte Carlo Estimator</h3><p><img src="https://img.mubu.com/document_image/351949cd-5fed-4316-80fb-c048fa54fcd2-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/1cfc4af2-7dc0-44d8-9e33-f98ebfa5ddea-1269577.jpg"></p><h3 id="16-2-5-Monte-Carlo-Integration-，注意采样和积分的域保持一致"><a href="#16-2-5-Monte-Carlo-Integration-，注意采样和积分的域保持一致" class="headerlink" title="16.2.5. Monte Carlo Integration ，注意采样和积分的域保持一致"></a>16.2.5. Monte Carlo Integration ，注意采样和积分的域保持一致</h3><p><img src="https://img.mubu.com/document_image/709c9b3a-290d-42fd-b87a-760ff5cbb06d-1269577.jpg"></p><h2 id="16-3-Path-Tracing"><a href="#16-3-Path-Tracing" class="headerlink" title="16.3. Path Tracing"></a>16.3. Path Tracing</h2><h3 id="16-3-1-Motivation-Whitted-Style-Ray-Tracing"><a href="#16-3-1-Motivation-Whitted-Style-Ray-Tracing" class="headerlink" title="16.3.1. Motivation: Whitted-Style Ray Tracing"></a>16.3.1. Motivation: Whitted-Style Ray Tracing</h3><p><img src="https://img.mubu.com/document_image/6b4b9124-d159-4fbd-b3a4-028752aff051-1269577.jpg"></p><h3 id="16-3-2-Whitted-Style-Ray-Tracing-Problem-1"><a href="#16-3-2-Whitted-Style-Ray-Tracing-Problem-1" class="headerlink" title="16.3.2. Whitted-Style Ray Tracing: Problem 1"></a>16.3.2. Whitted-Style Ray Tracing: Problem 1</h3><p><img src="https://img.mubu.com/document_image/10990bcc-5359-4990-9d09-4c4bf428551b-1269577.jpg"></p><h4 id="16-3-2-1-mirror-reflection，-pure-Specular，完全镜面反射，光射过去一定沿着镜面反射出去。"><a href="#16-3-2-1-mirror-reflection，-pure-Specular，完全镜面反射，光射过去一定沿着镜面反射出去。" class="headerlink" title="16.3.2.1. mirror reflection，(pure)Specular，完全镜面反射，光射过去一定沿着镜面反射出去。"></a>16.3.2.1. mirror reflection，(pure)Specular，完全镜面反射，光射过去一定沿着镜面反射出去。</h4><h4 id="16-3-2-2-glossy-reflection，有镜面的感觉但也有点模糊"><a href="#16-3-2-2-glossy-reflection，有镜面的感觉但也有点模糊" class="headerlink" title="16.3.2.2. glossy reflection，有镜面的感觉但也有点模糊"></a>16.3.2.2. glossy reflection，有镜面的感觉但也有点模糊</h4><h3 id="16-3-3-Whitted-Style-Ray-Tracing-Problem-2"><a href="#16-3-3-Whitted-Style-Ray-Tracing-Problem-2" class="headerlink" title="16.3.3. Whitted-Style Ray Tracing: Problem 2"></a>16.3.3. Whitted-Style Ray Tracing: Problem 2</h3><p><img src="https://img.mubu.com/document_image/df0ce114-bd90-4534-a9f9-26a44903e716-1269577.jpg"></p><pre><code>  - 右图中，物体上的红色和绿色这种效果称之为color bleeding效果。</code></pre><h3 id="16-3-4-Whitted-Style-Ray-Tracing-is-Wrong"><a href="#16-3-4-Whitted-Style-Ray-Tracing-is-Wrong" class="headerlink" title="16.3.4. Whitted-Style Ray Tracing is Wrong"></a>16.3.4. Whitted-Style Ray Tracing is Wrong</h3><p><img src="https://img.mubu.com/document_image/ca9178b4-9567-4318-b57f-4d2c4d95bc2b-1269577.jpg"></p><pre><code>  - 问题一：积分问题，需要考虑四面八方的光照，因此考虑半球上的光照。  - 问题二：递归存在</code></pre><h3 id="16-3-5-A-Simple-Monte-Carlo-Solution"><a href="#16-3-5-A-Simple-Monte-Carlo-Solution" class="headerlink" title="16.3.5. A Simple Monte Carlo Solution"></a>16.3.5. A Simple Monte Carlo Solution</h3><pre><code>  - Wo是观测方向，Wi是各个入射方向，但是图形学中定义都是outwards，因此是方向定义如图</code></pre><p><img src="https://img.mubu.com/document_image/a49b1cfc-4f5a-4365-9562-fad2823f53ef-1269577.jpg"></p><pre><code>  - 写的是反射方程，忽略了自发光项；因为这个也是积分问题，因此可以用蒙特卡罗积分求解</code></pre><p><img src="https://img.mubu.com/document_image/a3dae169-a78a-46ee-b520-cd032123086f-1269577.jpg"></p><pre><code>  - 3</code></pre><p><img src="https://img.mubu.com/document_image/6f9cfe19-cbf0-4dea-87f5-f3682b36f675-1269577.jpg"></p><pre><code>  - 4</code></pre><p><img src="https://img.mubu.com/document_image/6302b008-8648-4cc2-962b-5614589d768b-1269577.jpg"></p><pre><code>  - 5</code></pre><p><img src="https://img.mubu.com/document_image/f70d16de-2276-4168-84f2-a3ca0cd7bb79-1269577.jpg"></p><h4 id="16-3-5-1-Introducing-Global-Illumination-；这里从Q到P点的radiance是多少呢？类比观测视角，将观测视角放到P点，在P点观测Q点，算Q点的直接光照一样"><a href="#16-3-5-1-Introducing-Global-Illumination-；这里从Q到P点的radiance是多少呢？类比观测视角，将观测视角放到P点，在P点观测Q点，算Q点的直接光照一样" class="headerlink" title="16.3.5.1. Introducing Global Illumination ；这里从Q到P点的radiance是多少呢？类比观测视角，将观测视角放到P点，在P点观测Q点，算Q点的直接光照一样"></a>16.3.5.1. Introducing Global Illumination ；这里从Q到P点的radiance是多少呢？类比观测视角，将观测视角放到P点，在P点观测Q点，算Q点的直接光照一样</h4><p><img src="https://img.mubu.com/document_image/0feecce3-3c7a-4e9e-9825-73236b57be9e-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/c5e642b3-b01a-4ea4-9599-b1a61421400c-1269577.jpg"></p><h3 id="16-3-6-Path-Tracing"><a href="#16-3-6-Path-Tracing" class="headerlink" title="16.3.6. Path Tracing"></a>16.3.6. Path Tracing</h3><h4 id="16-3-6-1-Problem-1-Explosion-of-rays-as-bounces-go-up-光线量爆炸，因此将N-1-可以有效解决指数激增问题"><a href="#16-3-6-1-Problem-1-Explosion-of-rays-as-bounces-go-up-光线量爆炸，因此将N-1-可以有效解决指数激增问题" class="headerlink" title="16.3.6.1. Problem 1: Explosion of #rays as #bounces go up: 光线量爆炸，因此将N=1 可以有效解决指数激增问题"></a>16.3.6.1. Problem 1: Explosion of #rays as #bounces go up: 光线量爆炸，因此将N=1 可以有效解决指数激增问题</h4><h5 id="16-3-6-1-1-原因"><a href="#16-3-6-1-1-原因" class="headerlink" title="16.3.6.1.1. 原因"></a>16.3.6.1.1. 原因</h5><p>  <img src="https://img.mubu.com/document_image/84f54b3c-bcd3-4f15-8e21-29db6c138e89-1269577.jpg"></p><h5 id="16-3-6-1-2-代码，分布式光线追踪-N-1，N-1时-path-tracing"><a href="#16-3-6-1-2-代码，分布式光线追踪-N-1，N-1时-path-tracing" class="headerlink" title="16.3.6.1.2. 代码，分布式光线追踪 N!=1，N=1时 path tracing"></a>16.3.6.1.2. 代码，分布式光线追踪 N!=1，N=1时 path tracing</h5><p>  <img src="https://img.mubu.com/document_image/45001786-5ace-42c8-ac30-a27a4ab80913-1269577.jpg"></p><h5 id="16-3-6-1-3-Ray-Generation"><a href="#16-3-6-1-3-Ray-Generation" class="headerlink" title="16.3.6.1.3. Ray Generation"></a>16.3.6.1.3. Ray Generation</h5><ol><li>Ray Generation </li></ol><p>  <img src="https://img.mubu.com/document_image/e484b170-d622-4ee6-a40b-cfd2fe56d447-1269577.jpg"></p><ol start="2"><li>Very similar to ray casting in ray tracing</li></ol><p>  <img src="https://img.mubu.com/document_image/ae880d63-8643-4c28-b363-72f2ecc5e1d8-1269577.jpg"></p><h4 id="16-3-6-2-Problem-2-The-recursive-algorithm-will-never-stop"><a href="#16-3-6-2-Problem-2-The-recursive-algorithm-will-never-stop" class="headerlink" title="16.3.6.2. Problem 2:The recursive algorithm will never stop!"></a>16.3.6.2. Problem 2:The recursive algorithm will never stop!</h4><h5 id="16-3-6-2-1-为什么需要终止，实际中光是无数次弹射的，但是计算机图形学中是不允许的，需要有终止"><a href="#16-3-6-2-1-为什么需要终止，实际中光是无数次弹射的，但是计算机图形学中是不允许的，需要有终止" class="headerlink" title="16.3.6.2.1. 为什么需要终止，实际中光是无数次弹射的，但是计算机图形学中是不允许的，需要有终止"></a>16.3.6.2.1. 为什么需要终止，实际中光是无数次弹射的，但是计算机图形学中是不允许的，需要有终止</h5><p>  <img src="https://img.mubu.com/document_image/4871b347-79a7-42d1-af51-75dcd5df951b-1269577.jpg"></p><p>  <img src="https://img.mubu.com/document_image/220e499a-30d3-4933-bfa9-ca2f5bfbe4fa-1269577.jpg"></p><h5 id="16-3-6-2-2-Solution-Russian-Roulette-RR-俄罗斯轮盘赌"><a href="#16-3-6-2-2-Solution-Russian-Roulette-RR-俄罗斯轮盘赌" class="headerlink" title="16.3.6.2.2. Solution: Russian Roulette (RR) -俄罗斯轮盘赌"></a>16.3.6.2.2. Solution: Russian Roulette (RR) -俄罗斯轮盘赌</h5><p>  <img src="https://img.mubu.com/document_image/7ec16bba-54b3-4c7d-ba50-01d10c55febc-1269577.jpg"></p><ol><li>原理</li></ol><p>  <img src="https://img.mubu.com/document_image/c84d445b-b472-4469-a074-ac5cccf86b63-1269577.jpg"></p><ol start="2"><li>代码</li></ol><p>  <img src="https://img.mubu.com/document_image/80774bcf-7533-470b-8818-ccd72423bcb7-1269577.jpg"></p><p>  <img src="https://img.mubu.com/document_image/380eb6a5-1ac7-44dd-b1f8-9619b6dfd987-1269577.jpg"></p><h4 id="16-3-6-3-Path-Tracing-，samples-per-pixel，就是多少根光线"><a href="#16-3-6-3-Path-Tracing-，samples-per-pixel，就是多少根光线" class="headerlink" title="16.3.6.3. Path Tracing ，samples per pixel，就是多少根光线"></a>16.3.6.3. Path Tracing ，samples per pixel，就是多少根光线</h4><p><img src="https://img.mubu.com/document_image/9b27815b-2fea-4dda-8344-e840dc14c144-1269577.jpg"></p><h4 id="16-3-6-4-Sampling-the-Light"><a href="#16-3-6-4-Sampling-the-Light" class="headerlink" title="16.3.6.4. Sampling the Light"></a>16.3.6.4. Sampling the Light</h4><h5 id="16-3-6-4-1-Understanding-the-reason-of-being-inefficient，以往的光线打到光源都是看运气，不合理"><a href="#16-3-6-4-1-Understanding-the-reason-of-being-inefficient，以往的光线打到光源都是看运气，不合理" class="headerlink" title="16.3.6.4.1. Understanding the reason of being inefficient，以往的光线打到光源都是看运气，不合理"></a>16.3.6.4.1. Understanding the reason of being inefficient，以往的光线打到光源都是看运气，不合理</h5><p>  <img src="https://img.mubu.com/document_image/e43f9e6f-88e0-41e7-9575-e55e0244486d-1269577.jpg"></p><h5 id="16-3-6-4-2-Sampling-the-Light-pure-math"><a href="#16-3-6-4-2-Sampling-the-Light-pure-math" class="headerlink" title="16.3.6.4.2. Sampling the Light (pure math)"></a>16.3.6.4.2. Sampling the Light (pure math)</h5><p>注意采用和积分的域一致</p><p>  <img src="https://img.mubu.com/document_image/4bea0e5b-81e9-456c-b74a-91d1d2b27195-1269577.jpg"></p><h5 id="16-3-6-4-3-公式"><a href="#16-3-6-4-3-公式" class="headerlink" title="16.3.6.4.3. 公式"></a>16.3.6.4.3. 公式</h5><p>  <img src="https://img.mubu.com/document_image/a81a97c9-f089-44fb-a25e-3350e87b9ab3-1269577.jpg"></p><h5 id="16-3-6-4-4-rendering-equation"><a href="#16-3-6-4-4-rendering-equation" class="headerlink" title="16.3.6.4.4. rendering equation"></a>16.3.6.4.4. rendering equation</h5><p>  <img src="https://img.mubu.com/document_image/f5633088-c6af-4d20-9640-91c450d63c0a-1269577.jpg"></p><h5 id="16-3-6-4-5-radiance-coming-from-two-parts"><a href="#16-3-6-4-5-radiance-coming-from-two-parts" class="headerlink" title="16.3.6.4.5. radiance coming from two parts"></a>16.3.6.4.5. radiance coming from two parts</h5><p>  <img src="https://img.mubu.com/document_image/e67077f8-60f6-4e35-8f62-0f50cfda7970-1269577.jpg"></p><h5 id="16-3-6-4-6-代码"><a href="#16-3-6-4-6-代码" class="headerlink" title="16.3.6.4.6. 代码"></a>16.3.6.4.6. 代码</h5><p>  <img src="https://img.mubu.com/document_image/a0afc5b5-319f-4d6a-a82d-288a73649a9c-1269577.jpg"></p><h5 id="16-3-6-4-7-if-the-sample-on-the-light-is-not-blocked-or-not"><a href="#16-3-6-4-7-if-the-sample-on-the-light-is-not-blocked-or-not" class="headerlink" title="16.3.6.4.7. if the sample on the light is not blocked or not?"></a>16.3.6.4.7. if the sample on the light is not blocked or not?</h5><p>  <img src="https://img.mubu.com/document_image/144f50a1-c2a0-40bc-b1b6-3403037b2a72-1269577.jpg"></p><h3 id="16-3-7-Some-Side-Notes"><a href="#16-3-7-Some-Side-Notes" class="headerlink" title="16.3.7. Some Side Notes"></a>16.3.7. Some Side Notes</h3><h4 id="16-3-7-1-Path-tracing-PT-is-indeed-difficult"><a href="#16-3-7-1-Path-tracing-PT-is-indeed-difficult" class="headerlink" title="16.3.7.1. Path tracing (PT) is indeed difficult"></a>16.3.7.1. Path tracing (PT) is indeed difficult</h4><ol><li>Consider it the most challenging in undergrad CS</li><li>Why: physics, probability, calculus, coding</li><li>Learning PT will help you understand deeper in these </li></ol><h3 id="16-3-8-Is-Path-Tracing-Correct"><a href="#16-3-8-Is-Path-Tracing-Correct" class="headerlink" title="16.3.8. Is Path Tracing Correct?"></a>16.3.8. Is Path Tracing Correct?</h3><p><img src="https://img.mubu.com/document_image/d8de7eae-5df0-473b-98f8-66a0944ee397-1269577.jpg"></p><h3 id="16-3-9-Ray-tracing-Previous-vs-Modern-Concepts"><a href="#16-3-9-Ray-tracing-Previous-vs-Modern-Concepts" class="headerlink" title="16.3.9. Ray tracing: Previous vs. Modern Concepts"></a>16.3.9. Ray tracing: Previous vs. Modern Concepts</h3><p><img src="https://img.mubu.com/document_image/d3fcf670-46e4-4c1f-a4a3-d2d59c53c6cc-1269577.jpg"></p><h3 id="16-3-10-Things-we-haven’t-covered-won’t-cover"><a href="#16-3-10-Things-we-haven’t-covered-won’t-cover" class="headerlink" title="16.3.10. Things we haven’t covered / won’t cover"></a>16.3.10. Things we haven’t covered / won’t cover</h3><p><img src="https://img.mubu.com/document_image/b007f47d-2496-49b9-9980-619f072b8a0d-1269577.jpg"></p><p><img src="https://img.mubu.com/document_image/3332cfe2-3525-4d3c-ba46-64bafd4214dc-1269577.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graphics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>添加Tidio在线聊天服务</title>
      <link href="/posts/f8edb900/"/>
      <url>/posts/f8edb900/</url>
      
        <content type="html"><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在线聊天算是一个比较成熟的 SaaS 商业应用了，业内产品如 <a href="https://www.tidiochat.com/">Tidio</a>、 <a href="https://talkjs.com/">TalkJS</a>、<a href="https://www.intercom.com/">Intercom</a>、<a href="https://www.tawk.to/">tawk.to</a> 等，使用体验都很好，交互界面也很干净别致。此次本站选择用Tidio，部署起来很方便：</p><ul><li>在个人博客这种业务场景中，几乎用不到它的收费功能，可以算是终身免费了。</li><li>Tidio 提供了多种消息回复渠道，包括网页、桌面应用、iOS/Android APP（需要 Google play 服务支持）。</li><li>除了在线聊天，Tidio 还可以在线发送邮件，以及关联接收 Fackbook 消息。</li><li>在几款产品的界面风格中，还是 Tidio 看起来更加优雅一些，深得我爱。</li></ul><p><img src="https://raw.githubusercontent.com/the-sword/figurebed/master/img/20200322104630.png"></p><h2 id="注册账号"><a href="#注册账号" class="headerlink" title="注册账号"></a>注册账号</h2><p><a href="https://www.tidio.com/">Tidio官网</a></p><p>注册账号，根据引导填写相关信息；进入控制台，在 <strong>SETTINGS</strong> -&gt; <strong>Developer</strong> -&gt; <strong>Project data</strong> 中获取到 Public Key：</p><p><img src="https://raw.githubusercontent.com/the-sword/figurebed/master/img/image-20200322105059255.png" alt="image-20200322105059255"></p><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>不同的主题有不同的配置写法，但都大同小异。本博客按照<a href="https://github.com/Molunerfinn/hexo-theme-melody">hexo-theme-melody</a>主题配置。</p><p>首先在主题自定义布局中添加如下代码：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tidio online chat</span></span><br><span class="line"><span class="comment"># see: https://www.tidiochat.com</span></span><br><span class="line"><span class="attr">tidio:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">key:</span> <span class="comment"># Public_Key</span></span><br></pre></td></tr></table></figure><p>然后在<code>themes\melody\layout\includes\head.pug</code>文件中加入以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if theme.tidio.enable</span><br><span class="line">  script(src=&quot;//code.tidio.co/fut0uxnwfp6sbxufi6qqozmfzutuf3nc.js&quot; async)</span><br></pre></td></tr></table></figure><p>如果想修改Tidio的外观布局，可在<strong>Channel</strong> -&gt; <strong>Live chat</strong> -&gt; <strong>Appearance</strong>中自定义。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="http://yearito.cn/posts/hexo-advanced-settings.html">Hexo 搭建个人博客系列：进阶设置篇 | Yearito’s Blog</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深圳华侨城湿地公园</title>
      <link href="/posts/51981ca3/"/>
      <url>/posts/51981ca3/</url>
      
        <content type="html"><![CDATA[<p>秋季的深圳依然高温，园区避暑倒是好去处。每天最多400人的预约制，极符合我这种不喜拥挤热闹的人，游玩的多为拖家带口的周边市民，少有长枪短炮的摄影爱好者。</p><p>园区是中国唯一地处现代化大都市腹地的滨海红树林湿地公园，与深圳湾水系相通，由海岸性咸水湖、淤泥质海滩、红树林三种湿地类型所组成，湿地资源丰富，是深圳湾鸟类最重要的栖息地之一，也是深圳湾鸟类多样性最高的区域之一。</p><p><img src="https://ae01.alicdn.com/kf/H00f79cbf92e149dd8fcd5140c77fa7bdB.jpg" alt="公园一览"></p><p><img src="https://pic.superbed.cn/item/5d861235451253d178e739f7.jpg" alt="虎皮兰"></p><p><img src="https://ae01.alicdn.com/kf/H9a314fc39a38409d8a3a4c5a38ac29c4e.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hab944077009d4337a642d5c20432e37c2.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H77dd97b723514e978f05bcf64015b6f6Q.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H41e39bc530184321be7489ce5a37d577R.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H019b95d092d84abeaa44e982c00460d3k.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H17a023e166e14960ba5002c503bd62f29.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H175de797f63d41d9a0e5d47809b9902bQ.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hedba7e13e7cd4132b171fcd68b2387fau.jpg" alt="木槿花"></p><p><img src="https://ae01.alicdn.com/kf/H2e43f495ce97470fb908e79fed58ee7do.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hca02e0c6b4ca48d29b3f7ffdb7b48896r.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H7c587b68c64d41c1b98af5faaae7e4ffX.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H121acccd1239429bb3e0c1c164534f97G.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Ha5e8721041534d7f8177ed2634f5c9d44.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H831df63207774341bc212108d6c795c6J.jpg" alt="马缨丹"></p><p><img src="https://ae01.alicdn.com/kf/H8532deab006646a0a93f1abe4931a0635.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H7c4bc5e9a88e4ee4bc889e7e4a70fc94S.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hb5967111f3884c43a8c7ac56e5757edcC.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hf9d581a1ea3e48c9a06fb2077a6abfd2w.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H395edfb306e141818b68a837a016afa8u.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H7ea95fc806b54c5a8cfcf4ee27b255f8N.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hee15ccfdf91a4b539fbe461b9aade4f51.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H40a98c84f65948e2a753511524c22783t.jpg"></p><p><img src="https://ae01.alicdn.com/kf/He429c8e1f2ab4346887ea9921f2ccea4F.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H91760ca273c547d8a91c853e4e3fdf0db.jpg"></p><center>园区生态还是不错的，小径两边的植物丛中窸窸窣窣，偶有叫不上名的鸟身边飞过，湖中还有白鹭在觅食。不过相比之前群鸟掠过的盛况，还是要惋惜很多，毕竟一线城市中能够留存这片绿洲，已实属不易。</center><p><img src="https://ae01.alicdn.com/kf/H6e3f0438cc67421fa8cb2bba2755c65bZ.png"></p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游玩 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>东莞一日游</title>
      <link href="/posts/7c921ec/"/>
      <url>/posts/7c921ec/</url>
      
        <content type="html"><![CDATA[<p>纠结，无心工作；</p><p>不喜欢嘈杂，索性就趁着工作日假期出去转一圈。</p><p>炎炎夏日，不想太远，就到深圳的“后花园”–东莞，在热浪中来了一次一日游。</p><p>相比于深圳，东莞大了许多，几个镇发展也不均衡，新城旧区、大街小巷、干净杂乱互相穿插，极其魔幻。</p><h3 id="南社明清古村落"><a href="#南社明清古村落" class="headerlink" title="南社明清古村落"></a>南社明清古村落</h3><p>位于东莞茶山镇，据记载有800多年的历史，现存完好的明清古建筑群之一；</p><p>村落不大，古墙为界，方塘居中，两侧榕树成荫，柳树低垂，房屋依势而建，错落有致。</p><p>村中多为谢氏宗族，祠堂遍布，建于方塘两侧，作为北方人看到这么浓厚的宗祠文化还是很震撼，有一种血脉文化的传承和历史感；民居建于祠堂后面，绿瓦青砖红墙，麻石巷道，颇为惬意。 </p><p><img src="https://ae01.alicdn.com/kf/H4e7779ff8c8f40e0880284cc88828f92m.jpg" alt="百岁坊"></p><p><img src="https://ae01.alicdn.com/kf/H33a81b788e1c4c0a86ac35af5b9c9da1B.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hb1359e20a36c467f9f5a1142088982a6f.jpg"></p><p><img src="https://ae01.alicdn.com/kf/He4a5ff430a9749a2b9bd9894aeb66caet.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H036ebdf2aa944d12a2ad0a0a1f9448f1b.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hde43a74f7cc34e1a9fd9e671db629b5dW.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H9428ae07018c405dbc012ed9081336bea.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H3171368813ea45f2b7c97ec7b0dfe52dI.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H7a39be9f382d426dbf1e0e72142c3e48k.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H4b7860ce0fe1449483c9f14a297733ff2.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hd4d9451451864f908b98b14ece430df5Z.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H097f3c79c76b4a48ab36b86f622cd09da.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H560dfb21db834a738c22b47ad98224deF.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hdc506c5455914eeeac1b555ab2d064f46.jpg" alt="步云里"></p><p><img src="https://ae01.alicdn.com/kf/H7291d46e2c7845e995ef64a8fb4be7c3r.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H80fbe001ee5e453cb4a948266ae7313b4.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H608153841fc848258858369a2f79a661j.jpg"></p><h3 id="可园"><a href="#可园" class="headerlink" title="可园"></a>可园</h3><center>可羡人间福地；园夸天上仙宫</center><center>清代广东四大名园之一，岭南建筑代表作；</center><center>始建于清朝道光三十年（公元1850年），为莞城人张敬修所建；</center><center>占地虽小，空间开阔；建筑、水池、登台、假山比比皆是；窗雕、栏杆、美人靠、地板各俱风格；</center><center>园内保有居巢、居廉所作撞粉法花鸟画，以及多人对联书法石刻；</center><center>水流云自还，</center><center>适意偶成筑。</center><center>拼偿百万钱、</center><center>买邻依水竹。</center><center>              -- 居巢</center>![](https://ae01.alicdn.com/kf/H4ce1d6e448424d128a9204540cb5f654N.jpg)<p><img src="https://ae01.alicdn.com/kf/Hedeb8dc72f1640739a3520107f008f0bi.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H8a1a479076da4a5995f518f93e59ef8b2.jpg" alt="滋树台"></p><p><img src="https://ae01.alicdn.com/kf/H1e3d6a6fe99c4660bd295237a707c136K.jpg" alt="滋树台"></p><p><img src="https://ae01.alicdn.com/kf/H0c62f61084624d3cbee284f76cc41aea7.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H638ccfe4f8d54c01ad4e26ba5b73f06ey.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H8ad165cf9c0344d0bcdd2c45675d8449I.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H1d3c2c89476142828e686c082531be7ck.jpg" alt="亭馆绿天深，楼起绿天外。"></p><p><img src="https://ae01.alicdn.com/kf/He8da2078f12e4e378184bb1b4c1bc456E.jpg" alt="壶中天"></p><p><img src="https://ae01.alicdn.com/kf/H0895bd1d8c08458db1af938a7c9540581.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H63b52eff6f4e46fa85280ce0bb33fef5q.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H795d35755d1a42dca393881ababb0a41R.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H9c7b4079df4b4ade81f1ad87bc8acab8e.jpg" alt="可堂"></p><p><img src="https://ae01.alicdn.com/kf/H450a523732a44cbda0b8d64b2ca8462aM.jpg" alt="十二生肖石刻"></p><div align=center><iframe height=498 width=510 src="/video/twl-animal.mp4" frameborder="0" allowfullscreen></iframe></div><p><img src="https://ae01.alicdn.com/kf/H8efd9163476040e3926905fd7a0462c5H.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H4264fd62e3934655bef4b4fddd790b099.jpg"></p><p><img src="https://ae01.alicdn.com/kf/H9be4b3ab64904837b6d4d8b11c8c5dafL.jpg"></p><h3 id="大岭山森林公园"><a href="#大岭山森林公园" class="headerlink" title="大岭山森林公园"></a>大岭山森林公园</h3><center>横跨四镇一场（厚街镇、虎门镇、长安镇、大岭山镇、大岭山林场），公园很大，景观很多，自己也就去了几处，茶山顶、观音寺、知青场、八仙洞以及碧幽谷。</center><center>园区含氧十足，一路沿着山涧、溪流、瀑布徒步上山，静雅清幽。</center>![观音寺](https://ae01.alicdn.com/kf/Ha5b8ce12caf9440a8367e682eb282730a.jpg)<p><img src="https://ae01.alicdn.com/kf/H61196fbc651e420d8412864dd4284145c.jpg"></p><p><img src="https://ae01.alicdn.com/kf/Hd05fdf71ce964c618f21c9ed5eddfbcdU.jpg" alt="茶山顶"></p><h3 id="SOMEONE"><a href="#SOMEONE" class="headerlink" title="SOMEONE"></a>SOMEONE</h3><center>除景，人也有趣；</center><center>结伴出游的老夫妇；十几岁出来打拼的滴滴司机；在外工作十年春节没回家的老乡；闲暇约亲朋好友山顶饮茶的大姐等等；</center><center>或闲情逸致，或辛酸苦楚，各有各的故事。</center>![](https://ae01.alicdn.com/kf/H1a0a01c88a394558b8d3c5f6ec4cbedba.jpg)<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><center>东莞景点很多，可玩性十足，只不过这次想去的景点过于分散，导致路上花费时间过多，没去虎门，些许遗憾，以后有时间会再来一次。</center>![](https://ae01.alicdn.com/kf/Hd4ac41f7d4a74c4090d6d01164b6480bf.jpg)]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游玩 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《活法》 - 稻盛和夫</title>
      <link href="/posts/779b9c58/"/>
      <url>/posts/779b9c58/</url>
      
        <content type="html"><![CDATA[<p>在实验室呆的无聊，被某人吐槽都没有周末（嘿嘿，好像是没怎么过过周末），终于趁着看展的由头出去走了走，看看这个熟悉又陌生的城市。</p><p>看完展，漫无目的的走着，看看街头艺人的表演，找找好吃的，最后鬼使神差的进了书城，Emmmm。说起逛书城，已是遥远的记忆了。现在看书，基本都是kindle了，偶尔有那么几本未电子化的也就直接网购了。科技使人懒惰！</p><p><img src="https://raw.githubusercontent.com/the-sword/figurebed/master/img/%E6%B7%B1%E5%9C%B3%E5%9B%BE%E4%B9%A6%E5%9F%8E.jpg" alt="深圳书城中心城"></p><p>进到书城，刹那间是有些感动的。老老少少，不分年龄、肤色、层次，或依靠，或席地，皆可找到属于自己的那一片天地。</p><hr><p><strong>《活法》 - 稻盛和夫</strong></p><p><img src="https://pic.superbed.cn/item/5c8c53593a213b0417889b4b"></p><p>这本书是由稻盛和夫现身说法，用朴素的语言言简意赅地介绍他独特的人生哲学。作者正面阐述了人生的真理、生活的意义、应有的状态，其中价值观不仅适用于个人，同时也适用于企业与国家。</p><h2 id="人生方程式"><a href="#人生方程式" class="headerlink" title="人生方程式"></a>人生方程式</h2><p><strong>人生・事业的结果 ＝ 思维方式 × 热情 × 能力</strong></p><blockquote><p>能力：才能和智商，多半是先天资质；</p><p>热情：从事本职工作的激情或努力的态度，是可以根据自己意愿进行控制的后天方面的因素；</p><p>思维方式：也是最重要的因素，是精神应有的状态或对待人生的态度。</p></blockquote><p>思维方式之所以重要，是因为其有正负。即使有能力有热情，方向一旦错了，得到的却是相反的结果。</p><p>而所谓积极地思维方式，简而言之“凡事往好的方面着想”。</p><blockquote><p>总是积极向前的、建设性的；有一颗感恩的心，具备和大家一起行动的协调性；乐观的接受；充满善意、有理想、态度温和；不惜努力；知足、不自私、没有强大的欲望等等</p></blockquote><p>“如果要问我成功的理由，我想理由就是这一点，就是说，我的才能或许有限，但我拥有虽然单纯却非常有力的指针————追求做人的正确准则。”</p><h2 id="第一章-让梦想成真"><a href="#第一章-让梦想成真" class="headerlink" title="第一章 让梦想成真"></a>第一章 让梦想成真</h2><p>所谓“心不唤物，物不至”，人生是思维所结的果实。</p><p>日常工作学习中，遇到各种各样的困境，一味的逃避和抱怨是无用的。要做的有近似于“发疯”的强烈的愿望，无时无刻、废寝忘食的思考，并愿意付出比其他任何人都强烈、甚至粉身碎骨的热情，这是最为重要的。一如松下幸之助的“水库式经营”。</p><p>除却正向的心态、强烈的愿望，还要有锲而不舍的努力，倾注全力充实每一个今天-集中力。</p><h2 id="第二章-依原理原则思考"><a href="#第二章-依原理原则思考" class="headerlink" title="第二章 依原理原则思考"></a>第二章 依原理原则思考</h2><p>人生和经营都需要遵守原理原则，以便在各种各样的境遇中感到迷失、苦恼、痛苦、为难的时候，可以作为选择哪条道路、采取何种行动的判断标准。</p><blockquote><p>不贪婪、不给人添乱、摆脱私心、坚持正确的主张</p><p>认真过好每一天:人生就是一台戏，这台戏的编剧、导演、主演都由自己来担任。为了使人生这台戏内容厚重而又充实，我们应该极尽全力以认真的态度度过每一天。懒惰、松弛、抱怨，对人生的极大浪费。</p><p>重视书本，更应重视实践:“知晓”不等于“办得到”。</p><p>努力过好今天:充实的度过今天，就能看见美好的明日。其实很多书都提到一个概念–当下。</p><p>热爱本职工作,做“自燃性”的人；即使最初不喜欢，也要全神贯注，随之热爱。二者因果循环。</p></blockquote><p>人生方程式:</p><blockquote><p>思想如哲学家般深远,</p><p>心术如元禄武士般高尚正直。</p><p>加之以小吏的才干,</p><p>再加之以百姓的身体 ,</p><p>如此则必成实业社会之俊杰。       - 福泽谕吉</p></blockquote><h2 id="第三章-磨砺并提高心智"><a href="#第三章-磨砺并提高心智" class="headerlink" title="第三章  磨砺并提高心智"></a>第三章  磨砺并提高心智</h2><p>“<strong>骄傲浮躁</strong>”的社会，要“<strong>六项精进</strong>”：</p><blockquote><p>付出不亚于任何人的努力</p><p>戒骄戒躁 - 谦受益</p><p>每天自我反省 - 每日检查自己的行动和心里状态，是否只考虑了自己的利益，是否卑怯的举止等，自省自戒，努力改正。</p><p>感谢生命 - 培养心怀感激的心性</p><p>行善积德</p><p>摒弃掉感性所带来的烦恼 - 不要总是忿忿不平、杞人忧天、自寻烦恼。相反地，为了不致事后后悔，更应全身心地投入。  </p></blockquote><p>释迦牟尼的“<strong>六波罗蜜</strong>” </p><blockquote><p>布施</p><p>持戒 - 贪嗔痴</p><p>精进 - 参悟就在每天每日辛勤的劳作之中</p><p>忍辱</p><p>禅定</p><p>智慧</p></blockquote><h2 id="第四章-以利他之心生活"><a href="#第四章-以利他之心生活" class="headerlink" title="第四章  以利他之心生活"></a>第四章  以利他之心生活</h2><p>作为企业的领导，应把视野扩展到企业、国家和整个人类的文明，“利他”原则对整个企业、国家甚至全球历史的深远影响。</p><p>这倒是有点咱们以前士大夫的家国情怀，“先天下之忧而忧，后天下之乐而乐”。</p><p>这一块对日本社会转折的分析挺有意思。</p><h2 id="第五章-与宇宙相和谐"><a href="#第五章-与宇宙相和谐" class="headerlink" title="第五章 与宇宙相和谐"></a>第五章 与宇宙相和谐</h2><p>这一部分主要是作者晚年皈依之后，在工作和佛法修行中领悟到的人生哲学。</p><p>人生是“命运”和“因果”的交织。</p><p>比较有意思的是作者认为人的内心是同心圆结构：</p><blockquote><p>知性——后天掌握的知识和伦理；   </p><p>感性——掌管五感或感情等的精神作用；   </p><p>本能——为了维持肉体的欲望； </p><p>灵魂——是围绕在真我之上的现世的经验与孽；   </p><p>真我——在内心深处，是核心部分。充满真、善、美。</p></blockquote><p>由上至下一步步接近人的本心。</p><hr><p>“勤奋工作，满怀感谢之心，思善行善，真挚的反省，严格地自律，在日常生活中不懈地磨炼心智、提升人格。换句话说，全力以赴去做好上述理所当然的事情，这就是人活着的意义之所在。”</p><hr><p>这本书初看书名以为是鸡汤，想不到竟然在书城站了几个小时看完了，全然不知腿酸，被自己感动到了。其实鸡汤也罢，哲学也好，在某个阶段有所启发就是极好的。</p>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂记 </tag>
            
            <tag> 读书笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>逍遥游 - 庄子</title>
      <link href="/posts/99bb2a9e/"/>
      <url>/posts/99bb2a9e/</url>
      
        <content type="html"><![CDATA[<p>北冥有魚，其名為鯤。鯤之大，不知其幾千里也；化而為鳥，其名為鵬。鵬之大，不知幾千里也；怒而飛，其翼若垂天之雲。是鳥也，海運則將徙於南冥。南冥者，天池也。齊諧者，志怪者也。諧之言曰：「鵬之徙於南冥也，水擊三千里，摶扶搖而上者九萬里，去以六月息者也。」野馬也，塵埃也，生物之以息相吹也。天之蒼蒼，其正色邪？其遠而無所至極邪？其視下也，亦若是則已矣。</p><p>且夫水之積也不厚，則其大舟也無力。覆杯水於坳堂之上，則芥為之舟；置杯焉則膠，水淺而舟大也。風之積也不厚，則其負大翼也無力。故九萬里而風斯在下矣，而後乃之培風，背負青天而莫之夭閼者，而後乃今將圖南。蜩與學鳩笑之曰：「我決起而飛，搶榆枋（而止），時則不至而控於地而已矣，奚以之九萬里而南為？」適莽蒼者，三餐而反，腹猶果然；適百里者，宿舂糧；適千里者，三月聚糧。之二蟲，又何知！小知不及大知，小年不及大年。奚以知其然也？朝菌不知晦朔，蟪蛄不知春秋：此小年也。楚之南有冥靈者，以五百歲為春，五百歲為秋；上古有大椿者，以八千歲為春，以八千歲為秋：此大年也。而彭祖乃今以久特聞，眾人匹之，不亦悲乎！</p><p>湯之問棘也是已：「窮髮之北，有冥海者，天池也。有魚焉，其廣數千里，未有知其修者，其名為鯤。有鳥焉，其名為鵬，背若泰山，翼若垂天之雲，摶扶搖羊角而上者九萬里，絕雲氣，負青天，然後圖南，且適南冥也。斥鴳笑之曰『彼且奚適也？我騰躍而上，不過數仞而下，翱翔蓬蒿之間，此亦飛之至也。而彼且奚適也？』」此小大之辯也。</p><p>故夫知效一官，行比一鄉，德合一君，而徵一國者，其自視也亦若此矣。而宋榮子猶然笑之。且舉世而譽之而不加勸，舉世而非之而不加沮，定乎內外之分，辯乎榮辱之竟，斯已矣；彼其於世，未數數然也。雖然，猶有未樹也。夫列子御風而行，冷然善也，旬有五日而後反；彼於致福者，未數數然也。此雖免乎行，猶有所待者也。若夫乘天地之正，而御六氣之辯，以遊無窮者，彼且惡乎待哉！故曰：至人無己，神人無功，聖人無名。</p><p>堯讓天下於許由，曰：「日月出矣，而爝火不息；其於光也；不亦難乎！時雨降矣，而猶浸灌；其於澤也，不亦勞乎！夫子立而天下治，而我猶尸之，吾自視缺然，請致天下。」許由曰：「子治天下，天下既已治也，而我猶代子，吾將為名乎？名者，實之賓也，吾將為賓乎？鷦鷯巢於深林，不過一枝；偃鼠飲河，不過滿腹。歸休乎！君。予無所用天下為。庖人雖不治庖，尸祝不越樽俎而代之矣。」</p><p>肩吾問於連叔曰：「吾聞言於接輿，大而無當，往而不返。吾驚怖其言，猶河漢而無極也；大有逕庭，不近人情焉。」連叔曰：「其言謂何哉？」曰：「藐姑射之山，有神人居焉。肌膚若冰雪，淖約若處子；不食五穀，吸風飲露；乘雲氣，御飛龍，而遊乎四海之外。其神凝，使物不疪癘而年穀熟。吾以是狂而不信也。」連叔曰：「然，瞽者無以與乎文章之觀，聾者無以與乎鐘鼓之聲。豈唯形骸有聾盲哉！夫知亦有之。是其言也，猶時汝也。之人也，之德也，將旁礡萬物以為一，世蘄乎亂，孰弊弊焉以天下為事！之人也，物莫之傷，大浸稽天而不溺，大旱金石流而土焦而不熱。是其塵垢秕糠，將猶陶鑄堯、舜者也，孰肯以物為事！」</p><p>宋人資章甫而適諸越，越人斷髮文身，無所用之。堯治天下之民，平海內之政，往見四子藐姑射之山，汾水之陽，窅然喪其天下焉。</p><p>惠子謂莊子曰：「魏王貽我以大瓠之種，我樹之成，而實五石。以盛水漿，其堅不能自舉也。剖之以為瓢，則瓠落無所容。非不呺然大也，吾為其無用而掊之。」莊子曰：「夫子固拙於用大矣，宋人有善為不龜手之藥者，世世以洴澼洸為事。客聞之，請買其方百金。聚族而謀曰：『我世世為洴澼洸，不過數金；今一朝而鬻技百金，請與之。』客得之，以說吳王。越有難，吳王使之將，冬與越人水戰，大敗越人，裂地而封之。能不龜手一也，或以封，或不免於洴澼洸，則所用之異也。今子有五石之瓠，何不慮以為大樽而浮乎江湖？而憂其瓠落無所容，則夫子猶有蓬之心也夫！」</p><p>惠子謂莊子曰：「吾有大樹，人謂之樗，其大本擁腫而不中繩墨，其小枝卷曲而不中規矩。立之塗，匠者不顧。今子之言，大而不用，眾所同去也。」莊子曰：「子獨不見狸狌乎？卑身而伏，以候敖者，東西跳梁，不辟高下，中於機辟，死於岡罟。今夫犛牛，其大若垂天之雲，此能為大矣，而不能執鼠。今子有大樹，患其無用，何不樹之於無何有之鄉、廣莫之野？彷徨乎無為其側，逍遙乎寢臥其下；不夭斤斧，物無害者。無所可用，安所困苦哉？」</p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂记 </tag>
            
            <tag> 经典 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu16.04 配置Tensorflow环境</title>
      <link href="/posts/ee1401f5/"/>
      <url>/posts/ee1401f5/</url>
      
        <content type="html"><![CDATA[<p>最近用到一个卷积神经网络<a href="https://github.com/mrharicot/monodepth">monodepth</a>来预测图片深度，需要用到Tensorflow和cuda环境，记录一下整个过程，便于查找。</p><p><strong>注：</strong>文章一些图片来自互联网，见最后的参考链接。</p><h1 id="1-显卡驱动"><a href="#1-显卡驱动" class="headerlink" title="1. 显卡驱动"></a>1. 显卡驱动</h1><p>实验室这边硬件和驱动都是配置好的，故我就没加修改。需要的话可以自行搜索或者参考<a href="http://www.cnblogs.com/xuliangxing/p/7569946.html">深度学习（TensorFlow）环境搭建：（二）Ubuntu16.04+1080Ti显卡驱动</a></p><h1 id="2-安装CUDA"><a href="#2-安装CUDA" class="headerlink" title="2. 安装CUDA"></a>2. 安装CUDA</h1><p>目的是充分利用英伟达GPU的并行计算。</p><h2 id="2-1-安装依赖库"><a href="#2-1-安装依赖库" class="headerlink" title="2.1. 安装依赖库"></a>2.1. 安装依赖库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-devlibgl1-mesa-glx libglu1　　#安装依赖库</span><br></pre></td></tr></table></figure><p>其中有一个没有安装成功，好像后面也没什么影响</p><h2 id="2-2-下载CUDA"><a href="#2-2-下载CUDA" class="headerlink" title="2.2. 下载CUDA"></a>2.2. 下载CUDA</h2><p><a href="https://developer.nvidia.com/cuda-toolkit-archive">官网链接</a></p><p>我这里选择的是<code>CUDA Toolkit 8.0 GA2</code>，下载到<code>/home/user/Downloads</code>目录下</p><p><img src="http://wx4.sinaimg.cn/large/6e529308gy1ft2c1slfz6j20g80q0407.jpg" alt="下载CUDA"></p><h2 id="2-3-安装执行文件"><a href="#2-3-安装执行文件" class="headerlink" title="2.3. 安装执行文件"></a>2.3. 安装执行文件</h2><h3 id="2-3-1-安装基础文件"><a href="#2-3-1-安装基础文件" class="headerlink" title="2.3.1. 安装基础文件"></a>2.3.1. 安装基础文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sh cuda_8.0.61_375.26_linux.run  #执行安装文件</span><br></pre></td></tr></table></figure><p><strong>注意：安装过程中会提示你进行一些确认操作，首先是接受服务条款，输入accept确认，然后会提示是否安装cuda tookit、cuda-example等，均输入Y进行确定。但请注意，当询问是否安装附带的驱动时，一定要选N！</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------------------------------------</span><br><span class="line">Do you accept the previously read EULA?</span><br><span class="line">accept/decline/quit: accept</span><br><span class="line"></span><br><span class="line">Install NVIDIA Accelerated Graphics Driver for Linux-x86_64 375.26?</span><br><span class="line">(y)es/(n)o/(q)uit: n</span><br><span class="line"></span><br><span class="line">Install the CUDA 8.0 Toolkit?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter Toolkit Location</span><br><span class="line"> [ default is /usr/local/cuda-8.0 ]: </span><br><span class="line"></span><br><span class="line">Do you want to install a symbolic link at /usr/local/cuda?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Install the CUDA 8.0 Samples?</span><br><span class="line">(y)es/(n)o/(q)uit: y</span><br><span class="line"></span><br><span class="line">Enter CUDA Samples Location</span><br><span class="line"> [ default is /home/zxh ]: </span><br><span class="line"></span><br><span class="line">Installing the CUDA Toolkit in /usr/local/cuda-8.0 ...</span><br><span class="line">Missing recommended library: libGLU.so</span><br><span class="line">Missing recommended library: libX11.so</span><br><span class="line">Missing recommended library: libXi.so</span><br><span class="line">Missing recommended library: libXmu.so</span><br><span class="line"></span><br><span class="line">Installing the CUDA Samples in /home/zxh ...</span><br><span class="line">Copying samples to /home/zxh/NVIDIA_CUDA-8.0_Samples now...</span><br><span class="line">Finished copying samples.</span><br><span class="line"></span><br><span class="line">===========</span><br><span class="line">= Summary =</span><br><span class="line">===========</span><br><span class="line"></span><br><span class="line">Driver:   Not Selected</span><br><span class="line">Toolkit:  Installed in /usr/local/cuda-8.0</span><br><span class="line">Samples:  Installed in /home/zxh, but missing recommended libraries</span><br><span class="line"></span><br><span class="line">Please make sure that</span><br><span class="line"> -   PATH includes /usr/local/cuda-8.0/bin</span><br><span class="line"> -   LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as root</span><br><span class="line"></span><br><span class="line">To uninstall the CUDA Toolkit, run the uninstall script in /usr/local/cuda-8.0/bin</span><br><span class="line"></span><br><span class="line">Please see CUDA_Installation_Guide_Linux.pdf in /usr/local/cuda-8.0/doc/pdf for detailed information on setting up CUDA.</span><br><span class="line"></span><br><span class="line">***WARNING: Incomplete installation! This installation did not install the CUDA Driver. A driver of version at least 361.00 is required for CUDA 8.0 functionality to work.</span><br><span class="line">To install the driver using this installer, run the following command, replacing &lt;CudaInstaller&gt; with the name of this run file:</span><br><span class="line">    sudo &lt;CudaInstaller&gt;.run -silent -driver</span><br></pre></td></tr></table></figure><h3 id="2-3-2-安装补丁包"><a href="#2-3-2-安装补丁包" class="headerlink" title="2.3.2. 安装补丁包"></a>2.3.2. 安装补丁包</h3><p><code>sudo sh cuda_8.0.61.2_linux.run</code></p><h2 id="2-4-设置环境变量"><a href="#2-4-设置环境变量" class="headerlink" title="2.4. 设置环境变量"></a>2.4. 设置环境变量</h2><ol><li>输入命令，编辑环境变量配置文件   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim ~/.bashrc </span><br></pre></td></tr></table></figure></li><li>在文本末端追加以下代码（按键“i”进行编辑操作），根据个人所需进行相关目录修改   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/local/cuda-8.0/bin:$PATH  </span><br><span class="line">export LD_LIBRARY_PATH=/usr/local/cuda-8.0/lib64:$LD_LIBRARY_PATH</span><br><span class="line">export CUDA_HOME=/usr/local/cuda</span><br></pre></td></tr></table></figure></li><li>保存退出（按“!wq”），执行下面命令，使环境变量立刻生效   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#环境变量立即生效 </span><br><span class="line">sudo source ~/.bashrc  </span><br><span class="line">sudo ldconfig </span><br></pre></td></tr></table></figure></li><li>检查cuda是否配置正确 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc --version</span><br></pre></td></tr></table></figure> 如图所示： <img src="http://wx1.sinaimg.cn/large/6e529308gy1ft2ckfx30aj20k504b74y.jpg" alt="检查cuda是否配置正确"></li></ol><h1 id="3-安装cuDNN"><a href="#3-安装cuDNN" class="headerlink" title="3. 安装cuDNN"></a>3. 安装cuDNN</h1><p>cuDNN是GPU加速计算深层神经网络的库。</p><h2 id="3-1-下载cuDNN"><a href="#3-1-下载cuDNN" class="headerlink" title="3.1. 下载cuDNN"></a>3.1. 下载cuDNN</h2><p><a href="https://developer.nvidia.com/rdp/cudnn-archive">老版存档</a><br><a href="https://developer.nvidia.com/rdp/cudnn-archive">最新版本官方链接</a>，都需要注册方可下载。</p><p><img src="http://ws1.sinaimg.cn/large/6e529308gy1ft2ct5yjs6j20o70g6aav.jpg" alt="下载cuDNN"></p><h2 id="3-2-安装cuDNN"><a href="#3-2-安装cuDNN" class="headerlink" title="3.2. 安装cuDNN"></a>3.2. 安装cuDNN</h2><p>安装cudnn比较简单，简单地说，就是复制几个文件：库文件和头文件。将cudnn的头文件复制到cuda安装路径的include路径下，将cudnn的库文件复制到cuda安装路径的lib64路径下。具体操作如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#解压文件</span><br><span class="line">tar -zxvf cudnn-8.0-linux-x64-v7.tgz</span><br><span class="line"></span><br><span class="line">#切换到刚刚解压出来的文件夹路径</span><br><span class="line">cd cuda </span><br><span class="line">#复制include里的头文件（记得转到include文件里执行下面命令）</span><br><span class="line">sudo cp /include/cudnn.h  /usr/local/cuda/include/</span><br><span class="line"></span><br><span class="line">#复制lib64下的lib文件到cuda安装路径下的lib64（记得转到lib64文件里执行下面命令）</span><br><span class="line">sudo cp lib*  /usr/local/cuda/lib64/</span><br><span class="line"></span><br><span class="line">#设置权限</span><br><span class="line">sudo chmod a+r /usr/local/cuda/include/cudnn.h </span><br><span class="line">sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</span><br><span class="line"></span><br><span class="line">#======更新软连接======</span><br><span class="line">cd /usr/local/cuda/lib64/ </span><br><span class="line">sudo rm -rf libcudnn.so libcudnn.so.7   #删除原有动态文件，版本号注意变化，可在cudnn的lib64文件夹中查看   </span><br><span class="line">sudo ln -s libcudnn.so.7.0.5 libcudnn.so.7  #生成软衔接（注意这里要和自己下载的cudnn版本对应，可以在/usr/local/cuda/lib64下查看自己libcudnn的版本）</span><br><span class="line">sudo ln -s libcudnn.so.7 libcudnn.so #生成软链接</span><br><span class="line">sudo ldconfig -v #立刻生效</span><br></pre></td></tr></table></figure><p>最后我们看看验证安装cudnn后cuda是否依旧可用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc --version  # or nvcc -V </span><br></pre></td></tr></table></figure><h2 id="3-3-检验cuDNN是否安装成功"><a href="#3-3-检验cuDNN是否安装成功" class="headerlink" title="3.3. 检验cuDNN是否安装成功"></a>3.3. 检验cuDNN是否安装成功</h2><p>到目前为止，cuDNN已经安装完了，但是，是否成功安装，我们可以通过cuDNN sample测试一下(<a href="https://developer.nvidia.com/rdp/cudnn-archive">https://developer.nvidia.com/rdp/cudnn-archive</a> 页面中找到对应的cudnn版本，里面有 cuDNN v5 Code Samples，点击该链接下载即可，版本可能不一样，下载最新的就行)。<br>下载完，转到解压出的目录下的mnistCUDNN，如图所示（图片来源见水印）：</p><p><img src="https://wx4.sinaimg.cn/large/6e529308gy1ft2cwn6hx4j20oq0g2whl.jpg" alt="解压的cuDNN目录"></p><p>通过下面命令，进行校验：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#运行cudnn-sample-v5</span><br><span class="line">tar –zxvf cudnn-sample-v5.tgz　　#解压压缩包</span><br><span class="line">cd mnistCUDNN　　#转到解压的mnistCUDNN目录下</span><br><span class="line">make　　#make 命令下</span><br><span class="line">./mnistCUDNN　　　#在mnistCUDNN目录下执行./mnistCUDNN</span><br><span class="line">#改程序运行成功，如果结果看到Test passed!说明cudnn安装成功。</span><br></pre></td></tr></table></figure><p>如果结果看到Test passed!说明cudnn安装成功:</p><p><img src="https://ws2.sinaimg.cn/large/6e529308gy1ft2cy2d4ppj20kc0c6772.jpg" alt="检验cuDNN是否安装成功"></p><h1 id="4-安装Anaconda"><a href="#4-安装Anaconda" class="headerlink" title="4. 安装Anaconda"></a>4. 安装Anaconda</h1><p>最开始是用pip安装python的一些库，但是一直出错，最后选择使用Anaconda进行配置。<br>Anaconda是python的一个科学计算发行版，内置了数百个python经常会使用的库，也包括许多做机器学习或数据挖掘的库，这些库很多是TensorFlow的依赖库。安装好Anaconda可以提供一个好的环境直接安装TensorFlow。</p><p>去<a href="https://www.anaconda.com/download/">Anaconda官网</a>下载需要版本的Anaconda</p><p><img src="http://wx4.sinaimg.cn/large/6e529308gy1ft2d2ugwhpj20r60f2jsl.jpg" alt="选择对应版本"></p><p>下载完后执行如下命令<code>sudo bash Anaconda3-4.4.0-Linux-x86_64.sh</code></p><p><img src="https://wx4.sinaimg.cn/large/6e529308gy1ft2d50r51dj20k30c6wgr.jpg" alt="安装Anaconda"></p><p>安装anaconda，回车，阅读许可文件，选择<code>q</code>或者<code>Ctrl + C</code>退出许可，选择接受即可。<br>最后会询问是否把anaconda的bin添加到用户的环境变量中，选择yes。在终端输入python发现依然是系统自带的python版本，这是因为环境变量的更新还没有生效，命令行输入如下命令是安装的anaconda生效。如果conda –version没有找到任何信息，说明没有加入到环境变量没有，需要手动加入，如图所示：</p><p><img src="https://wx2.sinaimg.cn/large/6e529308gy1ft2d7tpj3vj20k90c640g.jpg" alt="配置Anaconda环境变量"></p><p>刷新环境变量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile 或者 source ~/.bashrc #(全局的环境变量)</span><br></pre></td></tr></table></figure><h1 id="5-安装TensorFlow"><a href="#5-安装TensorFlow" class="headerlink" title="5. 安装TensorFlow"></a>5. 安装TensorFlow</h1><p>参考TensorFlow的<a href="https://www.tensorflow.org/install/">官方安装教程</a>，官网提供的了 Pip, Docker, Virtualenv, Anaconda 或 源码编译的方法安装 TensorFlow，我们这里主要介绍以<code>Anaconda</code>安装。其他安装方式，大家可以到官方安装教程查看。</p><h2 id="5-1-创建conda环境"><a href="#5-1-创建conda环境" class="headerlink" title="5.1. 创建conda环境"></a>5.1. 创建conda环境</h2><p>创建一个名为tensorflow的conda环境Python 3.6，根据TensorFlow版本号，一定要设置Python版本号。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#Python 2.7</span><br><span class="line">conda create -n tensorflow python=2.7    #tensorflow是对应的环境名</span><br><span class="line"></span><br><span class="line">#Python 3.4</span><br><span class="line">conda create -n tensorflow python=3.4</span><br><span class="line"></span><br><span class="line">#Python 3.5</span><br><span class="line">conda create -n tensorflow python=3.5</span><br><span class="line"></span><br><span class="line">#Python 3.6</span><br><span class="line">conda create -n tensorflow python=3.6 　　#我下的TensorFlow对应的Python是3.6版本，所以选择这行</span><br></pre></td></tr></table></figure><h2 id="5-2-激活-conda-环境"><a href="#5-2-激活-conda-环境" class="headerlink" title="5.2. 激活 conda 环境"></a>5.2. 激活 conda 环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source activate tensorflow</span><br></pre></td></tr></table></figure><p>附conda环境的其他操作：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda env list    #列出所有环境</span><br><span class="line">source deactivate    #退出环境</span><br><span class="line">conda env remove -n tensorflow    #删除环境</span><br></pre></td></tr></table></figure><h2 id="5-3-下载TensorFlow"><a href="#5-3-下载TensorFlow" class="headerlink" title="5.3. 下载TensorFlow"></a>5.3. 下载TensorFlow</h2><p>可以使用<code>sudo pip3 install --ignore-installed --upgrade https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl</code>在线安装，但是因为网络的原因，一直无法成功，所以选择下载到本地安装。</p><p>最新的已经是1.8版本，考虑到兼容性，我这里选择的是1.3版本。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Python 2.7</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp27-none-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp27-none-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.4</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp34-cp34m-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp34-cp34m-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.5</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp35-cp35m-linux_x86_64.whl</span><br><span class="line"></span><br><span class="line">GP:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp35-cp35m-linux_x86_64.whl</span><br><span class="line">===============================================================================================</span><br><span class="line"></span><br><span class="line">Python 3.6</span><br><span class="line"></span><br><span class="line">CPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/cpu/tensorflow-1.3.0-cp36-cp36m-linux_x86_64.whl    #cpu版本</span><br><span class="line"></span><br><span class="line">GPU:</span><br><span class="line">https://storage.googleapis.com/tensorflow/linux/gpu/tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl    #gpu版本，1.3.0是对应的tensorflow版本，cp36-cp36m是对应的python版本，这些参数根据需要自行更改后下载。</span><br></pre></td></tr></table></figure><h2 id="5-4-conda环境安装tensorflow-gpu版"><a href="#5-4-conda环境安装tensorflow-gpu版" class="headerlink" title="5.4. conda环境安装tensorflow-gpu版"></a>5.4. conda环境安装tensorflow-gpu版</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /Downloads    #切换到whl文件所在文件夹</span><br><span class="line">pip install --ignore-installed --upgrade tensorflow_gpu-1.3.0-cp36-cp36m-linux_x86_64.whl   #切记，不要用sudo pip，也不要用pip3，然后--ignore-installed --upgrade等参数也不能省略，否则会出错。</span><br></pre></td></tr></table></figure><p>如图所示，TensorFlow安装成功了（来源见水印）：</p><p><img src="https://ws4.sinaimg.cn/large/6e529308gy1ft2dsykvrmj20hx0kvtk9.jpg" alt="安装tensorflow-gpu"></p><p><strong>cpu版本安装同上</strong></p><p><strong>注：</strong>当你不用 TensorFlow 的时候，关闭环境<code>source deactivate tensorflow</code>，再次使用时按照5.2激活即可。</p><h2 id="5-5-卸载TensorFlow"><a href="#5-5-卸载TensorFlow" class="headerlink" title="5.5. 卸载TensorFlow"></a>5.5. 卸载TensorFlow</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip uninstall tensorflow 　　#Python2.7</span><br><span class="line">sudo pip3 uninstall tensorflow 　　#Python3.x</span><br></pre></td></tr></table></figure><h2 id="5-6-测试TensorFlow"><a href="#5-6-测试TensorFlow" class="headerlink" title="5.6. 测试TensorFlow"></a>5.6. 测试TensorFlow</h2><p>在<code>python</code>环境下输入一下命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">hello = tf.constant(&#x27;Hello, TensorFlow!&#x27;)</span><br><span class="line">sess = tf.Session()</span><br><span class="line">sess.run(hello)</span><br></pre></td></tr></table></figure><p>输出为<code>&#39;Hello, TensorFlow!&#39;</code>即代表安装成功。</p><h1 id="6-monodepth配置"><a href="#6-monodepth配置" class="headerlink" title="6. monodepth配置"></a>6. monodepth配置</h1><p>直接使用预训练的model预测深度图，参考官方教程即可。<br>结果所示：</p><p><img src="http://wx1.sinaimg.cn/large/6e529308gy1ft2eyecr8cj217v0b74j2.jpg" alt="monodepth结果"></p><h2 id="6-1-所遇问题"><a href="#6-1-所遇问题" class="headerlink" title="6.1. 所遇问题"></a>6.1. 所遇问题</h2><h3 id="6-1-1-modulenotfounderror-no-module-named-‘matplotlib-path’问题的解决"><a href="#6-1-1-modulenotfounderror-no-module-named-‘matplotlib-path’问题的解决" class="headerlink" title="6.1.1. modulenotfounderror: no module named ‘matplotlib._path’问题的解决"></a>6.1.1. modulenotfounderror: no module named ‘matplotlib._path’问题的解决</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install matplotlib</span><br></pre></td></tr></table></figure><h3 id="6-1-2-Sub-process-usr-bin-dpkg-returned-an-error-code-1-解决方法"><a href="#6-1-2-Sub-process-usr-bin-dpkg-returned-an-error-code-1-解决方法" class="headerlink" title="6.1.2. Sub-process /usr/bin/dpkg returned an error code (1)解决方法"></a>6.1.2. Sub-process /usr/bin/dpkg returned an error code (1)解决方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/dpkg        </span><br><span class="line">sudo mv info info.bak   #做备份 </span><br><span class="line">sudo mkdir info</span><br><span class="line">sudo apt-get install cmake --reinstall  #重新安装cmake包</span><br><span class="line">sudo rm -rf info</span><br><span class="line">sudo mv info.bak info       #还原info</span><br></pre></td></tr></table></figure><h3 id="6-1-3-Tensorflow-：Unsuccessful-TensorSliceReader-constructor-Failed-to-find-any-matching-files"><a href="#6-1-3-Tensorflow-：Unsuccessful-TensorSliceReader-constructor-Failed-to-find-any-matching-files" class="headerlink" title="6.1.3. Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files"></a>6.1.3. Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files</h3><p>文件路径问题，我将相对路径修改为绝对路径之后解决。</p><h3 id="6-1-4-scipy-misc-module-has-no-attribute-imread"><a href="#6-1-4-scipy-misc-module-has-no-attribute-imread" class="headerlink" title="6.1.4. scipy.misc module has no attribute imread"></a>6.1.4. scipy.misc module has no attribute imread</h3><p>需要安装Pillow<code>conda install Pillow</code></p><h1 id="7-参考链接"><a href="#7-参考链接" class="headerlink" title="7. 参考链接"></a>7. 参考链接</h1><ol><li><a href="https://www.cnblogs.com/xuliangxing/p/7575586.html">深度学习（TensorFlow）环境搭建：（三）Ubuntu16.04+CUDA8.0+cuDNN7+Anaconda4.4+Python3.6+TensorFlow1.3</a></li><li><a href="https://zhuanlan.zhihu.com/p/36633807">Anaconda创建环境、删除环境、激活环境、退出环境</a></li><li><a href="https://blog.csdn.net/zhaluo0051/article/details/78239417">modulenotfounderror: no module named ‘matplotlib._path’问题的解决</a></li><li><a href="https://blog.csdn.net/light_language/article/details/72461161">Sub-process /usr/bin/dpkg returned an error code (1)解决方法</a></li><li><a href="https://blog.csdn.net/jmh1996/article/details/77799842">Tensorflow ：Unsuccessful TensorSliceReader constructor: Failed to find any matching files</a></li><li><a href="https://stackoverflow.com/questions/15345790/scipy-misc-module-has-no-attribute-imread">scipy.misc module has no attribute imread</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Graphics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git 删除错误提交的commit</title>
      <link href="/posts/c0c90fc2/"/>
      <url>/posts/c0c90fc2/</url>
      
        <content type="html"><![CDATA[<p>之所以写这篇blog，是因为在提交hexo的时候不知道哪个地方配置出了问题，在github上commit了几个错误的版本，后来想恢复前面某个正确的配置.</p><span id="more"></span><h2 id="连接github仓库"><a href="#连接github仓库" class="headerlink" title="连接github仓库"></a>连接github仓库</h2><pre><code>git config --global user.name  &quot;user.name&quot; git config --global user.email &quot;user.email&quot; git init git checkout -b hexo    //因为我的博客源文件放在hexo分支 git remote add origin https://github.com/the-sword/the-sword.github.io.git    //连接hexo分支仓库</code></pre><h2 id="恢复到某个commit"><a href="#恢复到某个commit" class="headerlink" title="恢复到某个commit"></a>恢复到某个commit</h2><pre><code>git fetch --allgit reset --hard &lt;commit_id&gt;git push origin HEAD --force</code></pre><p><strong>注：</strong>  &lt; commit_id&gt; 为每次commit的SHA1值. 可以用git log 看到,也可以在页面上commit标签页里找到.</p><p>进入github的仓库，会发现在该版commit之后的提交内容都删除了.</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://www.douban.com/note/189603387/">git 删除错误提交的commit</a></p>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>教育网用户使用IPv6访问国外网站</title>
      <link href="/posts/5f24baca/"/>
      <url>/posts/5f24baca/</url>
      
        <content type="html"><![CDATA[<h2 id="1-1-获取IPv4地址"><a href="#1-1-获取IPv4地址" class="headerlink" title="1.1. 获取IPv4地址"></a>1.1. 获取IPv4地址</h2><p>在<strong>命令行工具CMD</strong>中输入<code>ipconfig</code>命令，获取本机IPv4地址</p><span id="more"></span><h2 id="1-2-计算IPv6地址"><a href="#1-2-计算IPv6地址" class="headerlink" title="1.2. 计算IPv6地址"></a>1.2. 计算IPv6地址</h2><p><a href="http://ip-lookup.net/conversion.php">获取ipv6地址</a><br><img src="https://ae01.alicdn.com/kf/HTB1QF.GM7voK1RjSZFN763xMVXat.png" alt="获取ipv6地址"></p><h2 id="1-3-填写相关信息"><a href="#1-3-填写相关信息" class="headerlink" title="1.3. 填写相关信息"></a>1.3. 填写相关信息</h2><p>除去IPv6地址不同外，其余配置相同。</p><p><img src="https://ae01.alicdn.com/kf/HTB1VssvM9rqK1RjSZK9760yypXak.png" alt="ipv6配置"></p><hr><p>此时即可以畅游网络</p><p>备注：非教育网用户可访问<a href="http://blog.lea-code.win/posts/7a245ddb/">该链接</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 互联网 </tag>
            
            <tag> 翻墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>伸手的大爷们</title>
      <link href="/posts/e17f8e38/"/>
      <url>/posts/e17f8e38/</url>
      
        <content type="html"><![CDATA[<p>转载，原文链接：<a href="http://news.duowan.com/YD/ctm32/index.html">伸手的大爷们</a></p><p>如果仔细说起PSP为什么会在中国流行，大概可以列出不下一千种理由。可千言万语说到归齐，没有破解的PSP肯定无法成为影音游戏通吃的装X利器，也不会 在街头巷尾地铁公交里成为装机量第一的掌上设备。稍微对PSP熟悉一点的人可能都知道，PSP在2000型之前的时代有着各种美好，所有的自制软件和破解都畅通无阻。后来SONY的CEO来了一趟中国，看到比日本专卖店规模还大的水货电玩批发之后就回去痛下决心，彻底整改PSP的主板构架，愣是把这 机器的破解漏洞给堵上了。导致PSP3000型苦等半年多才等到一个软件漏洞破解。随后就是硬件厂商和破解黑客们之间的战斗，你升级固件，我升级自制软 件，你来我往不亦乐乎。</p><span id="more"></span><p>让时间回拨到一年前，2010年1月最后两天，SQUARE ENIX的PSP大作《王国之心 梦中诞生》发售，这个使用了新升级文件的游戏让所有拿着PSP等破解的玩家傻了眼。游戏的特殊构造让目前的自制系统无法运行ISO文件。此时最早开发破解 固件M33的大神Dark Alex早已退隐，百分之九十九的玩家都在使用GEN小组的自制系统。</p><p>所有人都希望能有人出现破解掉这个游戏，让自己能玩到最新最快的PSP新作。</p><p>实现这个愿望的并不是国外黑客，而是一名国内的自制软件制作者。在这之前我们用盗版的时候虽然总不忘自夸一句我国人民勤劳勇敢什么的，但其实心里都明白， 大部分破解高手集中在德国和俄罗斯，历代游戏主机的破解都跟国人没有半毛钱关系。只是我们宁愿相信群众的力量无穷大，相信茫茫人海中总会有人站出来解决这 个问题——反正肯定不是摇旗呐喊的自己就行。</p><p>这个人的ID已经不用复述，在高调开贴声称自己要破解《王国之心 梦中诞生》后，他的帖子点击率和回复都达到了一个前所未有的高度。有的人认为他是哗众取宠，有的人从PSP游戏文件构成分析这件事儿的难度，也有人更直接 地冷嘲热讽……然后在大约一周后，他放出了在游戏中开启金手指软件的截图，游戏破解成功。</p><p>十天后，他放出了破解傻瓜包。</p><p>几周后，他放出了可以直接玩更高版本系统下游戏的自制固件。</p><p>于是所有的质疑和讽刺都化作此起彼伏的赞扬，他的帖子被标红，他的破解让外国玩家也不远万里过来注册，他的名声传遍了世界，他的ID被尊称为大神，就像曾经带给PSP破解最佳思路的Dadk Alex一样。</p><p>只是很少有人能记得，DA在没有开发M33后续固件后，论坛上那些质疑和嘲讽的声音，甚至有人跑到DA的国外官方论坛上叫骂。那些帖子和言论随着时间沉入系统深处，却没能沉淀出伸手党们平静的心态。</p><p>历史总是惊人地相似，这位曾经被称为国人骄傲的“大神”，在成功开发出两代自制固件，破解掉许多新游戏之后，也遭遇了相似的一幕。</p><p>是个玩PSP的都知道《怪物猎人3P》要在2010年的12月1日发售，既是为了纪念《怪物猎人》系列周年庆，也是为了让软件商的年度财报好看一些。对于这款在中国和日本都有着极高人气的游戏，每个粉丝都热切期盼着。</p><p>在《怪物猎人3P》发售前一周，“大神”发帖表示破解毫无压力。目前自制固件无法运行该游戏，但他可以通过一些改进搞定一切。</p><p>接下来的精彩，超过的最初所有人的想象。</p><p>“大神”有一个习惯，必须等到游戏发售一周后公布销量才发布破解。《怪物猎人3P》偷跑数日，各大论坛上憋着等下载的人数概超过了六位，帖子里各种惨嚎和 胡言乱语不计其数。不负众望的“大神”用数小时即完成了《怪物猎人P3》的破解，随后宣布可以先给各大汉化组，以便汉化组能够尽快让大家玩到汉化游戏。</p><p>事实证明，这个世界上最美好的只有愿望。当时得知“大神”已经破解了《怪物猎人3P》的伸手党们本已躁动不安，有人说这搞破解的在装X，有人说他是为了赚 取眼球和点击率，当然还有更难听的，总之人性的各种精彩就在这一刻被表现得淋漓尽致。在变了味的网络喧嚣中，这个故事忽然急转直下。</p><p>“大神”私下给出的破解补丁被自己熟悉的一位论坛版主泄露出去了，于是大部分支持的声音瞬间变成了声讨 ——凭什么你能给他却不给我们玩？更有甚者，人肉出了“大神”的个人信息要发布出去。威胁到了现实生活的“大神”惟有选择退出PSP破解界，从此消失在众人的视线中。</p><p>在离开网络之前，他发布了还在完善中的新自制固件，并留下了无奈的留言——“看在我让你们玩了这么多新游戏的份上，让我安静的离开吧。”</p><p>当国外PSP破解黑客得知这位东方同行退出之后，几乎在第一时间发表了遗憾的声明，甚至他们也承认这同道中人才是“有史以来最好的PSP破解黑客”。但这一切已无法挽回，《怪物猎人3P》破解了，而付出这样代价是任何人都始料未及的。</p><p>广告商人继续卖UMD，该玩盗版的继续玩盗版，BBS上的管理员在打扫过论坛之后，关于这件事前前后后的就算是结束了，一切都如未曾发生。可谁也不知道下 一个破解PSP新游戏的人在哪里，谁也不知道下一次又有谁要遭受网络冷暴力。一个一个汉化组成立又解散，一次又一次的攻讦和辱骂。有时候那些继续坚持互联 网共享精神的人们也忍不住要问一句。</p><p>大爷们，你们到底想怎样？</p><p>从来就没温暖过</p><p>我国玩家的尴尬早已不是一天两天的事了，这样一个不允许电子游戏机成为进口商品的国家里想要玩游戏需要付出很多曲折的代价。面对没有官方中文版和游戏首发 必然不会到货的环境，网络共享发布和汉化一直是游戏圈最受关注的两个群体。而我们通常会把那些下载免费游戏的人称为伸手党——这没什么侮辱的意思，就和字 面上的意思一样，大多数玩家付出的无非就是下载的时间和点几下鼠标而已，他们可能未曾想过别人付出什么样的艰辛。<br>最容易受到诟病的当然还是汉化组，游戏的汉化组和影视作品字幕组还不太一样。一般来说一个游戏的汉化过程都漫长又痛苦，除非特别有爱也没什么人会去做这件事。遗憾的是就算这么单纯的工作，一样有人不断表现出各种大爷丰采。</p><p>“《XXX》的汉化怎么还没开始？汉化组的人都.去了吗？”<br>“你们说要汉化《XXXX》都已经快四个月了，怎么还没有截图放出！”<br>“垃圾，这汉化也太垃圾了！”<br>“为什么没有人汉化《XX》，赶快来人开坑啊！”<br>…………</p><p>这也是为什么许多汉化组面对外人询问工作进度时态度不怎么好的主要原因——大家只是在网络上做白工而已，忽然凭空多出这么多视察工作的.，谁的心情也不会 太好。而且大多数不顾别人感受胡言乱语的人反倒不会认真去体验别人的汉化作品，他们这么做通常只是因为网络上问句话没有成本而已，就像他们下载那些别人放 出的游戏和汉化补丁那样。在这间或里即使有许多真挚的感谢，也被淹没在各种责问之中了。很多人可能一辈子都没怎么被人尊重过，因此也不懂得怎样尊重别人。</p><p>这样的无理取闹导致大多数汉化组行事低调，哪怕发布新版本汉化补丁也战战兢兢，生怕惹恼了大爷们招来不知道多少叫骂和喷贴。不管是错字、延期还是有了死机 BUG，总免不了要被人喷上一番。以至于后来许多搞汉化的都是做一票就走，搞完项目就宣布解散，免得被人整个团队一起喷。</p><p>有的人说反正汉化组那么多，喷跑几个心理素质差的，还会有人继续干这个活儿。可这帮人不知道破解领域就那么几个能人，有人跑去DA的论坛喷他，有人在 GEN小组的留言板上刷屏，也有人各种喷国内破解的大神……这些人绝大多数是因为被他们喷的人才玩到的新游戏，他们很容易就忘记了这一点，正如他们希望别 人善待自己，但自己完全不懂如何善待别人。</p><p>我们的社会怎么了</p><p>常听人说起说一个道理：那就是你对某个人好，就得一直好下去，只要有一次不够好，以前所做的各种努力可能都会付之东流。说这话的人肯定对人性有相当程度的了解，他也一定经历过什么惨痛的教训。</p><p>在很多时候，做破解也好，做软件共享也好，或者搞汉化也好，都面临这样一种窘境。你做得好就是几声赞扬，你做不好了马上质疑谩骂狼烟四起。这就好比许多软 件常年免费，忽然有一天收钱了，我们愤怒又失望地骂了一万句，这才记起来，按照这个世界的规矩其实本来就该收钱。只是我们享受了太多优待，把这优待当成了 常态。</p><p>其实没有什么事是真正应该的。比如几年前有个台湾人宣布独立汉化《皇家骑士团2》的SFC版，但不外流。唯一要求就是申请汉化补丁的人答应不要外泄，同时 附上自己手中正版《皇家骑士团2》卡带的照片三张。这要求其实不算过分，也比较符合台湾玩家尊重正版的习惯。遗憾的是国内大部分玩家并没有SFC的卡带， 移植版的PS和SS的正版光盘更不用说了。</p><p>于是觉得无望拿到补丁的玩家纷纷登陆那个人所在的论坛，各种破口大骂，极尽诋毁之能事。当然骂完人家照例是不给补丁的，只是那些留言让彼岸的玩家又低看了内地玩家一次。</p><p>大概所有人都能记得那些汉化、字幕还和共享软件上都会标明是以研究和学习为目的，并不是用于商业用途，请于24小时内删除等等。这些字眼本身就已经是阐述 互联网共享的基本态度，一切都应该以发布者的决定为主，因为我们只是些伸手党。可偏偏有人就是想当发布者的主人，冀望于骂几句之后改变别人的意见。没错他 们是改变了，他们让更多的人学会了珍惜生命，远离破解和汉化。</p><p>其实这种事远远不止发生在游戏圈，笔者一个朋友家境不错，为人又古道热心，开了一家桌游店。经常有人电脑坏了打电话问他该怎么办，他说如果是小问题你就直 接拿来修吧。那边的人就问要多少钱，他说一般情况下不会收钱。然后电话那边的人往往沉吟片刻，说好吧我再想想就挂了电话。这位朋友就不太明白，免费修电脑 什么的为什么会让人那么犹豫。后来经旁人之口才知道，原来很多人已经不相信有素不相识的人可以免费帮别人忙这种事发生了，在他们看来这个社会上的每一次举 手之劳都要明码标价，否则就有更深的阴谋。</p><p>我想这也是很多人面对破解、汉化和游戏共享发布等情况时的内心真实写照。对于社会大环境的怀疑，对于他人目的的揣测和出于自身的不成熟造就了众多的网络喷 子，在一个不必担心责任问题的地方指责别人的确是一件爽快的事。更重要的是网络冷暴力所造成的后果往往难以追查，毕竟法不责众，犯错的是一批人而不是一个 人。这个责任无法落实到谁头上去。</p><p>我们所向往的自由</p><p>自由宣言里对自由的定义是“在不伤害别人的前提下，你所做的一切都是正确的”。遗憾的是很少有人在发表自己看法时能够想起这句定义。在网络这个目前最开放 的平台上，许多人努力寻求自由，却借着自由之名做着无尽伤害他人的事。这就像往往我们渴望公平，又希望自己拥有并利用那些不公平的力量；我们渴望尊重，却 总在话里话外表现出对他人的不尊重；我们渴望得到而很少付出，却总在抱怨别人付出的太少……我们所做的一切，并不是自由，只是在扼杀自由所带来的种种可能 而已。</p><p>我们对互联网最大的贡献，不过是我们每个人都是一个普通用户而已。而我们如果还想让这个世界更繁荣快乐一些，对别人的肯定和宽容是不是更重要呢？文章开头 提到的那位在国内被称为“大神”的网友在《寄生前夜 第三次生日》破解遇到瓶颈后又一次出现，玩家们又一次玩到了最新的免费游戏。经过失去再度拥有，让很多人的改变了自己的言论。这不禁让我想起当Dark Alex宣布自己退出破解界不再研发自制系统的时候，在中文论坛里看到那许多叫嚣着“DA大神已经不行了”，“快滚吧，那么久都不更新系统”的声音。在这 些Dark Alex看不懂的中文帖子里，我小心翼翼地写上“感谢你这么多年来的辛勤工作，让我们玩到了那么多好游戏”这样一句话。今天我在这里又一次说出来，觉得这 样的话每一个字都没有错，并认为这才是对互联网共享精神最大的尊重。</p>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 互联网 </tag>
            
            <tag> 转载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mathematics for Computer Graphics</title>
      <link href="/posts/fbad8ba1/"/>
      <url>/posts/fbad8ba1/</url>
      
        <content type="html"><![CDATA[<h1 id="Mathematics-for-Computer-Graphics"><a href="#Mathematics-for-Computer-Graphics" class="headerlink" title="Mathematics for Computer Graphics"></a>Mathematics for Computer Graphics</h1><p><strong>Greg Turk, August 1997</strong></p><p>“What math should I learn in order to study computer graphics?” This is perhaps the most common general question that students ask me about computer graphics. The answer depends on how deeply you wish to go into the field. If you wish to begin to use off-the-shelf graphics programs then the answer is that you probably do not need to know very much math at all. If you wish to take an introductory course in computer graphics, then you should read the first two sections below for my recommendations (algebra, trigonometry and linear algebra). If you want some day to be a researcher in graphics then I believe that you should consider your mathematics education to be an ongoing process throughout your career.</p><span id="more"></span><p>If you do not particularly care for mathematics, is there still a chance of working in the field? Yes, a few areas within computer graphics are not much concerned with mathematical ideas. You should not give up on graphics just because you are not a math wizard. It is likely, however, that you will have more freedom in choosing research topics if you have a willingness to learn about new mathematical ideas.</p><p>There is no absolute answer to what mathematics is important in computer graphics. Different areas within the field require different mathematical techniques, and your own interests will likely lead you towards some topics and may never touch others. Below are descriptions of a number of areas in mathematics that I believe are useful in computer graphics. Do not feel that you need to be an expert in each of these areas to become a graphics researcher! I deliberately included many areas below to give a fairly broad view of the mathematical ideas used in graphics. Many researchers, however, will never find the need to look at some of the topics that I mention below.</p><p>Finally, although it should be clear from reading this, the opinions given within this document are entirely my own. It is likely that you would get a different list of topics or at least different emphases from other people who work in computer graphics. Now on to the list of topics.</p><h2 id="Algebra-and-Trigonometry"><a href="#Algebra-and-Trigonometry" class="headerlink" title="Algebra and Trigonometry"></a>Algebra and Trigonometry</h2><p>High-school level algebra and trigonometry are probably the most important areas to know in order to begin to learn about computer graphics. Just about every day I need to determine one or more unknowns from a simple set of equations. Almost as often I need to perform simple trigonometry such as finding the length of the edge of some geometric figure based on other lengths and angles. Algebra and trigonometry are the subjects that will solve such day-to-day tasks in computer graphics.<br>What about the geometry that we learn in high school? It may come as a surprise, but our high school geometry is not very often needed for most tasks in computer graphics. The reason for this is that geometry as it is taught in many schools actually is a course in how to construct mathematical proofs. While proof construction is definitely a valuable intellectual tool, the actual theorems and proofs from your geometry class are not often used in computer graphics. If you go to graduate school in a mathematics related field (including computer graphics) then you may well find yourself proving theorems, but this is not necessary in order to start out in graphics.</p><p>If you have a good understanding of algebra and trigonometry then you are quite prepared to begin reading an introductory book in computer graphics. Most such books contain at least an abbreviated introduction to the next important area of mathematics for computer graphics, namely linear algebra.</p><p><strong>Book recommendation:</strong></p><p>Computer Graphics: Principles and Practice<br>James Foley, Andries van Dam, Steven Feiner, John Hughes<br>Addison-Wesley<br>[a huge book, but still my favorite]</p><h2 id="Linear-Algebra"><a href="#Linear-Algebra" class="headerlink" title="Linear Algebra"></a>Linear Algebra</h2><p>The ideas of linear algebra are used throughout computer graphics. In fact, any area that concerns itself with numerical representations of geometry often will collect together numbers such as x,y,z positions into mathematical objects called vectors. Vectors and a related mathematical object called a matrix are used all the time in graphics. The language of vectors and matrices is an elegant way to describe (among other things) the way in which an object may be rotated, shifted (translated), or made larger or smaller (scaled). Linear algebra is usually offered either in an advanced high school class or in college. Anyone who wishes to work in computer graphics should eventually get a solid grounding in this subject. As I mentioned before, however, many textbooks in graphics give a reasonable introduction to this topic– often enough to get you through a first course in graphics.</p><p><strong>Book recommendation:</strong></p><p>Linear Algebra and Its Applications<br>Gilbert Strang<br>Academic Press</p><h2 id="Calculus"><a href="#Calculus" class="headerlink" title="Calculus"></a>Calculus</h2><p>Knowledge of calculus is an important part of advanced computer graphics. If you plan to do research in graphics, I strongly recommend getting a basic grounding in calculus. This is true not just because it is a collection of tools that are often used in the field, but also because many researchers describe their problems and solutions in the language of calculus. In addition, a number of important mathematical areas require calculus as a prerequisite. This is the one area in mathematics in addition to basic algebra that can open the most doors for you in computer graphics in terms of your future mathematical understanding.<br>Calculus is the last of the topics that I will mention that is often introduced in high school. The topics to follow are almost always found in college courses.</p><h2 id="Differential-Geometry"><a href="#Differential-Geometry" class="headerlink" title="Differential Geometry"></a>Differential Geometry</h2><p>This area of mathematics studies equations that govern the geometry of smooth curves and surfaces. If you are trying to figure out what direction is perpendicular to (points directly away from) a smooth surface (the “normal vector”) then you are using differential geometry. Making a vehicle travel at a particular speed along a curved path is also differential geometry. There is a common technique in graphics for making a smooth surface appear rough known as “bump mapping”, and this method draws on differential geometry. If you plan to do work with curves and surfaces for shape creation (called “modeling” in the graphics field) then you should learn at least the basics of differential geometry. Multivariable calculus is the prerequisite for this area.</p><p><strong>Book recommendation:</strong></p><p>Elementary Differential Geometry<br>Barrett O’Neill<br>Academic Press</p><h2 id="Numerical-Methods"><a href="#Numerical-Methods" class="headerlink" title="Numerical Methods"></a>Numerical Methods</h2><p>Almost every time we represent and manipulate numbers in the computer we use approximate instead of exact values, and because of this there is always the possibility for errors to creep in. Moreover, there are often many different approaches to solving a given numerical problem, and some methods will be faster, more accurate or require less memory than others. The study of these issues goes by a number of names including “numerical methods” and “scientific computing”. This is a very broad area, and several of the other areas of mathematics that I will mention can be considered sub-areas underneath this umbrella. These sub-areas include sampling theory, matrix equations, numerical solution of differential equations, and optimization.</p><p><strong>Book recommendation:</strong></p><p>Numerical Recipes in C: The Art of Scientific Computing<br>William Press, Saul Teukolsky, William Vetterling and Brian Flannery<br>Cambridge University Press<br>[this is a very valuable reference but is not normally used as a textbook]</p><h2 id="Sampling-Theory-and-Signal-Processing"><a href="#Sampling-Theory-and-Signal-Processing" class="headerlink" title="Sampling Theory and Signal Processing"></a>Sampling Theory and Signal Processing</h2><p>Over and over in computer graphics we represent some object such as an image or a surface as a collection of numbers that are stored in a regular two-dimensional array. Whenever we do this we are creating a “sampled” representation of the object. A good understanding of sampling theory is important if we are to use and to control the quality of such representations. A common issue in sampling as it applies to graphics is the jagged edges that can appear on the silhouette of an object when it is drawn on a computer screen. The appearance of such jagged edges (one form of a phenomenon known as “aliasing”) is very distracting, and this can be minimized by using well-understood techniques from sampling theory. At the heart of sampling theory are concepts such as convolution, the Fourier transform, and spatial and frequency representations of functions. These ideas are also important in the fields of image and audio processing.</p><p><strong>Book recommendation:</strong></p><p>The Fourier Transform and Its Applications<br>Ronald N. Bracewell<br>McGraw Hill</p><h2 id="Matrix-Equations"><a href="#Matrix-Equations" class="headerlink" title="Matrix Equations"></a>Matrix Equations</h2><p>There are a wide variety of problems that come up in computer graphics that require the numerical solution of matrix equations. Some problems that need matrix techniques include: finding the best position and orientation to match one object to another (one example of a “least squares” problem), creating a surface that drapes over a given collection of points with minimal creases (thin-plate splines), and simulation of materials such as water or cloth. Matrix formulations of problems come up often enough in graphics that I rank this area very high on my list of topics to know.</p><p><strong>Book recommendation:</strong></p><p>Matrix Computations<br>Gene Golub and Charles Van Loan<br>Johns Hopkins University Press</p><h2 id="Physics"><a href="#Physics" class="headerlink" title="Physics"></a>Physics</h2><p>Physics is obviously a field of study in its own right and not a sub-category of mathematics. Nevertheless, physics and mathematics are closely tied to one another in several areas within computer graphics. Examples of graphics problems that involve physics include how light interacts with the surfaces of objects, how light bounces around in a complex environment, the way people and animals move, and the motion of water and wind. Knowledge of physics is important for simulating all of these phenomena. This is closely tied to solving differential equations, which I shall discuss next.</p><h2 id="Numerical-Solutions-of-Differential-Equations"><a href="#Numerical-Solutions-of-Differential-Equations" class="headerlink" title="Numerical Solutions of Differential Equations"></a>Numerical Solutions of Differential Equations</h2><p>It is my belief that techniques for solving differential equations are extremely important to computer graphics. As we just discussed, much of computer graphics is devoted to simulating physical systems from the real world. How waves form in water and how an animal walks across the ground are two examples of physical simulation. Simulation of physical systems very often leads to numerical solutions of differential equations. Note that this is actually very different than symbolic solutions to differential equations. Symbolic solutions are exact answers, and usually can be found only for extremely simple sets of equations. Sometimes a college course called “Differential Equations” will only examine symbolic solutions, and this will not help much for most computer graphics problems.<br>In physical simulation, one breaks the world down into little pieces that are represented as large vectors. Then the relations between the parts of the world are captured in the entries in matrices. Solving the matrix equations that arise is not usually done exactly, but is instead performed by carrying out a long series of calculations that yields an approximate solution as a list of numbers. This is what numerical solutions of differential equations are about. Note that the solution of matrix equations is an intimate part of numerical solutions to differential equations.</p><h2 id="Optimization"><a href="#Optimization" class="headerlink" title="Optimization"></a>Optimization</h2><p>Quite often in computer graphics we are looking for a description of an object or a collection of objects that satisfies some desired goal. Examples include looking for the positions of lights that give a certain “feeling” to how a room is lit, figuring out how an animated character can move its limbs to carry out a particular action, and positioning shapes and text on a page so that the result does not look cluttered. Each of these examples can be stated as an optimization problem. Ten years ago there was little in the graphics literature that made use of optimization techniques, but the field is using optimization more and more in recent work. I think that optimization will continue to play an increasingly important role in computer graphics.</p><h2 id="Probability-and-Statistics"><a href="#Probability-and-Statistics" class="headerlink" title="Probability and Statistics"></a>Probability and Statistics</h2><p>There are a number of areas within computer graphics that make use of probability and/or statistics. Certainly when researchers carry out studies using human subject, they require statistical methods in order to perform the analysis of the data. Graphics related areas that often make use of human subjects include Virtual Reality and Human-Computer Interaction (HCI). In addition, many computer descriptions of the real world involve using various probabilities that a given action will occur. The probability that a tree limb will branch during growth or that a synthetic animal will decide to walk in a particular direction are two examples of this. Finally, some techniques for solving difficult equations make use of random numbers to estimate their solutions. An important example of this is a class of techniques known as Monte Carlo methods that are often used to determine how light propagates in an environment. These are just a few of the ways that probability and statistics are used in computer graphics.</p><h2 id="Computational-Geometry"><a href="#Computational-Geometry" class="headerlink" title="Computational Geometry"></a>Computational Geometry</h2><p>Computational geometry is the study of efficient ways to represent and manipulate geometry within the computer. Typical problems include testing whether two objects collide, deciding how to break up a polygon into triangles, and finding the nearest point in a group to a given location. This area is a blend of algorithms, data structures and mathematics. Researchers in graphics who work on creating shapes (modeling) draw heavily upon this area.<br>Book recommendations:</p><p>Computational Geometry in C<br>Joseph O’Rourke<br>Cambridge University Press<br>[undergraduate text]<br>Computational Geometry: An Introduction<br>Franco Preparata and Michael Shamos<br>Springer-Verlag<br>[the classic text, somewhat dated]</p><h2 id="Concluding-Words-Applied-and-Pure-Mathematics"><a href="#Concluding-Words-Applied-and-Pure-Mathematics" class="headerlink" title="Concluding Words: Applied and Pure Mathematics"></a>Concluding Words: Applied and Pure Mathematics</h2><p>One common thread to many of the mathematical topics that are associate with graphics is that they are from the applied side instead of the theoretical side of mathematics. This should not come as a surprise. Many of the problems in computer graphics are closely tied to problems that physicists and engineers have studied, and the mathematical tools of the physicist and of the engineer are overwhelmingly the tools that graphics researchers use. Most of the topics that make up theoretical (“pure”) mathematics are seldom put to use in computer graphics. This should not be taken as an absolute truth, however. We should pay attention to examples from other fields: molecular biology is now drawing upon knot theory for the study of DNA dynamics, and subatomic physics makes use of abstract group theory. Who can tell when a “pure” mathematics topic will be put to use in computer graphics?<br>There are a few areas of mathematics that seem as though they ought to be important and yet never really play a large part in computer graphics. Perhaps the most interesting of these areas is topology. The usual one-sentence description of topology is the study of why a doughnut and a coffee cup are the same. The answer is that they are both surfaces with one hole. Here we are talking about ideas from topology. Aren’t surfaces a big part of computer graphics? Yes, but it turns out that most of the ideas in topology that are useful to graphics can be learned in a first course in differential geometry. Differential geometry studies the <em>shapes</em> of surfaces, whereas topology studies things such as which parts of a surface are next to which other parts. I have seen very little topology that is put to use in graphics, and I believe that this is because much of topology is concerned with rather abstract sets, and that much of topology is far removed from the concepts in three dimensional Euclidean space that is so central to most of graphics. There are times when the formalism of topology (the symbolic notation) is a convenient way to express ideas in graphics, but the actual tools from abstract topology so seldom play a role in graphics. Study this beautiful subject for its own sake, but don’t expect an immediate payoff for graphics!</p><p>I have been asked a few times whether either abstract algebra (group theory, rings, etc.) or number theory play a role in computer graphics. Not much that I have seen. These subjects, like topology, are areas that are full of beautiful ideas. Unfortunately these ideas seldom find their way into computer graphics.</p>]]></content>
      
      
      <categories>
          
          <category> Graphics </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Graphics </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>重装系统配置Hexo</title>
      <link href="/posts/78db2b53/"/>
      <url>/posts/78db2b53/</url>
      
        <content type="html"><![CDATA[<p>记录重装系统后恢复Hexo方法.</p><span id="more"></span><ol><li><p>安装git</p></li><li><p>安装Node.js</p></li><li><p>在本地新建the-sword.github.io文件夹(这是我的github.io的名字，这样是为了查找方便)</p></li><li><p>使用命令安装Hexo</p><p> 右键选择<strong>Git Bash Here</strong>，弹出<strong>Git Bash</strong>窗口；执行命令：</p><pre><code> npm install -g hexo-cli hexo init</code></pre></li><li><p>连接github仓库</p><pre><code> git config --global user.name  &quot;user.name&quot; git config --global user.email &quot;user.email&quot; git init git checkout -b hexo    //因为我的博客源文件放在hexo分支 git remote add origin https://github.com/the-sword/the-sword.github.io.git    //连接hexo分支仓库</code></pre></li><li><p>使用仓库文件覆盖本地文件</p><pre><code> git fetch --all git reset --hard origin/hexo    //因为我的博客源文件放在hexo分支 git pull</code></pre></li><li><p>此时记得删除.deploy_git文件夹，否则博客会丢失图标</p></li><li><p>随后即可使用hexo相关命令，修改本地文件后，push到hexo分支即可用travis-ci工具自动更新博客。</p></li></ol><p><strong>注</strong>：</p><p>直接使用git clone命令把博客源文件复制到本地，修改文件后也可以使用travis-ci工具自动更新博客(该方法同样需要删除.deploy_git文件夹)。但是这样因为无法使用hexo命令，md文件的格式和某些元素无法自动生成，需要自己手动编辑，所以才有了这篇文章。</p>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件及导航</title>
      <link href="/posts/5c276c5b/"/>
      <url>/posts/5c276c5b/</url>
      
        <content type="html"><![CDATA[<p>介绍一些我自己常用的且很不错的软件，同时还附相关的网址导航和软件下载站，里面有些破解以及相关的软件推荐，大家可以去淘一下，说不定就能找到你需要的。</p><span id="more"></span><p><strong>更新20170916</strong></p><p>新增VNote，小孩桌面便签，取消WDTP推荐</p><p><strong>更新20170916</strong></p><p>更新Chrome浏览器扩展，增加简悦，微博图床，二管家</p><p><strong>更新20170914</strong></p><p>新增网络代理软件XX-Net</p><div align="center">----------------割一割----------------</div>## 浏览器>[Cent broswer](http://www.centbrowser.com/)>>[Google Chrome](https://www.google.com/chrome/browser/desktop/index.html)>    扩展：                - SimpRead简悦:让你瞬间进入沉浸式阅读的 Chrome 扩展,已适配200+网址        - Click&Clean:浏览器关闭时，这款应用程序删除你的浏览历史,防止他人跟踪你的网上活动        - FaWave(发微):支持多微博的Chrome插件        - Google学术搜索按钮        - IDM Integration Module        - Inoreader Companion:Rss订阅        - LastPass: Free Password Manager:密码管理器        - OneTab:节省高达95％的内存，并减轻标签页混乱现象        - Pinterest Save Button:一键保存图片至Pinterest        - Save to Pocket:稍后阅读Pocket插件        - Tampermonkey:脚本管理扩展        - Text Mode:以纯文本形式显示网页        - uBlock Origin:一款高效的网络请求过滤工具,屏蔽广告        - 右键搜:扩展右键菜单        - 微博图床：简单好用的新浪微博图床,支持选择/拖拽/粘贴上传图片,并生成图片地址,HTML,UBB和Markdown等格式,支持浏览和删除历史记录        - 阅读模式:提供与Safari阅读模式功能一致的插件，浏览文章页时候可进入友好的阅读模式，并自定义阅读功能        - 二管家（替换一键管理所有扩展），自定义规则自动开启扩展，方便快捷>Opera Neon<h2 id="聊天通讯"><a href="#聊天通讯" class="headerlink" title="聊天通讯"></a>聊天通讯</h2><blockquote><p><a href="http://tim.qq.com/">TIM</a> </p><p><a href="https://weixin.qq.com/">微信</a></p></blockquote><h2 id="文档处理"><a href="#文档处理" class="headerlink" title="文档处理"></a>文档处理</h2><blockquote><p><a href="https://github.com/tamlok/vnote">VNote</a>–受Vim启发开发的专门为 Markdown 而优化、设计的笔记软件，可以作为自己的知识储备库。<strong>推荐</strong></p><p>Office2016–<a href="ed2k://|file|cn_office_professional_plus_2016_x86_x64_dvd_6969182.iso|2588266496|27EEA4FE4BB13CD0ECCDFC24167F9E01|/">ed2k链接</a></p><p><a href="http://www.jisupdf.com/">极速PDF</a></p><p><a href="http://www.luoxiao123.cn/adobecc2017.html">Adobe Acrobat DC</a></p><p><a href="http://markdownpad.com/">Markdown Pad</a>–Markdown编辑器<strong>推荐</strong></p><p><a href="http://underwaysoft.com/works/wdtp/index.html">WDTP</a>–新一代跨平台写作、内容创作、笔记、知识管理、前端开发与静态网站生成器  <strong>软件已转为付费</strong></p><p><a href="http://www.xmind.net/">XMind</a>–思维导图</p></blockquote><h2 id="邮箱软件"><a href="#邮箱软件" class="headerlink" title="邮箱软件"></a>邮箱软件</h2><blockquote><p><a href="http://www.yomail.com/">Yomail</a></p><p>Windows10 邮件</p></blockquote><h2 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a>游戏</h2><blockquote><p><a href="http://store.steampowered.com/about/?l=schinese">Steam</a></p></blockquote><h2 id="文献管理"><a href="#文献管理" class="headerlink" title="文献管理"></a>文献管理</h2><blockquote><p><a href="https://www.mendeley.com/">Mendeley</a></p><p><a href="http://endnote.com/">Endnote</a></p></blockquote><h2 id="网络代理"><a href="#网络代理" class="headerlink" title="网络代理"></a>网络代理</h2><blockquote><p><a href="https://github.com/breakwa11/shadowsocks-rss/wiki">ShadowSocks</a>–<a href="http://pan.baidu.com/s/1o7Tc0hc">网盘链接</a>  <strong>强烈推荐！！！</strong></p><p><a href="https://getlantern.org/">lantern</a></p><p><a href="https://github.com/XX-net/XX-Net">XX-Net</a> <strong>推荐！！</strong> </p></blockquote><h2 id="安全软件和防火墙"><a href="#安全软件和防火墙" class="headerlink" title="安全软件和防火墙"></a>安全软件和防火墙</h2><blockquote><p><a href="https://www.bitdefender.com/solutions/free.html" title="Bitdefender Free">Bitdefender Free</a> <strong>强烈推荐！！！</strong></p><p><a href="https://www.glasswire.com/">GlassWire</a>–时刻关注网络连接情况</p><p><a href="http://www.huorong.cn/">火绒安全软件</a></p><p><a href="https://www.malwarebytes.com/">Malwarebytes Anti-Malware</a>–<a href="http://pan.baidu.com/s/1pLDHA2Z">网盘链接</a></p></blockquote><h2 id="影音播放器"><a href="#影音播放器" class="headerlink" title="影音播放器"></a>影音播放器</h2><blockquote><p><a href="http://potplayer.daum.net/?lang=zh_CN">Potplayer</a> <strong>强烈推荐！！！</strong></p><p><a href="http://player.qq.com/">QQ影音</a></p></blockquote><h2 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h2><blockquote><p><a href="https://www.internetdownloadmanager.com/">Internet Download Manager</a>–强烈推荐，下载神器，不仅可以多线程下载，同时配合浏览器扩展可以自动捕捉页面的音视频等</p><p><a href="http://yangtai.xunlei.com/?cat=62">迅雷极速版</a>–极速版无广告</p></blockquote><h2 id="优化辅助"><a href="#优化辅助" class="headerlink" title="优化辅助"></a>优化辅助</h2><blockquote><p><a href="http://www.listary.com/">Listary</a>–能极大幅度提高你 Windows 文件浏览与搜索速度效率的「超级神器」 <strong>强烈推荐！！！</strong></p><p><a href="https://sourceforge.net/projects/ditto-cp/">Ditto</a>–剪贴板软件 <strong>强烈推荐！！！</strong></p><p><a href="https://zh.snipaste.com/">Snipaste</a>–截图软件</p><p><a href="https://www.bandisoft.com/bandizip/cn/">Bandizip</a>–压缩软件</p><p><a href="http://cn.ejie.me/">Clover</a>–Windows Explorer 资源管理器的一个扩展，为其增加类似谷歌 Chrome 浏览器的多标签页功能</p><p><a href="http://www.softwareok.com/?Download=Q-Dir">Q-Dir</a>–窗口资源管理器</p><p><a href="http://www.yingdev.com/projects/wgestures">WGestures</a>–全局鼠标手势 <strong>强烈推荐！！！</strong></p><p><a href="https://getcoldturkey.com/">Coldturkey</a>–网址屏蔽，<a href="http://pan.baidu.com/s/1kVoNnDX">网盘链接</a></p><p><a href="www.notesmaker.com">小孩桌面便签</a><strong>推荐</strong></p><p><a href="http://chs.desktopcal.com/chs/">电脑桌面日历软件</a>–桌面日历软件，界面简洁明了，操作方便，时刻关注deadline</p></blockquote><h2 id="匿名邮箱"><a href="#匿名邮箱" class="headerlink" title="匿名邮箱"></a>匿名邮箱</h2><blockquote><p><a href="https://www.guerrillamail.com/zh/inbox">Guerrilla</a>–一次性临时邮箱</p></blockquote><h2 id="网站导航及软件站"><a href="#网站导航及软件站" class="headerlink" title="网站导航及软件站"></a>网站导航及软件站</h2><blockquote><p><a href="http://www.gitnavi.com/">GitNavi</a></p><p><a href="http://search.chongbuluo.com/">快搜</a></p><p><a href="http://www.iplaysoft.com/">异次元软件世界- 软件改变生活！</a></p><p><a href="http://www.zdfans.com/">zd423 - 软件分享平台领跑者</a></p></blockquote><p><strong>未完待续</strong></p>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
            <tag> 翻墙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mendeley-文献管理软件</title>
      <link href="/posts/537baf1/"/>
      <url>/posts/537baf1/</url>
      
        <content type="html"><![CDATA[<p>以前看文献的时候一直用的是Endnote，但是感觉软件很笨重，并且还是收费的。后来发现了Mendeley这个，简直破费。</p><span id="more"></span><p>软件地址：<a href="https://www.mendeley.com/">Mendeley官网</a></p><h2 id="软件特点"><a href="#软件特点" class="headerlink" title="软件特点"></a>软件特点</h2><ol><li>支持PDF文件导入并自动提取文章信息，例如文章题目，作者，页数，类型，出版年份等，如果信息有误，用户还可以手动编辑。</li><li>支持软件内直接打开PDF，这样就可以免除安装专门的PDF软件，轻便快捷。</li><li>支持PDF标记，用户可以直接在PDF文档中添加注释，标记等，除此之外，还可以在notes内直接做笔记，随时记下灵感。</li><li>强大的搜索功能，可以搜索PDF全文。</li><li>同word联动，安装office插件，可以实现自动插入参考文献，方便论文引入参考文献。</li><li>跨平台支持，Windows，mac，iphone，ipad等平台。</li><li>强大的社区功能。</li><li><strong>同步功能，同步功能,同步功能</strong>,重要的事情说三遍!这真是一个极好的功能，每一个注册用户可以有1GB的存储空间和100MB的分享空间，可以同步自己的笔记，注释，标记等，个人感觉非常好用。</li></ol><p><img src="http://i.imgur.com/0iHQRGl.png"></p>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>腾讯服务器部署Centos+Tomcat+Mysql</title>
      <link href="/posts/b9a5dba/"/>
      <url>/posts/b9a5dba/</url>
      
        <content type="html"><![CDATA[<p>最近在做项目的时候，需要把war包上传到腾讯云服务器，查了一些资料，了解了相关的配置参数以及命令，自己做了一个整合，记录一下，方便以后使用查找。</p><pre><code>环境版本：    Linux版本: centos6.3x64    Java版本: jdk1.8.0_121    Tomcat版本: Tomcat 6.0.48    Mysql版本: 5.1.73</code></pre><span id="more"></span><h2 id="Java环境安装"><a href="#Java环境安装" class="headerlink" title="Java环境安装"></a>Java环境安装</h2><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">下载地址</a></p><ul><li><p>将下载好的安装包上传到云服务器/usr/local文件夹</p></li><li><p>安装JDK<br>  <code>rpm -ivh jdk-8u121-linux-x64.rpm</code></p></li><li><p>验证安装信息<br>  <code>java -version</code></p><p>  <img src="http://i.imgur.com/WvTr0X5.png"></p><p>  注意：</p><p>  在没有配置环境变量的情况下，可以正常执行java/jacac等命令。因此没有进行环境变量的配置，可能需要用到下面的命令：</p><pre><code>  #修改系统环境变量文件  vi /etc/profile  #添加以下文档  JAVA_HOME=/usr/java/jdk1.8.0_121  JRE_HOME=/usr/java/jdk1.8.0_121/jre  PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin  CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib  export JAVA_HOME JRE_HOME PATH CLASSPATH</code></pre><p>  相关vi命令：</p><pre><code>  esc 退出编辑模式  :wq 保存并退出</code></pre></li></ul><h2 id="Tomcat安装"><a href="#Tomcat安装" class="headerlink" title="Tomcat安装"></a>Tomcat安装</h2><p><a href="http://tomcat.apache.org/download-60.cgi">下载地址</a></p><ul><li><p>将Tomcat上传到云服务器/usr/local/文件夹</p></li><li><p>命令解压：</p><pre><code>  tar -zxf apache-tomcat-6.0.48.tar.gz  mv apache-tomcat-6.0.48.tar.gz tomcat</code></pre></li></ul><h2 id="Mysql安装"><a href="#Mysql安装" class="headerlink" title="Mysql安装"></a>Mysql安装</h2><ul><li><p>检测系统是否自带mysql<br>  <code>yum list installed | grep mysql</code></p></li><li><p>删除系统自带的mysql及其依赖命令<br>  <code>yum -y remove mysql-libs.x86_64</code></p></li><li><p>安装mysql 服务器命令<br>  <code>yum install mysql mysql-server mysql-devel -y</code></p></li><li><p>查看是否生成了mysqld服务, 并设置随机启动<br>  <code>chkconfig --list |grep mysql</code><br><img src="http://shp.qpic.cn/txdiscuz_pic/0/_bbs_qcloud_com_forum_201505_11_235640vpaaff0540iwn6p9.jpg/0"></p><p>  数字代码服务器启动级别，off  代表不随机启动mysqld服务，on代表随机启动服务<br>  我们需要设置mysqld随机启动，执行下面命令进行设置:<br>  <code>chkconfig mysqld on</code><br>  <code>chkconfig --list |grep mysql</code>这样的结果代表正常<br><img src="http://shp.qpic.cn/txdiscuz_pic/0/_bbs_qcloud_com_forum_201505_11_235659lylowmds6voocc6m.jpg/0"></p></li><li><p>启动mysqld服务<br>  <code>service mysqld start </code><br>  启动后，ps一下，看下进程是否起来, <code>ps -ef |grep mysql|grep -v grep</code></p></li><li><p>停止mysqld服务<br>  <code>service mysqld stop</code></p></li><li><p>重启mysqld服务<br>  <code>service mysqld srestart</code></p></li><li><p>命令行测试连接mysql ，后续可以在命令行中直接管理数据库<br>  <code>mysql</code><br>  直接执行，yum安装的mysql，本地root密码默认为空</p></li><li><p>设置MySQL的root用户设置密码</p><pre><code>  `[root@bogon ~]#  mysql -u root    mysql&gt; select user,host,password from mysql.user;    +------+-----------+----------+    | user | host      | password |    +------+-----------+----------+    | root | localhost |          |    | root | bogon     |          |    | root | 127.0.0.1 |          |    |      | localhost |          |    |      | bogon     |          |    +------+-----------+----------+    rows in set (0.01 sec)`</code></pre><p>  查询用户的密码，都为空，用下面的命令设置root的密码为root</p><pre><code>  mysql&gt; set password for root@localhost=password(&#39;root&#39;);  mysql&gt; exit;</code></pre></li><li><p>如果本地有数据库的话，可以先导出成.sql文件，上传到服务器中，再导入到数据库中。</p><pre><code>  create database mydb1;  //新建一个数据库  use mydb1;  //进入数据库  source /usr/local/xx.sql;     //即可导入</code></pre></li></ul><h2 id="上传war包"><a href="#上传war包" class="headerlink" title="上传war包"></a>上传war包</h2><p>将Web项目上传到tomcat中webApps目录下,重启服务器，进入tomcat/bin目录下，先执行<code>./shutdown.sh</code>，在执行<code>./startup.sh</code>，此时应该可以访问了。</p><p><strong>Note</strong>：Tomcat中<strong>bin/server.xml</strong> 中的端口要与项目中 <strong>pom.xml</strong>的端口一致。</p><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ol><li><a href="http://bbs.qcloud.com/thread-5583-1-1.html">mysql入门教程-安装mysql数据库</a> </li><li><a href="http://www.jianshu.com/p/9ce25b075ebb">腾讯云服务器CentOS安装JDK+Tomcat+MySQL详细步骤</a></li><li><a href="http://www.kuiblog.com/archives/174/">在腾讯云服务器centenOS安装Java、Tomcat和mysql</a></li><li><a href="http://www.cnblogs.com/yangyabo/p/5301364.html">腾讯云CentOS6.5下安装mysql，并配置好远程访问等权限，途中遇到的问题</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器部署 </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>码云同步</title>
      <link href="/posts/f64b0e0c/"/>
      <url>/posts/f64b0e0c/</url>
      
        <content type="html"><![CDATA[<p><img src="http://i.imgur.com/uCWI40e.jpg"></p><span id="more"></span><h2 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h2><p><a href="https://git-scm.com/download/"><strong>官网链接</strong></a></p><p>安装之后切记配置环境变量</p><h2 id="码云使用"><a href="#码云使用" class="headerlink" title="码云使用"></a>码云使用</h2><p><a href="http://git.oschina.net/oschina/git-osc/wikis/%E5%B8%AE%E5%8A%A9"><strong>官方帮助文档</strong></a></p><h3 id="在码云上创建项目"><a href="#在码云上创建项目" class="headerlink" title="在码云上创建项目"></a>在码云上创建项目</h3><p><img src="http://ww3.sinaimg.cn/large/6e529308jw1faevd8hvo4j20hw0eqjsm.jpg" alt="创建项目"></p><p>注：.gitignore这里添加之后在上传的时候会出现eror，所以我未创建</p><h3 id="创建-git-仓库"><a href="#创建-git-仓库" class="headerlink" title="创建 git 仓库"></a>创建 git 仓库</h3><ol><li><p>在工程目录空白处右键唤出git bash界面</p></li><li><p>Git全局设置</p><blockquote><p><code>$ git config --global user.name &quot;user.name&quot;</code>    //这里的用户名不是昵称，其为<a href="http://git.oschina.net/xxxx/Test%E4%B8%AD%E7%9A%84xxxx">http://git.oschina.net/xxxx/Test中的xxxx</a></p><p><code>$ git config --global user.email &quot;user.email&quot;</code>     //如果已经设定过则可以跳过这步</p></blockquote></li><li><p><code>$ git init</code>       //初始化一个git仓库</p></li><li><p><code>$ touch README.md</code>        //创建帮助文档,在上一步创建之后这一步可以不创建</p></li><li><p><code>$ git add -A</code>        //添加所有文件</p></li><li><p><code>$ git commit -m</code>  “注释内容”       //添加注释</p></li><li><p><code>$ git remote add origin https://git.oschina.net/username/xxx.git</code>(你的远程仓库地址，即是码云的项目地址)</p></li><li><p><code>$ git pull origin master</code></p><blockquote><p>若出现fatal: refusing to merge unrelated histories错误</p><p>参见<a href="http://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories">http://stackoverflow.com/questions/37937984/git-refusing-to-merge-unrelated-histories</a></p><p>git pull origin branchname –allow-unrelated-histories</p></blockquote></li><li><p><code>$ git push -u origin master</code> //上传仓库到码云</p></li></ol><h3 id="已有项目上传"><a href="#已有项目上传" class="headerlink" title="已有项目上传"></a>已有项目上传</h3><ol><li>切换至项目目录</li><li>在工程目录空白处右键唤出git bash界面</li><li><code>$ git remote add origin https://git.oschina.net/username/xxx.git</code></li><li><code>$ git push -u origin master</code></li></ol><h3 id="记录每次更新到仓库"><a href="#记录每次更新到仓库" class="headerlink" title="记录每次更新到仓库"></a>记录每次更新到仓库</h3><ol><li><code>$ git status</code> //更改文件后，可用该命令确定哪些文件当前处于什么状态</li><li><code>$ git add 未添加文件</code>    //跟踪新文件</li></ol><h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><ol><li><p><code>$ git checkout -b branchname</code></p><p> <code>Switched to a new branch &#39;branchname&#39;</code></p><p> 该命令相当于执行</p><blockquote><p><code>$ git branch branchname</code></p><p><code>$ git checkout branchname</code></p></blockquote></li><li><p><code>$ git checkout branchname</code>    //切换分支</p></li><li><p><code>$ git merge branchname</code>    //融合分支</p></li><li><p><code>$ git branch -d branchname</code>    //删除以融合分支</p></li></ol><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ol><li><a href="https://git-scm.com/book/zh/v2">Git-Book</a></li><li><a href="https://my.oschina.net/SnifferApache/blog/308863">如何使用git.oschina.net</a></li><li><a href="http://http//blog.csdn.net/mastery_nihility/article/details/53020481">上传项目到开源中国码云</a></li><li><a href="http://www.infocool.net/kb/ProjectManagement/201607/168429.html">Android studio使用git教程</a></li></ol><p>   ​</p>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Studio加入百度地图功能</title>
      <link href="/posts/39976cd1/"/>
      <url>/posts/39976cd1/</url>
      
        <content type="html"><![CDATA[<p>最近一直在学习在Android Studio里添加百度地图功能，但是初期遇到很多问题，经过多次实践以及众多大神的解答，终于解决了在android studio上使用百度地图的许多问题，现在记录如下。</p><span id="more"></span><h2 id="1-首先申请百度API-key"><a href="#1-首先申请百度API-key" class="headerlink" title="1.首先申请百度API key"></a>1.首先申请百度API key</h2><p>百度API key申请需要SHA1值以及包名，其中SHA1值我是自己创建一个keystore，步骤如下：</p><p>打开Build-&gt;Generate Signed APK，如图一设置数字签名的一系列参数，具体过程可度娘，最后获得一个.jks文件，如图中的baidumap.jks；</p><p><a href="http://i.imgur.com/xT2QWxk.png"><img src="http://i.imgur.com/xT2QWxk.png" alt="建立jks"></a></p><p>在创建jks文件时，注意选择Build Type，在测试阶段选择debug即可：</p><p><a href="http://i.imgur.com/4IuCCUJ.png"><img src="http://i.imgur.com/4IuCCUJ.png" alt="img"></a></p><p>之后打开Terminal，在其中输入keytool -list -v -keystore debug.jks；其中debug.jks替换成上面你自己创建的jks文件的完整路径名，如</p><p>keytool -list -v -keystore E:\AndriodStudioProjects\keystore\baidumap.jks</p><p><a href="http://i.imgur.com/TFgPdci.png"><img src="http://i.imgur.com/TFgPdci.png" alt="terminal"></a></p><p>之后会提示输入密钥库口令，直接回车</p><p>获得下图的SHA1值，这就是申请百度apikey安全码的签名部分。</p><p><a href="http://i.imgur.com/8f7Hba1.png"><img src="http://i.imgur.com/8f7Hba1.png" alt="SHA1"></a></p><p>具体申请过程可参考百度地图链接<a href="http://developer.baidu.com/map/index.php?title=androidsdk">http://developer.baidu.com/map/index.php?title=androidsdk</a></p><p>申请获得API key之后，还有关键的一步build.gradle(Module.app)的android{}代码段中添加如下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">signingConfigs&#123;</span><br><span class="line"></span><br><span class="line">    debug&#123;</span><br><span class="line"></span><br><span class="line">        storeFile file(&quot;你上面建的jks文件完整路径名);</span><br><span class="line"></span><br><span class="line">        storePassword &quot;xxxxx&quot;;</span><br><span class="line"></span><br><span class="line">        keyAlias &quot;xxxxx&quot;;</span><br><span class="line"></span><br><span class="line">        keyPassword &quot;xxxxxx&quot;;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此处注意看你申请的key的类型，如果在新建jks的时候选择的是debug，那么signingConfigs里面添加debug即可，如果是release，则要更改为release。</p><p>此步骤可解决：</p><p>在使用百度地图时候，出现地图不显示，或者只显示一部分地图，拖动地图后，地图不显示，都是白色格子，或者打印如下错误信息：</p><p><strong>Authentication Error errorcode: 230 uid: -1 appid -1 msg: APP Scode</strong>码校验失败</p><p>（此问题原因也有可能是其他，见链接<a href="http://blog.csdn.net/hhhccckkk/article/details/46649325">http://blog.csdn.net/hhhccckkk/article/details/46649325</a>）</p><h2 id="2-导入jar包和so文件，参见百度官方指导："><a href="#2-导入jar包和so文件，参见百度官方指导：" class="headerlink" title="2.导入jar包和so文件，参见百度官方指导："></a>2.导入jar包和so文件，参见百度官方指导：</h2><p>Android Studio工程配置方法</p><p>第一步：在工程app/libs目录下放入baidumapapi_vX_X_X.jar包,在src/main/目录下新建jniLibs目录，放入libBaiduMapSDK_vX_X_X_X.so如下图所示，注意jar和so的前3位版本号必须一致，并且保证使用一次下载的文件夹中的两个文件，不能不同功能组件的jar或so交叉使用。</p><p>第二步：导入jar包。菜单栏选择File-&gt;Project Structor-&gt;Modules-&gt;Dependencies,点击+号，选择File dependency，选择jar包导入。</p><p>通过以上两步操作后，您就可以正常使用百度地图SDK为您提供的全部功能了。</p><p>附链接：<a href="http://developer.baidu.com/map/index.php?title=androidsdk">http://developer.baidu.com/map/index.php?title=androidsdk</a></p><h2 id="3-程序代码，可参照百度示例"><a href="#3-程序代码，可参照百度示例" class="headerlink" title="3.程序代码，可参照百度示例"></a>3.程序代码，可参照百度示例</h2><p><a href="http://developer.baidu.com/map/index.php?title=androidsdk/guide/hellobaidumap">http://developer.baidu.com/map/index.php?title=androidsdk/guide/hellobaidumap</a></p><p>最新的百度地图控件是3.5版，而有些指导书是按照2.xx版写的，所以代码会有差别，注意区分。</p><p>百度地图的官方Demo对各个部分的功能写的很详细，可参考之。</p>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> 百度地图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux学习笔记</title>
      <link href="/posts/b30ceb9f/"/>
      <url>/posts/b30ceb9f/</url>
      
        <content type="html"><![CDATA[<p>Linux学习笔记，不定期更新</p><span id="more"></span><img src="http://www.extremetech.com/wp-content/uploads/2012/01/linux.jpg" />## Linux简介<h3 id="服务器版本redhat（部分收费）CentOS（完全免费）"><a href="#服务器版本redhat（部分收费）CentOS（完全免费）" class="headerlink" title="服务器版本redhat（部分收费）CentOS（完全免费）"></a>服务器版本redhat（部分收费）CentOS（完全免费）</h3><h3 id="学习方法"><a href="#学习方法" class="headerlink" title="学习方法"></a>学习方法</h3><p>Linux严格区分大小写</p><p>Linux中所有内容以文件形式保存，包括硬件，即一切皆文件</p><p>Linux不靠扩展名区分文件类型，靠权限来分，但默认可以有压缩包，二进制软件包，网页文件，脚本文件，配置文件的区分。</p><p>windows下的软件不能再linux下直接安装和运行</p><h3 id="字符界面的优势"><a href="#字符界面的优势" class="headerlink" title="字符界面的优势"></a>字符界面的优势</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.资源占用少</span><br><span class="line"></span><br><span class="line">2.减少被攻击和出错的可能性</span><br><span class="line"></span><br><span class="line">2虚拟机的安装</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h2><h3 id="系统分区与格式化"><a href="#系统分区与格式化" class="headerlink" title="系统分区与格式化"></a>系统分区与格式化</h3><p>逻辑分区：</p><h3 id="分区之分区设备文件名与挂载"><a href="#分区之分区设备文件名与挂载" class="headerlink" title="分区之分区设备文件名与挂载"></a>分区之分区设备文件名与挂载</h3><p>分区&gt;格式化&gt;起设备名&gt;分配盘符</p><p>硬件设备文件名：如/dev/sda1:第一块scsi硬盘或者sata硬盘的第一个分区</p><p>linux中树形结构，/代表根目录</p><p>主分区只可以用1.2.3.4表示，但逻辑分区不能用这四个数字表示</p><p>挂载：给分区分配盘符的过程</p><p>必须分区：<br>/根分区<br>swap分区：交换分区，内存2倍，超过4gb内存的可以跟内存一样大即可，实验室环境下可不超过2gb<br>推荐分区：<br>/boot分区：启动分区，200MB</p><h3 id="Linux系统安装"><a href="#Linux系统安装" class="headerlink" title="Linux系统安装"></a>Linux系统安装</h3><p>可以安装basic 服务器</p><h3 id="XShell安装和使用"><a href="#XShell安装和使用" class="headerlink" title="XShell安装和使用"></a>XShell安装和使用</h3><h2 id="命令基本格式与文件处理命令"><a href="#命令基本格式与文件处理命令" class="headerlink" title="命令基本格式与文件处理命令"></a>命令基本格式与文件处理命令</h2><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><p>[root@localhost ~]#</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root：当前登录用户</span><br><span class="line"></span><br><span class="line">localhost：主机名</span><br><span class="line"></span><br><span class="line">~：当前所在目录 #：超级用户的提示符，普通用户的提示符是$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>root用户的根目录是/root，普通用户</p><p>pwd：显示当前的位置</p><p>命令 [选项] ［参数]</p><p>查询目录中的文件 ls</p><p>ls -l显示详细信息，</p><p>例如dr-xr-xr-x. 5 root root 1024 7月 15 19:26 boot</p><p>其中形如-rw-r–r–（一共有九位）的解释如下：</p><p>(&gt;) -文件类型（其中-文件，d目录，l软链接文件）（r读 w写 x执行）</p><p> rw- 代表u所有者</p><p> r– 代表g所属组</p><p> r– 代表o其他人</p><p>其中5：引用计数</p><p>root：所有者</p><p>root：所属组</p><p>1024：字节大小</p><h3 id="目录处理命令"><a href="#目录处理命令" class="headerlink" title="目录处理命令"></a>目录处理命令</h3><p>创建目录mkdir -p [目录名]<br>-p：递归创建（上级目录不存在而想1要在创建子目录）<br>切换目录 cd：cd ~和cd进入当前目录<br>cd ..上一级目录<br>cd -上一次访问目录<br>cd .进入目录</p><p>crtl+L快捷清屏/tab键补全</p><p>相对路径：cd ../usr/local/src/参照当前目录<br>绝对路径：cd /etc/从根目录下开始查找</p><p>删除空目录：rmdir [目录名]<br>删除文件和目录：rm -rf [目录名]</p><p>复制命令：cp [选项] [原文件或目录] [目标目录]<br>-r 复制目录<br>-p 连带文件属性复制<br>-d 若源文件是链接文件，则复制链接属性<br>-a 相当于 -pdr（和源文件一模一样，包括属性等）<br>ll=ls -l<br>剪切或改名命令：mv [原文件或目录] [目标目录]</p><h3 id="常用目录作用："><a href="#常用目录作用：" class="headerlink" title="常用目录作用："></a>常用目录作用：</h3><p>“/“ 根目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Linux系统的最高级目录。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/bin” 命令保存目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">存放着如&quot;cp&quot;、&quot;ls&quot;、&quot;cat&quot;等命令(普通用户就可以读取的命令)。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/boot” 启动目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主要存放启动Linux系统所必需的文件，包括内核文件、启动菜单配置文件等，</span><br><span class="line">当计算机启动时，这些文件会首先被加载。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/dev” 设备文件保存目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这里主要存放与设备（包括外设）有关的文件</span><br><span class="line">(unix和linux系统均把设备当成文件)。</span><br><span class="line">想连线打印机吗？系统就是从这个目录开始工作的。</span><br><span class="line">另外还有一些包括磁盘驱动、USB驱动等都放在这个目录。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/etc” 配置文件保存目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">举个例子：你安装了samba这个套件，当你想要修改samba配置文件的时候，</span><br><span class="line">你会发现这些配置文件就在/etc/samba目录下。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/home” 普通用户的家目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">比如说有个用户叫liu，那他的家目录就是/home/liu，</span><br><span class="line">并且用户的个人数据如桌面文件等都存放在这里。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/lib” 系统库保存目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">这个目录里存放着系统最基本的动态连接库，</span><br><span class="line">几乎所有的应用程序都须用这些共享库。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/lost+found”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这个目录一般情况下是空的，</span><br><span class="line">当系统非法关机后,如果你丢失了一些文件，在这里能找回来</span><br><span class="line">用来存放fsck过程中部分修复的文件的。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/media” 挂载目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">光盘等存储设备默认挂载点。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/misc” 挂载目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">磁带机等设备的挂载点。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/mnt” 系统挂载目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">系统提供这个目录是让用户临时挂接别的文件系统</span><br><span class="line">如U盘、移动硬盘等。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/net” 网络目录挂载点。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/net 是使用自动挂载(automount)时挂载网络目录的标准挂载点。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/opt”</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/opt 目录可以理解为安装可选程序的地方。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/proc” 内存文件目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录中保存的是内存的过载点。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/root” 超级用户(root)的家目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">里面存放根用户(root用户)的数据、文件等。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/sbin” 命令保存目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s就是super user的意思，也就是说这里存放的是root管理员使用的命令程序。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/sys” 内存文件目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">目录中保存的是内存的过载点。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/tmp” 临时文件目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">这个目录是存放一些临时文件的地方。</span><br><span class="line">有些linux系统会定期自动对这个目录进行清理，</span><br><span class="line">因此，千万不要把重要的数据放在这里。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/usr” 系统软件资源目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主要存放安装的软件、系统共用的文件、内核源码等。</span><br><span class="line">一般我们会将自己需要的软件安装到&quot;/usr/local&quot;目录下。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>“/var” 系统相关文档内容存放目录。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">动态文件或数据存放目录，默认日志文件都存放在这个目录下(&quot;/var/log/&quot;)，</span><br><span class="line">一般建议把此目录单独划分一个分区。</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="链接命令：ln"><a href="#链接命令：ln" class="headerlink" title="链接命令：ln"></a>链接命令：ln</h3><p>硬链接\软链接</p><p>软链接：类似与windows的快捷方式</p><h2 id="文件搜索命令"><a href="#文件搜索命令" class="headerlink" title="文件搜索命令"></a>文件搜索命令</h2><h3 id="文件搜索命令locate"><a href="#文件搜索命令locate" class="headerlink" title="文件搜索命令locate"></a>文件搜索命令locate</h3><p>locate 文件名 在后台数据库按文件名搜索，搜索速度更快</p><p>/var/lib/mlocate #locate命令所搜索的后台数据库</p><p>updatedb 更新数据库，否则新建文件有时候locate会搜不到</p><p>locate命令会遵循/etc/updatedb.conf配置文件的配置进行搜索</p><h3 id="命令搜索命令whereis与which"><a href="#命令搜索命令whereis与which" class="headerlink" title="命令搜索命令whereis与which"></a>命令搜索命令whereis与which</h3><p>whereis ls，会弹出命令所在目录，帮助文档等</p><p>which 文件名 命令所在位置及别名</p><p>PATH环境变量 ：定义的是系统搜索命令的路径</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo $PATH</span><br><span class="line"></span><br><span class="line">/usr/lib/qt-3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="文件搜索命令find"><a href="#文件搜索命令find" class="headerlink" title="文件搜索命令find"></a>文件搜索命令find</h3><p>功能多但是参数多且复杂</p><p>find 搜索范围 搜索条件</p><p>例如：[root@localhost ~]# find / -name install.log</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/root/install.log</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此命令耗费资源会较大</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">*   匹配任意内容</span><br><span class="line"></span><br><span class="line">？   匹配任意一个字符</span><br><span class="line"></span><br><span class="line">[]  匹配任意一个中括号内的字符</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="搜索字符串命令grep"><a href="#搜索字符串命令grep" class="headerlink" title="搜索字符串命令grep"></a>搜索字符串命令grep</h3><p>grep [选项] 字符串 文件名 #在文件中搜索符合条件额字符串</p><h2 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h2><h3 id="帮助命令-1"><a href="#帮助命令-1" class="headerlink" title="帮助命令"></a>帮助命令</h3><p>帮助命令：man 命令 #获取指定命令的帮助<br>man ls即可跳到ls的帮助文档（man的级别：1-9个级别）</p><p>查看命令拥有那个级别的帮助：man -f 命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">相当于whatis   命令</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>举例：man -5 passwd<br>查看和命令有关的所有帮助</p><p>man -k 命令 相当于 apropos 命令</p><p>例如：apropos passwd</p><h3 id="其他帮助命令"><a href="#其他帮助命令" class="headerlink" title="其他帮助命令"></a>其他帮助命令</h3><p>命令 –help<br>shell内部命令帮助：</p><p>help shell内部命令 #获取shell内部命令的帮助</p><p>如whereis cd：确定是否是shell内部命令，不包含bin/可执行文件，cd即为shell内部命令</p><p>help cd：获取内部命令的帮助<br>详细命令帮助info：</p><p>info 命令</p><p> -回车：进入资本主页面（带有*号标记）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-u：进入上层页面</span><br><span class="line">-n:进入下一个帮助小节</span><br><span class="line">-p:进入上一个帮助小节</span><br><span class="line">-q:退出</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h2><h3 id="压缩命令1"><a href="#压缩命令1" class="headerlink" title="压缩命令1"></a>压缩命令1</h3><p>.zip .gz .bz2 .tar.gz .tar.bz2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.zip   压缩文件名  源文件：压缩文件</span><br><span class="line">    zip  -r  压缩文件名  源文件：压缩目录</span><br><span class="line"></span><br><span class="line">    linux压缩包用红颜色标示</span><br><span class="line"></span><br><span class="line">    解压缩     unzip  压缩文件</span><br><span class="line"></span><br><span class="line">2. .gz格式压缩</span><br><span class="line"></span><br><span class="line">    .gz解压缩</span><br><span class="line"></span><br><span class="line">3.  .bz2格式压缩</span><br><span class="line"></span><br><span class="line">    .bz2格式解压缩</span><br><span class="line">4.  .tar.gz</span><br><span class="line"></span><br><span class="line">5.  .tar.bz2</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="关机与重启命令"><a href="#关机与重启命令" class="headerlink" title="关机与重启命令"></a>关机与重启命令</h2><h2 id="其他常见命令"><a href="#其他常见命令" class="headerlink" title="其他常见命令"></a>其他常见命令</h2><h3 id="挂载命令"><a href="#挂载命令" class="headerlink" title="挂载命令"></a>挂载命令</h3><p>linux默认不支持NTFS文件系统，需要添加驱动包</p><h3 id="用户登录查看命令"><a href="#用户登录查看命令" class="headerlink" title="用户登录查看命令"></a>用户登录查看命令</h3><p>w查看当前登录用户<br>last lastlog等多种命令</p><h2 id="shell基础"><a href="#shell基础" class="headerlink" title="shell基础"></a>shell基础</h2><h3 id="shell概述"><a href="#shell概述" class="headerlink" title="shell概述"></a>shell概述</h3><p>类似命令与二进制之间的翻译器，命令解释器或者说是操作界面</p><p>shell主要语法类型bource和c两种，linux大多数用的是bource</p><h3 id="脚本执行方式"><a href="#脚本执行方式" class="headerlink" title="脚本执行方式"></a>脚本执行方式</h3><p>1.echo输出命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo -e 支持反斜杠命令</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.第一个脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash  xxx.sh</span><br><span class="line">chmod  xxx.sh         ./xxx.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3.bash的基本功能</p><h3 id="命令别名与快捷键-alias查看别名"><a href="#命令别名与快捷键-alias查看别名" class="headerlink" title="命令别名与快捷键 alias查看别名"></a>命令别名与快捷键 alias查看别名</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alias  命令=“别名”临时生效，重启恢复，若想永久要写入环境变量配置文件vi ~/.bashrc</span><br><span class="line"></span><br><span class="line">删除别名：unalias</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="http://i.imgur.com/2oqE48D.png"><img src="http://i.imgur.com/2oqE48D.png" alt="linux快捷键"></a></p><h3 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h3><p><a href="http://i.imgur.com/Kyoume6.png"><img src="http://i.imgur.com/Kyoume6.png" alt="img"></a></p><h3 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h3><p><a href="http://i.imgur.com/w9WSIij.png"><img src="http://i.imgur.com/w9WSIij.png" alt="img"></a></p><p><a href="http://i.imgur.com/Zy0zOzH.png"><img src="http://i.imgur.com/Zy0zOzH.png" alt="img"></a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>资源链接</title>
      <link href="/posts/e13fec62/"/>
      <url>/posts/e13fec62/</url>
      
        <content type="html"><![CDATA[<p>平时看到的比较好的资源链接，收集如下：</p><span id="more"></span><h1 id="Android学习"><a href="#Android学习" class="headerlink" title="Android学习:"></a>Android学习:</h1><ul><li><strong>Android基础入门教程</strong></li><li><strong>Android学习资源网站大全</strong></li><li><strong>伯乐在线-awesome-android</strong></li><li><strong>Android Tips</strong></li></ul><h1 id="Java学习："><a href="#Java学习：" class="headerlink" title="Java学习："></a>Java学习：</h1><ul><li><strong>Java™ Platform, Standard Edition 7</strong></li><li><strong>Java™ Platform, Standard Edition 8</strong></li><li><strong>Java视频学习资源</strong></li><li><strong>伯乐在线-awesome-java</strong></li></ul><h1 id="IOS"><a href="#IOS" class="headerlink" title="IOS"></a>IOS</h1><ul><li><strong>伯乐在线-awesome-ios</strong></li></ul><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><ul><li><p><strong>伯乐在线-awesome-python</strong></p><h1 id="算法："><a href="#算法：" class="headerlink" title="算法："></a>算法：</h1></li><li><p><strong>Introduction to Algorithms</strong></p></li></ul><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><ul><li><strong>伯乐在线-awesome-mysql</strong></li></ul><h1 id="未分类资源："><a href="#未分类资源：" class="headerlink" title="未分类资源："></a>未分类资源：</h1><ul><li><strong>Github上整理的日常发现的好资源</strong></li><li><strong>伯乐在线-awesome-programming-books</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> 软件资源 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习资源 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven构建SpringMVC项目实现注解及数据库事务管理</title>
      <link href="/posts/da9313af/"/>
      <url>/posts/da9313af/</url>
      
        <content type="html"><![CDATA[<p>Maven构建SpringMVC项目实现注解及数据库事务管理</p><span id="more"></span><h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><h2 id="构建工程"><a href="#构建工程" class="headerlink" title="构建工程"></a>构建工程</h2><p> 本项目搭建工具使用Eclipse。</p><h3 id="用maven插件构建项目框架"><a href="#用maven插件构建项目框架" class="headerlink" title="用maven插件构建项目框架"></a>用maven插件构建项目框架</h3><p> 打开菜单File –New-MavenProject，点击<strong>Next</strong>，选择maven-archetype-webapp，点击<strong>Next</strong>，如下图：</p><p><a href="http://i.imgur.com/36miC1f.png"><img src="http://i.imgur.com/36miC1f.png" alt="img"></a></p><p> 输入Group Id和artifact Id。Group Id一般填入项目名称，Artifact Id一般填入子项目的名称，如下图，点击<strong>完成</strong>。</p><p><a href="http://i.imgur.com/RgEnsHK.png"><img src="http://i.imgur.com/RgEnsHK.png" alt="img"></a></p><p> 等待构建完成，生成的项目文件结构如下图所示：</p><p><a href="http://i.imgur.com/L23ah7x.png"><img src="http://i.imgur.com/L23ah7x.png" alt="img"></a></p><p> 点击pom.xml文件，进入编辑界面，如下图： <a href="https://the-sword.github.io/2016/09/03/Maven%E6%9E%84%E5%BB%BASpringMVC%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E6%B3%A8%E8%A7%A3%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/pom%E6%96%87%E4%BB%B6.png"><img src="https://the-sword.github.io/2016/09/03/Maven%E6%9E%84%E5%BB%BASpringMVC%E9%A1%B9%E7%9B%AE%E5%AE%9E%E7%8E%B0%E6%B3%A8%E8%A7%A3%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/pom%E6%96%87%E4%BB%B6.png" alt="pom文件"></a></p><p> 增加Properties：展开Properties选项，然后点击<strong>Create…</strong>按钮，如下图所示：然后Name字段填入springVersion，Value字段填入3.2.5.RELEASE。即在pom.xml中增加了一个属性springVersion，属性值为3.2.5.RELEASE（此处value是根据自己所使用的Spring版本设置，由于本人使用的是3.2.5版本，所以填入3.2.5.RELEASE）。</p><p><a href="http://i.imgur.com/3qoICNE.png"><img src="http://i.imgur.com/3qoICNE.png" alt="img"></a></p><p> 增加Dependency：点击<strong>Dependencies</strong>标签，进入Dependencies编辑界面，点击<strong>Add…</strong>，添加Dependency属性，此过程是加入springframe的spring-web依赖库，${springVersion}是之前设置的属性，过程如下图所示：</p><p> Group Id：org.springframework</p><p> Artifact Id：spring-web</p><p> Version：${springVersion}</p><p> 点击<strong>确定</strong>按钮。</p><p><a href="http://i.imgur.com/tMYI5bg.png"><img src="http://i.imgur.com/tMYI5bg.png" alt="img"></a></p><p> 同理再新建一个Dependency，该过程是加入springframe的spring-webmvc依赖库，${springVersion}是之前设置的属性，具体属性值如下所示：</p><p> Group Id：org.springframework</p><p> Artifact Id：spring-webmvc</p><p> Version：${springVersion}</p><p> 点击<strong>确定</strong>按钮。</p><p> 设置完成之后，Ctrl+S保存，Maven会自动构建工作空间，下载所需要的依赖库文件，下载完成之后，可以看到如下图所示的库文件：</p><p>目录结构</p><p><a href="http://i.imgur.com/oBljhHT.png"><img src="http://i.imgur.com/oBljhHT.png" alt="img"></a></p><p>注意事项：<br>​ 由于后面会用到C3P0连接池，事务管理，mysql数据库驱动，所以还需要导入如左图蓝色标识的jar包</p><h3 id="添加Source-Fold"><a href="#添加Source-Fold" class="headerlink" title="添加Source Fold"></a>添加Source Fold</h3><p> 完善目录，添加source folder（源文件夹）。添加src/main/java，src/test/resources，src/test/java目录，让目录变成标准的maven结构，如下图：</p><p><a href="http://i.imgur.com/KUkXEv3.png"><img src="http://i.imgur.com/KUkXEv3.png" alt="img"></a></p><p><a href="http://i.imgur.com/E3dqazg.png"><img src="http://i.imgur.com/E3dqazg.png" alt="img"></a></p><p> 注意：如果Eclipse建立Maven项目后无法建立src/main/java资源文件夹，可以在项目上右键选择properties（首选项），然后点击java build path（java构建路径），在Librarys（库）下，编辑JRE System Library（JRE系统库），选择workspace default jre（工作空间缺省JRE）就可以了。</p><h2 id="建立数据库"><a href="#建立数据库" class="headerlink" title="建立数据库"></a>建立数据库</h2><h3 id="新建数据库hib-demo"><a href="#新建数据库hib-demo" class="headerlink" title="新建数据库hib_demo"></a>新建数据库hib_demo</h3><h3 id="新建t-dept-t-employee表，格式分别如下："><a href="#新建t-dept-t-employee表，格式分别如下：" class="headerlink" title="新建t_dept , t_employee表，格式分别如下："></a>新建t_dept , t_employee表，格式分别如下：</h3><p>t_dept</p><p><a href="http://i.imgur.com/YsUIa0y.png"><img src="http://i.imgur.com/YsUIa0y.png" alt="img"></a></p><p>t_employee</p><p><a href="http://i.imgur.com/hUE1weU.png"><img src="http://i.imgur.com/hUE1weU.png" alt="img"></a></p><h2 id="注解及数据库事务管理"><a href="#注解及数据库事务管理" class="headerlink" title="注解及数据库事务管理"></a>注解及数据库事务管理</h2><h3 id="注解及数据库事务管理代码清单"><a href="#注解及数据库事务管理代码清单" class="headerlink" title="注解及数据库事务管理代码清单"></a>注解及数据库事务管理代码清单</h3><h4 id="Dept-java"><a href="#Dept-java" class="headerlink" title="Dept.java"></a>Dept.java</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.test.dept;</span><br><span class="line">public class Dept &#123;</span><br><span class="line">private int deptId;</span><br><span class="line">private String deptName;</span><br><span class="line">public int getDeptId() &#123;</span><br><span class="line">return deptId;</span><br><span class="line">&#125;</span><br><span class="line">public void setDeptId(int deptId) &#123;</span><br><span class="line">this.deptId = deptId;</span><br><span class="line">&#125;</span><br><span class="line">public String getDeptName() &#123;</span><br><span class="line">return deptName;</span><br><span class="line">&#125;</span><br><span class="line">public void setDeptName(String deptName) &#123;</span><br><span class="line">this.deptName = deptName;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="DeptDao-java"><a href="#DeptDao-java" class="headerlink" title="DeptDao.java"></a>DeptDao.java</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">package com.test.dept;</span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line">import org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * dao实现，使用Spring对jdbc支持功能</span><br><span class="line"> * @author zhou</span><br><span class="line"> */</span><br><span class="line">@Repository</span><br><span class="line">public class DeptDao &#123;</span><br><span class="line"></span><br><span class="line">@Resource</span><br><span class="line">private JdbcTemplate jdbcTemplate;</span><br><span class="line">//public void save(Dept dept)&#123;</span><br><span class="line">//String sql = &quot;insert into t_dept (deptName) values(?)&quot;;</span><br><span class="line">//jdbcTemplate.update(sql,dept.getDeptName());</span><br><span class="line">//&#125;</span><br><span class="line">public void save(String empvalue,String deptvalue)&#123;</span><br><span class="line">String sql1 = &quot;insert into t_employee (empName) values(?)&quot;;</span><br><span class="line">jdbcTemplate.update(sql1,empvalue);</span><br><span class="line">String sql2 = &quot;insert into t_dept (deptName) values(?)&quot;;</span><br><span class="line">jdbcTemplate.update(sql2,deptvalue);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="TestJdbc-java"><a href="#TestJdbc-java" class="headerlink" title="TestJdbc.java"></a>TestJdbc.java</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">package com.test.dept;</span><br><span class="line"></span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.transaction.annotation.Isolation;</span><br><span class="line">import org.springframework.transaction.annotation.Propagation;</span><br><span class="line">import org.springframework.transaction.annotation.Transactional;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">@Controller</span><br><span class="line">public class TestJdbc &#123;</span><br><span class="line">// 部门dao</span><br><span class="line">@Resource</span><br><span class="line">private DeptDao deptDao;</span><br><span class="line">/*</span><br><span class="line"> * 事务控制</span><br><span class="line"> */</span><br><span class="line">@Transactional(</span><br><span class="line">readOnly = false,  // 读写事务</span><br><span class="line">timeout = -1,       // 事务的超时时间不限制</span><br><span class="line">//noRollbackFor = ArithmeticException.class,  // 遇到数学异常不回滚</span><br><span class="line">isolation = Isolation.DEFAULT,              // 事务的隔离级别，数据库的默认</span><br><span class="line">propagation = Propagation.REQUIRED// 事务的传播行为</span><br><span class="line">)</span><br><span class="line">@RequestMapping(&quot;save.do&quot;)</span><br><span class="line">public void save(HttpServletRequest request)&#123;</span><br><span class="line">System.out.println(&quot;成功&quot;);</span><br><span class="line">String empValue=request.getParameter(&quot;empName&quot;);</span><br><span class="line">String deptValue=request.getParameter(&quot;deptName&quot;);</span><br><span class="line">            //测试数据库事务，如有异常则回滚此数据库读写操作</span><br><span class="line">deptDao.save(empValue,deptValue);  // 保存员工名字和部门名字，如有异常则回滚此数据库读写操作</span><br><span class="line">int i = 1/0;   //设置异常</span><br><span class="line">deptDao.save(empValue,deptValue);  // 保存员工名字和部门名字</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="jsp页面"><a href="#jsp页面" class="headerlink" title="jsp页面"></a>jsp页面</h4><h5 id="input-jsp"><a href="#input-jsp" class="headerlink" title="input.jsp"></a>input.jsp</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"> &lt;form action=&quot;save.do&quot;&gt; </span><br><span class="line">员工名：&lt;input type=&quot;text&quot; name=&quot;empName&quot;&gt;</span><br><span class="line">部门名：&lt;input type=&quot;text&quot; name=&quot;deptName&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h5 id="save-jsp"><a href="#save-jsp" class="headerlink" title="save.jsp"></a>save.jsp</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">传入数据库成功</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="项目进行SpringMvc配置"><a href="#项目进行SpringMvc配置" class="headerlink" title="项目进行SpringMvc配置"></a>项目进行SpringMvc配置</h3><h4 id="配置web-xml"><a href="#配置web-xml" class="headerlink" title="配置web.xml"></a>配置web.xml</h4><p> 配置web.xml，使其具有springmvc特性，主要配置DispatcherServlet。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;  </span><br><span class="line">      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  </span><br><span class="line">      xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;  </span><br><span class="line">      version=&quot;3.0&quot;&gt;  </span><br><span class="line">    </span><br><span class="line">    &lt;welcome-file-list&gt;input.jsp&lt;/welcome-file-list&gt;</span><br><span class="line">  &lt;!--配置DispatcherServlet表示，该工程将采用springmvc的方式。启动时也会默认在/WEB-INF目录下查找XXX-servlet.xml作为配置文件，XXX就是DispatcherServlet的名字--&gt;</span><br><span class="line">    &lt;servlet&gt;</span><br><span class="line">        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;</span><br><span class="line">        &lt;servlet-class&gt;</span><br><span class="line">            org.springframework.web.servlet.DispatcherServlet</span><br><span class="line">        &lt;/servlet-class&gt;</span><br><span class="line">        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span><br><span class="line">    &lt;/servlet&gt;</span><br><span class="line">    &lt;servlet-mapping&gt;</span><br><span class="line">        &lt;servlet-name&gt;spring&lt;/servlet-name&gt;</span><br><span class="line">        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;</span><br><span class="line">    &lt;/servlet-mapping&gt;  </span><br><span class="line">&lt;/web-app&gt;</span><br></pre></td></tr></table></figure><h4 id="配置spring-servlet-xml"><a href="#配置spring-servlet-xml" class="headerlink" title="配置spring-servlet.xml"></a>配置spring-servlet.xml</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;  </span><br><span class="line">    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;  </span><br><span class="line">    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot; </span><br><span class="line">    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;  </span><br><span class="line">    xsi:schemaLocation=&quot;  </span><br><span class="line">        http://www.springframework.org/schema/beans       </span><br><span class="line">        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/context   </span><br><span class="line">        http://www.springframework.org/schema/context/spring-context-3.0.xsd  </span><br><span class="line">        http://www.springframework.org/schema/mvc  </span><br><span class="line">        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</span><br><span class="line">        http://www.springframework.org/schema/aop</span><br><span class="line">        http://www.springframework.org/schema/aop/spring-aop.xsd</span><br><span class="line">        http://www.springframework.org/schema/tx</span><br><span class="line">     http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;  </span><br><span class="line">    &lt;!--该配置文件将配置两项重要的MVC特性：</span><br><span class="line">1.HandlerMapping,负责为DispatcherServlet这个前端控制器的请求查找Controller；</span><br><span class="line"></span><br><span class="line">2.ViewResolver,负责为DispatcherServlet查找Model And View的视图解析器。</span><br><span class="line">--&gt;</span><br><span class="line">    &lt;!-- 1. 数据源对象: C3P0连接池  我用的是Mysql数据库，不同数据库此处配置有所不同--&gt;</span><br><span class="line">&lt;bean id=&quot;dataSource&quot; class=&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;&gt;</span><br><span class="line">&lt;property name=&quot;driverClass&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;jdbcUrl&quot; value=&quot;jdbc:mysql:///hib_demo&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;user&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;initialPoolSize&quot; value=&quot;3&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;maxPoolSize&quot; value=&quot;10&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;maxStatements&quot; value=&quot;100&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;property name=&quot;acquireIncrement&quot; value=&quot;2&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 2. JdbcTemplate工具类实例 --&gt;</span><br><span class="line">&lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;</span><br><span class="line">&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 事务管理器类 --&gt;</span><br><span class="line">&lt;bean id=&quot;txManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;</span><br><span class="line">&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 对包中的所有类进行扫描，以完成Bean创建和自动依赖注入的功能需要更改 --&gt;</span><br><span class="line">&lt;context:component-scan base-package=&quot;com.test.dept&quot;&gt;&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 注解方式实现事务： 指定注解方式实现事务 --&gt;</span><br><span class="line">&lt;tx:annotation-driven transaction-manager=&quot;txManager&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;viewResolver&quot;  </span><br><span class="line">        class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;  </span><br><span class="line">        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/view/&quot; /&gt;  </span><br><span class="line">        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;  </span><br><span class="line">    &lt;/bean&gt;  </span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p> 写完之后，项目结构如下：</p><p><a href="http://i.imgur.com/uLSaYZb.png"><img src="http://i.imgur.com/uLSaYZb.png" alt="img"></a></p><h3 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">启动Tomcat，运行项目，进入input页面，如下图：</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><a href="http://i.imgur.com/n2aA7GC.png"><img src="http://i.imgur.com/n2aA7GC.png" alt="img"></a></p><p> 会弹出如下提示，是因为我们加了int i =1/0；这个异常：</p><p><a href="http://i.imgur.com/q5x59Zg.png"><img src="http://i.imgur.com/q5x59Zg.png" alt="img"></a></p><p> 最后去查找数据库发现，在异常之前进行的数据库也已回滚，并未产生读写，说明数据库事务管理成功!</p><h2 id="spring使用JdbcTemplate实现MySQL存储过程"><a href="#spring使用JdbcTemplate实现MySQL存储过程" class="headerlink" title="spring使用JdbcTemplate实现MySQL存储过程"></a>spring使用JdbcTemplate实现MySQL存储过程</h2><h3 id="存储过程优点"><a href="#存储过程优点" class="headerlink" title="存储过程优点"></a>存储过程优点</h3><p> 存储过程（Stored Procedure）是一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行它。</p><p> 一个存储过程是一个可编程的函数，它在数据库中创建并保存。它可以有SQL语句和一些特殊的控制结构组成。当希望在不同的应用程序或平台上执行相同的函数，或者封装特定功能时，存储过程是非常有用的。数据库中的存储过程可以看做是对编程中面向对象方法的模拟。</p><p> 存储过程通常有以下优点：</p><p> 1）存储过程增强了SQL语言的功能和灵活性。存储过程可以用流控制语句编写，有很强的灵活性，可以完成复杂的判断和较复杂的运算。</p><p> 2）存储过程允许标准组件是编程。存储过程被创建后，可以在程序中被多次调用，而不必重新编写该存储过程的SQL语句。而且数据库专业人员可以随时对存储过程进行修改，对应用程序源代码毫无影响.</p><p> 3）存储过程能实现较快的执行速度。如果某一操作包含大量的Transaction-SQL代码或分别被多次执行，那么存储过程要比批处理的执行速度快很多。因为存储过程是预编译的。在首次运行一个存储过程时查询，优化器对其进行分析优化，并且给出最终被存储在系统表中的执行计划。而批处理的Transaction-SQL语句在每次运行时都要进行编译和优化，速度相对要慢一些。</p><p> 4）存储过程能过减少网络流量。针对同一个数据库对象的操作（如查询、修改），如果这一操作所涉及的Transaction-SQL语句被组织程存储过程，那么当在客户计算机上调用该存储过程时，网络中传送的只是该调用语句，从而大大增加了网络流量并降低了网络负载。</p><p> 5）存储过程可被作为一种安全机制来充分利用。系统管理员通过执行某一存储过程的权限进行限制，能够实现对相应的数据的访问权限的限制，避免了非授权用户对数据的访问，保证了数据的安全。</p><h3 id="JdbcTemplate使用参考一下链接"><a href="#JdbcTemplate使用参考一下链接" class="headerlink" title="JdbcTemplate使用参考一下链接"></a>JdbcTemplate使用参考一下链接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://www.cnblogs.com/lichenwei/p/3902294.html</span><br><span class="line"></span><br><span class="line">http://lehsyh.iteye.com/blog/1579737</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Spring使用JdbcTemplate调用Mysql存储过程："><a href="#Spring使用JdbcTemplate调用Mysql存储过程：" class="headerlink" title="Spring使用JdbcTemplate调用Mysql存储过程："></a>Spring使用JdbcTemplate调用Mysql存储过程：</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p> 语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE sp_name ([ proc_parameter ]) [ characteristics..] routine_body</span><br></pre></td></tr></table></figure><p> proc_parameter指定存储过程的参数列表，列表形式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[IN|OUT|INOUT] param_name type</span><br></pre></td></tr></table></figure><p> 其中in表示输入参数，out表示输出参数，inout表示既可以输入也可以输出；param_name表示参数名称；type表示参数的类型，该类型可以是MYSQL数据库中的任意类型。</p><p> 语法构建模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">characteristic: </span><br><span class="line">    LANGUAGE SQL </span><br><span class="line">  | [NOT] DETERMINISTIC </span><br><span class="line">  | &#123; CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA &#125; </span><br><span class="line">  | SQL SECURITY &#123; DEFINER | INVOKER &#125; </span><br><span class="line">  | COMMENT &#x27;string&#x27; </span><br><span class="line">routine_body: </span><br><span class="line">    Valid SQL procedure statement or statements</span><br></pre></td></tr></table></figure><p> <strong>LANGUAGE SQL</strong> ：说明routine_body部分是由SQL语句组成的，当前系统支持的语言为SQL，SQL是LANGUAGE特性的唯一值</p><p> <strong>[NOT] DETERMINISTIC</strong> ：指明存储过程执行的结果是否正确。DETERMINISTIC 表示结果是确定的。每次执行存储过程时，相同的输入会得到相同的输出。</p><p> [NOT] DETERMINISTIC 表示结果是不确定的，相同的输入可能得到不同的输出。如果没有指定任意一个值，默认为[NOT] DETERMINISTIC</p><p> <strong>CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA</strong>：指明子程序使用SQL语句的限制。</p><p> CONTAINS SQL表明子程序包含SQL语句，但是不包含读写数据的语句；</p><p> NO SQL表明子程序不包含SQL语句；</p><p> READS SQL DATA：说明子程序包含读数据的语句；</p><p> MODIFIES SQL DATA表明子程序包含写数据的语句。</p><p> 默认情况下，系统会指定为CONTAINS SQL</p><p> <strong>SQL SECURITY { DEFINER | INVOKER }</strong> ：指明谁有权限来执行。DEFINER 表示只有定义者才能执行</p><p> INVOKER 表示拥有权限的调用者可以执行。默认情况下，系统指定为DEFINER</p><p> COMMENT ‘string’ ：注释信息，可以用来描述存储过程或函数</p><p> routine_body是SQL代码的内容，可以用BEGIN…END来表示SQL代码的开始和结束。</p><p> 下面的语句创建一个查询t1表全部数据的存储过程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS Proc;      </span><br><span class="line">DELIMITER //    </span><br><span class="line">CREATE PROCEDURE Proc()     </span><br><span class="line">BEGIN     </span><br><span class="line">SELECT * FROM t3;</span><br><span class="line">END//</span><br><span class="line">DELIMITER ;</span><br><span class="line">CALL Proc();</span><br></pre></td></tr></table></figure><p> <strong>注意：“DELIMITER //”语句的作用是将MYSQL的结束符设置为//，因为MYSQL默认的语句结束符为分号;，为了避免与存储过程*中SQL语句结束符相冲突，需要使用DELIMITER 改变存储过程的结束符，并以“END//”结束存储过程。</strong></p><p> <strong>存储过程定义完毕之后再使用DELIMITER ;恢复默认结束符。DELIMITER 也可以指定其他符号为结束符！！！！！！！！！！！</strong></p><p> <strong>注意：当使用DELIMITER命令时，应该避免使用反斜杠（\）字符，因为反斜杠是MYSQL的转义字符！！！</strong></p><h4 id="无返回值的存储过程调用"><a href="#无返回值的存储过程调用" class="headerlink" title="无返回值的存储过程调用"></a>无返回值的存储过程调用</h4><h5 id="存储过程代码："><a href="#存储过程代码：" class="headerlink" title="存储过程代码："></a>存储过程代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS testProcedure; </span><br><span class="line"></span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE testProcedure(IN empNameValue  VARCHAR(20),IN deptNameValue  VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">INSERT INTO t_employee(empName) VALUES(empNameValue);</span><br><span class="line">INSERT INTO t_dept(deptName) VALUES(deptNameValue);  </span><br><span class="line">END//</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h5 id="JdbcTemplate调用该存储过程代码："><a href="#JdbcTemplate调用该存储过程代码：" class="headerlink" title="JdbcTemplate调用该存储过程代码："></a>JdbcTemplate调用该存储过程代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">package com.test.procedure;     </span><br><span class="line">import java.sql.CallableStatement;</span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Types;</span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import org.springframework.dao.DataAccessException;</span><br><span class="line">import org.springframework.jdbc.core.CallableStatementCallback;</span><br><span class="line">import org.springframework.jdbc.core.CallableStatementCreator;</span><br><span class="line">import org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">@Controller</span><br><span class="line">public class CallProcedure &#123; </span><br><span class="line">  @Resource</span><br><span class="line">  private JdbcTemplate jdbcTemplate;     </span><br><span class="line">  public void setJdbcTemplate(JdbcTemplate jdbcTemplate) &#123;     </span><br><span class="line">  this.jdbcTemplate = jdbcTemplate;     </span><br><span class="line">  &#125;    </span><br><span class="line">  @RequestMapping(&quot;testProcedure.do&quot;)</span><br><span class="line">  public void testProcedure()&#123;   </span><br><span class="line">     final String empValue=request.getParameter(&quot;empName&quot;);</span><br><span class="line"> final String deptValue=request.getParameter(&quot;deptName&quot;);</span><br><span class="line">     this.jdbcTemplate.execute(&quot;call testProcedure(&#x27;&quot;+empValue+&quot;&#x27;,&#x27;&quot;+deptValue+&quot;&#x27;)&quot;);     </span><br><span class="line">  &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="有返回值的存储过程（非结果集）"><a href="#有返回值的存储过程（非结果集）" class="headerlink" title="有返回值的存储过程（非结果集）"></a>有返回值的存储过程（非结果集）</h4><h5 id="存储过程代码：-1"><a href="#存储过程代码：-1" class="headerlink" title="存储过程代码："></a>存储过程代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">DROP PROCEDURE IF EXISTS testProcedure; </span><br><span class="line"></span><br><span class="line">DELIMITER //</span><br><span class="line">CREATE PROCEDURE testProcedure(IN empNameValue  VARCHAR(20),IN deptNameValue  VARCHAR(20),OUT employeeName INT(11))</span><br><span class="line">BEGIN</span><br><span class="line">SELECT dept_id INTO employeeName FROM t_employee WHERE empId=1;</span><br><span class="line">INSERT INTO t_employee(empName) VALUES(empNameValue);</span><br><span class="line">INSERT INTO t_dept(deptName) VALUES(deptNameValue);</span><br><span class="line">  </span><br><span class="line">END//</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><h5 id="JdbcTemplate调用该存储过程代码：-1"><a href="#JdbcTemplate调用该存储过程代码：-1" class="headerlink" title="JdbcTemplate调用该存储过程代码："></a>JdbcTemplate调用该存储过程代码：</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package com.test.procedure;</span><br><span class="line"></span><br><span class="line">import java.sql.CallableStatement;</span><br><span class="line">import java.sql.Connection;</span><br><span class="line">import java.sql.SQLException;</span><br><span class="line">import java.sql.Types;</span><br><span class="line">import javax.annotation.Resource;</span><br><span class="line">import javax.servlet.http.HttpServletRequest;</span><br><span class="line">import org.springframework.dao.DataAccessException;</span><br><span class="line">import org.springframework.jdbc.core.CallableStatementCallback;</span><br><span class="line">import org.springframework.jdbc.core.CallableStatementCreator;</span><br><span class="line">import org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line">@Controller</span><br><span class="line">public class CallProcedure &#123;</span><br><span class="line">@Resource</span><br><span class="line">public JdbcTemplate jdbcTemplate;</span><br><span class="line">public void setJdbcTemplate(JdbcTemplate jdbcTemplate) &#123;</span><br><span class="line">this.jdbcTemplate = jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line">@RequestMapping(&quot;testProcedure.do&quot;)</span><br><span class="line">public void testProcedure(HttpServletRequest request)&#123;</span><br><span class="line">final String empValue=request.getParameter(&quot;empName&quot;);</span><br><span class="line">final String deptValue=request.getParameter(&quot;deptName&quot;);</span><br><span class="line">//传入从jsp获取的参数</span><br><span class="line">//this.jdbcTemplate.execute(&quot;call testProcedure(&#x27;&quot;+empValue+&quot;&#x27;,&#x27;&quot;+deptValue+&quot;&#x27;)&quot;);</span><br><span class="line">String empTable=(String) jdbcTemplate.execute(new CallableStatementCreator() &#123;</span><br><span class="line">public CallableStatement createCallableStatement(Connection con)</span><br><span class="line">throws SQLException &#123;</span><br><span class="line">CallableStatement cs = con.prepareCall(&quot;call testProcedure(?,?,?)&quot;);   </span><br><span class="line">           cs.setString(1, empValue);// 设置输入参数的值   </span><br><span class="line">           cs.setString(2, deptValue);</span><br><span class="line">           cs.registerOutParameter(3,Types.VARCHAR);// 注册输出参数的类型   </span><br><span class="line">           return cs; </span><br><span class="line">&#125;</span><br><span class="line">&#125;, new CallableStatementCallback&lt;Object&gt;() &#123;</span><br><span class="line"></span><br><span class="line">public Object  doInCallableStatement(CallableStatement cs)</span><br><span class="line">throws SQLException, DataAccessException &#123;</span><br><span class="line">cs.execute();   </span><br><span class="line">           return cs.getString(3);// 获取输出参数的值</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(empTable);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL server has gone away</title>
      <link href="/posts/2ecaa025/"/>
      <url>/posts/2ecaa025/</url>
      
        <content type="html"><![CDATA[<p>MySQL数据库出现<code>MySQL server has gone away</code>错误一般是sql语句太大导致的，可以更改MySQL的相关配置文件进行解决。</p><span id="more"></span><p><strong>解决办法</strong>：</p><p>找到MySQL的配置文件my.ini(其路径一般为C:\ProgramData\MySQL\MySQL Server 5.7\my.ini)，在配置文件更改<code>max_allowed_packet=10M</code>中的数值，按照需求更改；添加<code>wait_timeout=2880000</code>和<code>interactive_timeout = 2880000</code>。</p><p>更改配置文件之后一定要<strong>重启MySQL服务</strong>，重新导入sql文件即可。</p><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a href="http://www.cnblogs.com/bisonjob/archive/2009/08/18/1548611.html">2006 - MySQL server has gone away 问题解决方法</a></p>]]></content>
      
      
      <categories>
          
          <category> 开发总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据库 </tag>
            
            <tag> 错误集锦 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
